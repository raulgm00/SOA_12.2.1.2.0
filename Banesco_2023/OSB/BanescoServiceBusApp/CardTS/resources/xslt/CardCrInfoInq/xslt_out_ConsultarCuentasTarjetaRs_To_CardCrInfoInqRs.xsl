<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0"
                xmlns:UUIDUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.UUIDUserFunction"
                xmlns:IsUserInGroupFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInGroupFunction"
                xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
                xmlns:IsUserInRoleFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInRoleFunction"
                xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
                xmlns:DVMFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.dvm.DVMFunctions"
                xmlns:ns1="http://xmlns.banesco.com/eopt/CardCrInfoInq_V1.0"
                xmlns:ns0="http://www.evertec.com/SISCARD/CuentaTarjeta/consultarCuentasSiscard"
                xmlns:oracle-xsl-mapper="http://www.oracle.com/xsl/mapper/schemas"
                xmlns:oraxsl="http://www.oracle.com/XSL/Transform/java"
                xmlns:RuntimeTypeConversionFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.RuntimeTypeConversionFunctions"
                xmlns:XrefFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.xref.XrefFunctions"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:BasicCredentialsUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.BasicCredentialsUserFunction"
                exclude-result-prefixes="xsd oracle-xsl-mapper xsi xsl ns1 ns0 UUIDUserFunction IsUserInGroupFunction oraext IsUserInRoleFunction xp20 DVMFunctions oraxsl RuntimeTypeConversionFunctions XrefFunctions BasicCredentialsUserFunction"
                xmlns:nxsd="http://xmlns.oracle.com/pcbpel/nxsd" xmlns:ns5="http://xmlns.banesco.com/eo/Product_V1.0"
                xmlns:ns6="http://xmlns.banesco.com/eo/Acct_V1.0" xmlns:eoPar="http://xmlns.banesco.com/eo/Party_V1.0"
                xmlns:eoStatus="http://xmlns.banesco.com/eo/Status_V1.0"
                xmlns:ns7="http://xmlns.banesco.com/eo/Chk_V1.0" xmlns:eoBank="http://xmlns.banesco.com/eo/Banking_V1.0"
                xmlns:ns4="http://xmlns.banesco.com/eo/Fee_V1.0" xmlns:eoCard="http://xmlns.banesco.com/eo/Card_V1.0"
                xmlns:ns2="http://xmlns.banesco.com/eo/Payee_V1.0" xmlns:ns3="http://xmlns.banesco.com/eo/Common_V1.0">
  <oracle-xsl-mapper:schema>
    <!--SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY.-->
    <oracle-xsl-mapper:mapSources>
      <oracle-xsl-mapper:source type="XSD">
        <oracle-xsl-mapper:schema location="../../../../Commons/backends/EVERTEC/resources/xsd/ConsultarCuentasTarjeta.xsd"/>
        <oracle-xsl-mapper:rootElement name="Cuentas"
                                       namespace="http://www.evertec.com/SISCARD/CuentaTarjeta/consultarCuentasSiscard"/>
      </oracle-xsl-mapper:source>
      <oracle-xsl-mapper:source type="XSD">
        <oracle-xsl-mapper:schema location="../../../../Commons/xsd/EOpt/CardCr/CardCrInfoInq/CardCrInfoInq_V1.0.xsd"/>
        <oracle-xsl-mapper:rootElement name="CardCrInfoInqRq"
                                       namespace="http://xmlns.banesco.com/eopt/CardCrInfoInq_V1.0"/>
        <oracle-xsl-mapper:param name="body_backup"/>
      </oracle-xsl-mapper:source>
    </oracle-xsl-mapper:mapSources>
    <oracle-xsl-mapper:mapTargets>
      <oracle-xsl-mapper:target type="XSD">
        <oracle-xsl-mapper:schema location="../../../../Commons/xsd/EOpt/CardCr/CardCrInfoInq/CardCrInfoInq_V1.0.xsd"/>
        <oracle-xsl-mapper:rootElement name="CardCrInfoInqRs"
                                       namespace="http://xmlns.banesco.com/eopt/CardCrInfoInq_V1.0"/>
      </oracle-xsl-mapper:target>
    </oracle-xsl-mapper:mapTargets>
    <!--GENERATED BY ORACLE XSL MAPPER 12.2.1.3.0(XSLT Build 170820.1700.2557) AT [FRI SEP 07 18:07:05 CDT 2018].-->
  </oracle-xsl-mapper:schema>
  <!--User Editing allowed BELOW this line - DO NOT DELETE THIS LINE-->
  <xsl:param name="body_backup"/>
  <xsl:template match="/">
    <ns1:CardCrInfoInqRs>
      <xsl:variable name="filtrado"
                    select="DVMFunctions:lookupValue ('Commons/dvm/EvertecMapping', 'CODIGO', /ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:estadoTarjeta/text(), 'FILTRO', 'N' )"/>
      <ns1:Card>
        <xsl:if test="$filtrado = 'Y'">
          <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoTotalIntraExtraMonedaInter > 0 ">
            <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:estadoCuenta/text()">
              <eoCard:CardAcctStatus>
                <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:estadoCuenta"/>
              </eoCard:CardAcctStatus>
            </xsl:if>
            <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:lineaEmisor/text()">
              <eoCard:CardType>
                <ns3:Cod>
                  <!--<xsl:value-of select="DVMFunctions:lookupValue ('Commons/dvm/EvertecMapping', 'TIP.TARJETA', /ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:tipotarjeta/text(), 'CODIGO', 'S/D' )"/>-->
                  <xsl:value-of select="DVMFunctions:lookupValue ('Commons/dvm/EvertecMapping', 'DESC', /ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:lineaEmisor/text(), 'CODIGO', 'S/D' )"/>
                </ns3:Cod>
                <ns3:Desc>
                  <!--<xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:tipotarjeta/text()"/>-->
                  <xsl:value-of select="DVMFunctions:lookupValue ('Commons/dvm/EvertecMapping', 'DESC', /ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:lineaEmisor/text(), 'LIN.EMISOR', 'S/D' )"/>
                </ns3:Desc>
              </eoCard:CardType>
            </xsl:if>
            <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:montoUltimoPagoMonedaInter/text()">
              <eoCard:LastPmtAmt>
                <ns3:Amt>
                  <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:montoUltimoPagoMonedaInter"/>
                </ns3:Amt>
                <ns3:CurCode>USD</ns3:CurCode>
              </eoCard:LastPmtAmt>
            </xsl:if>
            <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:fechaUltimoPagoMonedaInter/text()">
              <eoCard:LastPmtDt>
                <xsl:variable name="in"
                              select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:fechaUltimoPagoMonedaInter/text()"/>
                <xsl:variable name="dateTime"
                              select="concat(substring($in,1,4),'-',substring($in,5,2),'-',substring($in,7,2))"/>
                <xsl:value-of select="$dateTime"/>
              </eoCard:LastPmtDt>
            </xsl:if>
            <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:fechaVencimientoPago/text()">
              <eoCard:NextPmtDt>
                <xsl:variable name="in" select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:fechaVencimientoPago/text()"/>
                <xsl:variable name="dateTime"
                              select="concat(substring($in,1,4),'-',substring($in,5,2),'-',substring($in,7,2))"/>
                <xsl:value-of select="$dateTime"/>
              </eoCard:NextPmtDt>
            </xsl:if>
            <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:fechaVencimientoPago/text()">
              <eoCard:PmtLimitDt>
                <xsl:variable name="in" select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:fechaVencimientoPago/text()"/>
                <xsl:variable name="dateTime"
                              select="concat(substring($in,1,4),'-',substring($in,5,2),'-',substring($in,7,2))"/>
                <xsl:value-of select="$dateTime"/>
              </eoCard:PmtLimitDt>
            </xsl:if>
            <eoCard:FinancialData>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:montoImporteInter/text()">
                <eoCard:ArrearsBalance>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:montoImporteInter"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:ArrearsBalance>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:dispIntTarjeta">
                <eoCard:AvailablePurchaseAmt>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:dispIntTarjeta"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:AvailablePurchaseAmt>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:disponibleEfInter/text()">
                <eoCard:AvailExtraFinancing>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:disponibleEfInter"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:AvailExtraFinancing>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:pagoContadoInt/text()">
                <eoCard:CashPmtAmt>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:pagoContadoInt"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:CashPmtAmt>
              </xsl:if>
              <xsl:choose>
                <xsl:when test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:limiteTarInter !='0'">
                  <eoCard:CreditLimit>
                    <ns3:Amt>
                      <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:limiteTarInter"/>
                    </ns3:Amt>
                    <ns3:CurCode>USD</ns3:CurCode>
                  </eoCard:CreditLimit>
                </xsl:when>
                <xsl:otherwise>
                  <eoCard:CreditLimit>
                    <ns3:Amt>
                      <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:limiteCtaInter"/>
                    </ns3:Amt>
                    <ns3:CurCode>USD</ns3:CurCode>
                  </eoCard:CreditLimit>
                </xsl:otherwise>
              </xsl:choose>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoInter/text()">
                <eoCard:CurrentBalance>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoInter"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:CurrentBalance>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:salTotCorteInter/text()">
                <eoCard:CutBalance>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:salTotCorteInter"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:CutBalance>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoActualExtraMonedaInter/text()">
                <eoCard:ExtraFinancingAmt>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoActualExtraMonedaInter"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:ExtraFinancingAmt>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:tasaInteresAdelantosMonedaInter/text()">
                <eoCard:InterestRateCashAdv>
                  <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:tasaInteresAdelantosMonedaInter"/>
                </eoCard:InterestRateCashAdv>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:tasaInteresComprasMonedaInter/text()">
                <eoCard:InterestRatePurchases>
                  <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:tasaInteresComprasMonedaInter"/>
                </eoCard:InterestRatePurchases>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoActualIntraMonedaInter/text()">
                <eoCard:IntraCurrentBalance>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoActualIntraMonedaInter"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:IntraCurrentBalance>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:debitoTransitoInter/text()">
                <eoCard:TotalAmtTransitTransactions>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:debitoTransitoInter"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:TotalAmtTransitTransactions>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoTotalIntraExtraMonedaInter/text()">
                <eoCard:TotalBalance>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoTotalIntraExtraMonedaInter"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:TotalBalance>
              </xsl:if>
            </eoCard:FinancialData>
            <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoPuntosPromocionalActual/text()">
              <eoCard:LoyaltyProgram>
                <eoCard:TotalPoints>
                  <xsl:value-of select="substring-before(/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:saldoPuntosPromocionalActual,'.')"/>
                </eoCard:TotalPoints>
              </eoCard:LoyaltyProgram>
            </xsl:if>
            <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:numeroTarjeta/text()">
              <eoCard:CardKey>
                <eoCard:CardNum>
                  <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:numeroTarjeta"/>
                </eoCard:CardNum>
              </eoCard:CardKey>
            </xsl:if>
            <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:estadoTarjeta/text()">
              <eoCard:CardStatus>
                <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:estadoTarjeta">
                  <eoCard:CardStatusCode>
                    <xsl:value-of select="concat('00',/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:estadoTarjeta/text())"/>
                  </eoCard:CardStatusCode>
                </xsl:if>
              </eoCard:CardStatus>
            </xsl:if>
            <eoCard:CardPeriodData>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:pagoMinimoInt/text()">
                <eoCard:MinimumPmt>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:pagoMinimoInt"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:MinimumPmt>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:plazoPrestamoPrestaCard/text()">
                <eoCard:Term>
                  <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:plazoPrestamoPrestaCard"/>
                </eoCard:Term>
              </xsl:if>
              <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:creditosInt/text()">
                <eoCard:TotalPmtsMade>
                  <ns3:Amt>
                    <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:creditosInt"/>
                  </ns3:Amt>
                  <ns3:CurCode>USD</ns3:CurCode>
                </eoCard:TotalPmtsMade>
              </xsl:if>
            </eoCard:CardPeriodData>
          </xsl:if>
        </xsl:if>
      </ns1:Card>
      <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData">
        <ns1:FIData>
          <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:BranchId">
            <eoBank:BranchId>
              <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:BranchId"/>
            </eoBank:BranchId>
          </xsl:if>
          <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:BranchName/text()">
            <eoBank:BranchName>
              <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:BranchName"/>
            </eoBank:BranchName>
          </xsl:if>
          <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:FIIdent/text()">
            <eoBank:FIIdent>
              <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:FIIdent"/>
            </eoBank:FIIdent>
          </xsl:if>
          <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:FIIdentType/text()">
            <eoBank:FIIdentType>
              <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:FIIdentType"/>
            </eoBank:FIIdentType>
          </xsl:if>
          <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Name">
            <eoBank:Name>
              <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Name"/>
            </eoBank:Name>
          </xsl:if>
          <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr">
            <eoBank:PostAddr>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Addr1/text()">
                <ns3:Addr1>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Addr1"/>
                </ns3:Addr1>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Addr2/text()">
                <ns3:Addr2>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Addr2"/>
                </ns3:Addr2>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Addr3/text()">
                <ns3:Addr3>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Addr3"/>
                </ns3:Addr3>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Addr4/text()">
                <ns3:Addr4>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Addr4"/>
                </ns3:Addr4>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:AddrDesc/text()">
                <ns3:AddrDesc>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:AddrDesc"/>
                </ns3:AddrDesc>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:AddressIdent/text()">
                <ns3:AddressIdent>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:AddressIdent"/>
                </ns3:AddressIdent>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:AddrType/text()">
                <ns3:AddrType>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:AddrType"/>
                </ns3:AddrType>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Building">
                <ns3:Building>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Building/ns3:Cod/text()">
                    <ns3:Cod>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Building/ns3:Cod"/>
                    </ns3:Cod>
                  </xsl:if>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Building/ns3:Desc/text()">
                    <ns3:Desc>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Building/ns3:Desc"/>
                    </ns3:Desc>
                  </xsl:if>
                </ns3:Building>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:City">
                <ns3:City>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:City/ns3:Cod/text()">
                    <ns3:Cod>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:City/ns3:Cod"/>
                    </ns3:Cod>
                  </xsl:if>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:City/ns3:Desc/text()">
                    <ns3:Desc>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:City/ns3:Desc"/>
                    </ns3:Desc>
                  </xsl:if>
                </ns3:City>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:CountyDistrict">
                <ns3:CountyDistrict>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:CountyDistrict/ns3:Cod/text()">
                    <ns3:Cod>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:CountyDistrict/ns3:Cod"/>
                    </ns3:Cod>
                  </xsl:if>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:CountyDistrict/ns3:Desc/text()">
                    <ns3:Desc>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:CountyDistrict/ns3:Desc"/>
                    </ns3:Desc>
                  </xsl:if>
                </ns3:CountyDistrict>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:HouseNumber/text()">
                <ns3:HouseNumber>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:HouseNumber"/>
                </ns3:HouseNumber>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Jurisdiction">
                <ns3:Jurisdiction>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Jurisdiction/ns3:Cod/text()">
                    <ns3:Cod>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Jurisdiction/ns3:Cod"/>
                    </ns3:Cod>
                  </xsl:if>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Jurisdiction/ns3:Desc/text()">
                    <ns3:Desc>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Jurisdiction/ns3:Desc"/>
                    </ns3:Desc>
                  </xsl:if>
                </ns3:Jurisdiction>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:POBox/text()">
                <ns3:POBox>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:POBox"/>
                </ns3:POBox>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:PostalCode/text()">
                <ns3:PostalCode>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:PostalCode"/>
                </ns3:PostalCode>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Province">
                <ns3:Province>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Province/ns3:Cod/text()">
                    <ns3:Cod>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Province/ns3:Cod"/>
                    </ns3:Cod>
                  </xsl:if>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Province/ns3:Desc/text()">
                    <ns3:Desc>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Province/ns3:Desc"/>
                    </ns3:Desc>
                  </xsl:if>
                </ns3:Province>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:State">
                <ns3:State>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:State/ns3:Cod/text()">
                    <ns3:Cod>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:State/ns3:Cod"/>
                    </ns3:Cod>
                  </xsl:if>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:State/ns3:Desc/text()">
                    <ns3:Desc>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:State/ns3:Desc"/>
                    </ns3:Desc>
                  </xsl:if>
                </ns3:State>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Street">
                <ns3:Street>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Street/text()"/>
                </ns3:Street>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:UpDt/text()">
                <ns3:UpDt>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:UpDt"/>
                </ns3:UpDt>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Country">
                <ns3:Country>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Country/ns3:CountryCode/text()">
                    <ns3:CountryCode>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Country/ns3:CountryCode"/>
                    </ns3:CountryCode>
                  </xsl:if>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Country/ns3:CountryName/text()">
                    <ns3:CountryName>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:PostAddr/ns3:Country/ns3:CountryName"/>
                    </ns3:CountryName>
                  </xsl:if>
                </ns3:Country>
              </xsl:if>
            </eoBank:PostAddr>
          </xsl:if>
          <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:RefIdent/text()">
            <eoBank:RefIdent>
              <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:RefIdent"/>
            </eoBank:RefIdent>
          </xsl:if>
          <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Agency">
            <eoBank:Agency>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Agency/eoBank:AgencyDesc/text()">
                <eoBank:AgencyDesc>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Agency/eoBank:AgencyDesc"/>
                </eoBank:AgencyDesc>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Agency/eoBank:AgencyIdent/text()">
                <eoBank:AgencyIdent>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Agency/eoBank:AgencyIdent"/>
                </eoBank:AgencyIdent>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Agency/eoBank:AgencyName">
                <eoBank:AgencyName>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Agency/eoBank:AgencyName/text()"/>
                </eoBank:AgencyName>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Agency/eoBank:AgencyStatus/text()">
                <eoBank:AgencyStatus>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:FIData/eoBank:Agency/eoBank:AgencyStatus"/>
                </eoBank:AgencyStatus>
              </xsl:if>
            </eoBank:Agency>
          </xsl:if>
        </ns1:FIData>
      </xsl:if>
      <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey">
        <ns1:Party>
          <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey">
            <eoPar:PartyKey>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:File/text()">
                <eoPar:File>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:File"/>
                </eoPar:File>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:FolioDigit/text()">
                <eoPar:FolioDigit>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:FolioDigit"/>
                </eoPar:FolioDigit>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:HolderName/text()">
                <eoPar:HolderName>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:HolderName"/>
                </eoPar:HolderName>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:IdentImgDigit/text()">
                <eoPar:IdentImgDigit>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:IdentImgDigit"/>
                </eoPar:IdentImgDigit>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:IssuedIdentType/text()">
                <eoPar:IssuedIdentType>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:IssuedIdentType"/>
                </eoPar:IssuedIdentType>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:IssuedIdentValue/text()">
                <eoPar:IssuedIdentValue>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:IssuedIdentValue"/>
                </eoPar:IssuedIdentValue>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:ProvinceDigit/text()">
                <eoPar:ProvinceDigit>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:ProvinceDigit"/>
                </eoPar:ProvinceDigit>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:RollDoc/text()">
                <eoPar:RollDoc>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:RollDoc"/>
                </eoPar:RollDoc>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:SpecialIdentDigit/text()">
                <eoPar:SpecialIdentDigit>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:SpecialIdentDigit"/>
                </eoPar:SpecialIdentDigit>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:VerifyDigit/text()">
                <eoPar:VerifyDigit>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:VerifyDigit"/>
                </eoPar:VerifyDigit>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:PartyId/text()">
                <eoPar:PartyId>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:PartyId"/>
                </eoPar:PartyId>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:PartyType/text()">
                <eoPar:PartyType>
                  <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:PartyType"/>
                </eoPar:PartyType>
              </xsl:if>
              <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:LoginIdent">
                <eoPar:LoginIdent>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:LoginIdent/eoPar:LoginAuthority/text()">
                    <eoPar:LoginAuthority>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:LoginIdent/eoPar:LoginAuthority"/>
                    </eoPar:LoginAuthority>
                  </xsl:if>
                  <xsl:if test="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:LoginIdent/eoPar:LoginName/text()">
                    <eoPar:LoginName>
                      <xsl:value-of select="$body_backup/ns1:CardCrInfoInqRq/ns1:PartyKey/eoPar:LoginIdent/eoPar:LoginName"/>
                    </eoPar:LoginName>
                  </xsl:if>
                </eoPar:LoginIdent>
              </xsl:if>
            </eoPar:PartyKey>
          </xsl:if>
        </ns1:Party>
      </xsl:if>
      <xsl:if test="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:nombre/text()">
        <ns1:PersonName>
          <eoPar:FullName>
            <xsl:value-of select="/ns0:Cuentas/ns0:cuenta/ns0:tarjetas/ns0:nombre"/>
          </eoPar:FullName>
        </ns1:PersonName>
      </xsl:if>
      <ns1:Status>
        <xsl:choose>
          <xsl:when test="/ns0:Cuentas/ns0:status = 'SUCCESS'">
            <eoStatus:StatusCode>
              <xsl:value-of select="DVMFunctions:lookupValue ('Commons/dvm/StatusMappingBcknd', 'SISCARDBD', '0', 'CNCODE', 'M0006' )"/>
            </eoStatus:StatusCode>
          </xsl:when>
          <xsl:otherwise>
            <eoStatus:StatusCode>
              <xsl:value-of select="DVMFunctions:lookupValue ('Commons/dvm/StatusMappingBcknd', 'SISCARDBD', '1', 'CNCODE', 'M0006' )"/>
            </eoStatus:StatusCode>
          </xsl:otherwise>
        </xsl:choose>
        <xsl:choose>
          <xsl:when test="/ns0:Cuentas/ns0:status = 'SUCCESS'">
            <eoStatus:StatusDesc>
              <xsl:value-of select="DVMFunctions:lookupValue ('Commons/dvm/StatusMappingBcknd', 'SISCARDBD', '0', 'CNDESC', 'FALLO EN LA OPERACION' )"/>
            </eoStatus:StatusDesc>
          </xsl:when>
          <xsl:otherwise>
            <eoStatus:StatusDesc>
              <xsl:value-of select="DVMFunctions:lookupValue ('Commons/dvm/StatusMappingBcknd', 'SISCARDBD', '1', 'CNDESC', 'FALLO EN LA OPERACION' )"/>
            </eoStatus:StatusDesc>
          </xsl:otherwise>
        </xsl:choose>
        <eoStatus:AdditionalStatus>
          <eoStatus:StatusCode>
            <xsl:value-of select="/ns0:Cuentas/ns0:statusCode"/>
          </eoStatus:StatusCode>
          <xsl:choose>
            <xsl:when test="count(/ns0:Cuentas/ns0:cuenta) = 0">
              <xsl:choose>
                <xsl:when test='/ns0:Cuentas/ns0:statusCode/text() != "00"'>
                  <eoStatus:StatusDesc>
                    <xsl:value-of select="/ns0:Cuentas/ns0:statusMessage"/>
                  </eoStatus:StatusDesc>
                </xsl:when>
                <xsl:otherwise>
                  <eoStatus:StatusDesc>Ejecución exitosa, sin embargo ninguna de las tarjetas asociadas es candidata a retornar</eoStatus:StatusDesc>
                </xsl:otherwise>
              </xsl:choose>
            </xsl:when>
            <xsl:otherwise>
              <eoStatus:StatusDesc>
                <xsl:value-of select="/ns0:Cuentas/ns0:statusMessage"/>
              </eoStatus:StatusDesc>
            </xsl:otherwise>
          </xsl:choose>
        </eoStatus:AdditionalStatus>
      </ns1:Status>
    </ns1:CardCrInfoInqRs>
  </xsl:template>
</xsl:stylesheet>