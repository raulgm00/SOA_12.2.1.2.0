<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="2.0"
                xmlns:UUIDUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.UUIDUserFunction"
                xmlns:IsUserInGroupFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInGroupFunction"
                xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
                xmlns:IsUserInRoleFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInRoleFunction"
                xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
                xmlns:DVMFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.dvm.DVMFunctions"
                xmlns:ns0="http://xmlns.banesco.com/eopt/AcctAdd_V1.0"
                xmlns:oracle-xsl-mapper="http://www.oracle.com/xsl/mapper/schemas"
                xmlns:oraxsl="http://www.oracle.com/XSL/Transform/java"
                xmlns:RuntimeTypeConversionFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.RuntimeTypeConversionFunctions"
                xmlns:XrefFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.xref.XrefFunctions"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:BasicCredentialsUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.BasicCredentialsUserFunction"
                xmlns:tns="http://www.temenos.com/T24/ofs/Request"
                exclude-result-prefixes="xsd oracle-xsl-mapper xsi xsl ns0 tns UUIDUserFunction IsUserInGroupFunction oraext IsUserInRoleFunction xp20 DVMFunctions oraxsl RuntimeTypeConversionFunctions XrefFunctions BasicCredentialsUserFunction"
                xmlns:ns5="http://xmlns.banesco.com/eo/Product_V1.0"
                xmlns:eoAcct="http://xmlns.banesco.com/eo/Acct_V1.0" xmlns:ns6="http://xmlns.banesco.com/eo/Party_V1.0"
                xmlns:eoStatus="http://xmlns.banesco.com/eo/Status_V1.0"
                xmlns:ns7="http://xmlns.banesco.com/eo/Chk_V1.0" xmlns:ns2="http://xmlns.banesco.com/eo/Banking_V1.0"
                xmlns:ns4="http://xmlns.banesco.com/eo/Fee_V1.0" xmlns:ns1="http://xmlns.banesco.com/eo/Card_V1.0"
                xmlns:eoPayee="http://xmlns.banesco.com/eo/Payee_V1.0"
                xmlns:head="http://xmlns.banesco.com/appopt/AOptCommon_V1.0"
                xmlns:ns3="http://xmlns.banesco.com/eo/Common_V1.0"
                xmlns:ns8="http://www.temenos.com/T24/ofs/AAARRANGEMENTACTIVITYWFACCTNEWType"
                xmlns:reqcns="http://www.temenos.com/T24/ofs/RequestCommon"
                xmlns:fn="http://www.w3.org/2005/xpath-functions"
                xmlns:eoSignGrp="http://xmlns.banesco.com/eo/SignatureGrp_V1.0">
  <oracle-xsl-mapper:schema>
    <!--SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY.-->
    <oracle-xsl-mapper:mapSources>
      <oracle-xsl-mapper:source type="XSD">
        <oracle-xsl-mapper:schema location="../../../../Commons/xsd/EOpt/Account/AcctAdd/AcctAdd_V1.0.xsd"/>
        <oracle-xsl-mapper:rootElement name="AcctAddRq" namespace="http://xmlns.banesco.com/eopt/AcctAdd_V1.0"/>
      </oracle-xsl-mapper:source>
    </oracle-xsl-mapper:mapSources>
    <oracle-xsl-mapper:mapTargets>
      <oracle-xsl-mapper:target type="XSD">
        <oracle-xsl-mapper:schema location="../../../../Commons/backends/T24/resources/xsd/AAArrangementActivity/NewcustomeraccNatCreaciondeclientecuentanatRequest.xsd"/>
        <oracle-xsl-mapper:rootElement name="AAARRANGEMENTACTIVITYWFACCTNEWRequest"
                                       namespace="http://www.temenos.com/T24/ofs/Request"/>
      </oracle-xsl-mapper:target>
    </oracle-xsl-mapper:mapTargets>
    <!--GENERATED BY ORACLE XSL MAPPER 12.2.1.2.0(XSLT Build 161003.0739.0018) AT [MON MAY 07 17:42:15 COT 2018].-->
  </oracle-xsl-mapper:schema>
  <!--User Editing allowed BELOW this line - DO NOT DELETE THIS LINE-->
  <xsl:include href="../../../../Commons/xslt/Template/TemplateServiceUtil.xsl"/>
  <xsl:param name="varHeader"/>
  <xsl:template match="/">
    <xsl:variable name="PROPERTY_BALANCE">
      <mPROPERTY>
        <PROPERTY>BALANCE</PROPERTY>
        <sgFIELDNAME>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:SubCategory/text()">
            <FIELDNAME>
              <FIELDNAME>LT.SUBPRODUCT</FIELDNAME>
              <FIELDVALUE>
                <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:SubCategory"/>
              </FIELDVALUE>
            </FIELDNAME>
          </xsl:if>
        </sgFIELDNAME>
      </mPROPERTY>
    </xsl:variable>
    <xsl:variable name="PROPERTY_CUSTOMER">
      <mPROPERTY>
        <PROPERTY>CUSTOMER</PROPERTY>
        <sgFIELDNAME>
          <xsl:for-each select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:PayeeInfo">
            <xsl:variable name="indice">
              <xsl:value-of select="position()"></xsl:value-of>
            </xsl:variable>
            <xsl:if test="eoPayee:FSPayee/eoPayee:PersonData/ns6:PersonName/ns6:FullName/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.NAME.BENEF:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:FSPayee/eoPayee:PersonData/ns6:PersonName/ns6:FullName"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:Percentage/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.RATE.BENEF:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:Percentage"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:PayeeType/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.RELAT.BENEF:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:PayeeType"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:FSPayee/eoPayee:PersonData/ns6:IssuedIdent/ns6:Ident/ns6:IssuedIdentValue/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.ID.BENEF:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:FSPayee/eoPayee:PersonData/ns6:IssuedIdent/ns6:Ident/ns6:IssuedIdentValue"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:FSPayee/eoPayee:PersonData/ns6:Contact/ns3:Locator/ns3:PostAddr/ns3:Country/ns3:CountryCode/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.RESID.BENEF:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:FSPayee/eoPayee:PersonData/ns6:Contact/ns3:Locator/ns3:PostAddr/ns3:Country/ns3:CountryCode"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:FSPayee/eoPayee:PersonData/ns6:Contact/ns3:Locator/ns3:Phone/ns3:AreaCode/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.PHONE.CODE:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:FSPayee/eoPayee:PersonData/ns6:Contact/ns3:Locator/ns3:Phone/ns3:AreaCode"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:FSPayee/eoPayee:PersonData/ns6:Contact/ns3:Locator/ns3:Phone/ns3:PhoneNum/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.PHONE:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:FSPayee/eoPayee:PersonData/ns6:Contact/ns3:Locator/ns3:Phone/ns3:PhoneNum"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:UnderAge">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.MINOR:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <!--
                <xsl:choose>
                  <xsl:when test="eoPayee:UnderAge='1'">
                    <FIELDVALUE>Y</FIELDVALUE>
                  </xsl:when>
                  <xsl:when test="eoPayee:UnderAge='0'">
                    <FIELDVALUE>N</FIELDVALUE>
                  </xsl:when>
                </xsl:choose>               
                -->
                <FIELDVALUE>
                  <!--<xsl:value-of select="DVMFunctions:lookupValue ('Commons/dvm/ServiceProperties', 'VALUE', eoPayee:UnderAge, 'CODE', 'NA')"/>-->
                  <xsl:call-template name="Boolean_Regex">
                    <xsl:with-param name="operation">ADD</xsl:with-param>
                    <xsl:with-param name="parametro">
                  <xsl:value-of select="eoPayee:UnderAge"></xsl:value-of>
                </xsl:with-param>
                  </xsl:call-template>
                </FIELDVALUE>
                <!--FIELDVALUE>N</FIELDVALUE-->
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:TutorData/ns6:PersonName/ns6:FullName/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.TUTOR.NAME:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:TutorData/ns6:PersonName/ns6:FullName"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:TutorData/ns6:IssuedIdent/ns6:Ident/ns6:IssuedIdentValue">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.ID.TUTOR:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:TutorData/ns6:IssuedIdent/ns6:Ident/ns6:IssuedIdentValue"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:TutorData/ns6:Contact/ns3:Locator/ns3:Phone/ns3:AreaCode/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.PHONE.COD2:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:TutorData/ns6:Contact/ns3:Locator/ns3:Phone/ns3:AreaCode"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoPayee:TutorData/ns6:Contact/ns3:Locator/ns3:Phone/ns3:PhoneNum/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('LT.PHONE.TUTOR:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoPayee:TutorData/ns6:Contact/ns3:Locator/ns3:Phone/ns3:PhoneNum"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
          </xsl:for-each>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:MovType/text()">
            <FIELDNAME>
              <FIELDNAME>LT.MOBILIZATION</FIELDNAME>
              <FIELDVALUE>
                <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:MovType"/>
              </FIELDVALUE>
            </FIELDNAME>
          </xsl:if>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:ClubBanesco">
            <FIELDNAME>
              <FIELDNAME>LT.CLUB.BANESCO</FIELDNAME>
              <FIELDVALUE>
                <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:ClubBanesco"/>
              </FIELDVALUE>
            </FIELDNAME>
          </xsl:if>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:ChkBook[1]/ns7:FirstHolder/text()">
            <FIELDNAME>
              <FIELDNAME>LT.NAME1.CHQ</FIELDNAME>
              <FIELDVALUE>
                <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:ChkBook[1]/ns7:FirstHolder"/>
              </FIELDVALUE>
            </FIELDNAME>
          </xsl:if>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:ChkBook[1]/ns7:SecondHolder/text()">
            <FIELDNAME>
              <FIELDNAME>LT.NAME2.CHQ</FIELDNAME>
              <FIELDVALUE>
                <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:ChkBook/ns7:SecondHolder"/>
              </FIELDVALUE>
            </FIELDNAME>
          </xsl:if>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:ChkBook[1]/ns7:HolderCondition/text()">
            <FIELDNAME>
              <FIELDNAME>LT.NAME.CHQ.YO</FIELDNAME>
              <FIELDVALUE>
                <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:ChkBook[1]/ns7:HolderCondition"/>
              </FIELDVALUE>
            </FIELDNAME>
          </xsl:if>
        </sgFIELDNAME>
      </mPROPERTY>
    </xsl:variable>
    <xsl:variable name="PROPERTY_OFFICER">
      <mPROPERTY>
        <PROPERTY>OFFICERS</PROPERTY>
        <sgFIELDNAME>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:AcctOpeningInfo/eoAcct:SaleOfficer/text()">
            <FIELDNAME>
              <FIELDNAME>LT.SALE.OFFICER</FIELDNAME>
              <FIELDVALUE>
                <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:AcctOpeningInfo/eoAcct:SaleOfficer"/>
              </FIELDVALUE>
            </FIELDNAME>
          </xsl:if>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:AcctOpeningInfo/eoAcct:BusinessUnit/text()">
            <FIELDNAME>
              <FIELDNAME>LT.BUS.UNIT</FIELDNAME>
              <FIELDVALUE>
                <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:AcctOpeningInfo/eoAcct:BusinessUnit"/>
              </FIELDVALUE>
            </FIELDNAME>
          </xsl:if>
        </sgFIELDNAME>
      </mPROPERTY>
    </xsl:variable>
    <xsl:variable name="PROPERTY_ACCOUNT">
      <mPROPERTY>
        <PROPERTY>ACCOUNT</PROPERTY>
        <sgFIELDNAME>
          <xsl:for-each select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Mandate">
            <xsl:variable name="indice">
              <xsl:value-of select="position()"></xsl:value-of>
            </xsl:variable>
            <xsl:if test="eoSignGrp:MandateAppIdent/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('MANDATE.APPL:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoSignGrp:MandateAppIdent"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
            <xsl:if test="eoSignGrp:MandateId/text()">
              <FIELDNAME>
                <FIELDNAME>
                  <xsl:value-of select="concat('MANDATE.RECORD:',$indice)"></xsl:value-of>
                </FIELDNAME>
                <FIELDVALUE>
                  <xsl:value-of select="eoSignGrp:MandateId"/>
                </FIELDVALUE>
              </FIELDNAME>
            </xsl:if>
          </xsl:for-each>
        </sgFIELDNAME>
      </mPROPERTY>
    </xsl:variable>
    <opaq:opaqueElement xmlns:opaq="http://xmlns.oracle.com/pcbpel/adapter/opaque/">
      <tns:AAARRANGEMENTACTIVITYWFACCTNEWRequest>
        <RequestCommon>
          <UserName>
            <xsl:value-of select="$varHeader/head:ClientApp/head:UserId"/>
          </UserName>
        </RequestCommon>
        <AAARRANGEMENTACTIVITYWFACCTNEW>
          <ARRANGEMENT>NEW</ARRANGEMENT>
          <ACTIVITY>ACCOUNTS-NEW-ARRANGEMENT</ACTIVITY>
          <gCUSTOMER>
            <xsl:for-each select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:AcctMember">
              <mCUSTOMER>
                <CUSTOMER>
                  <xsl:value-of select="eoAcct:PartyKey/ns6:PartyId"/>
                </CUSTOMER>
                <xsl:if test="eoAcct:PartyRole/ns3:Cod/text()">
                  <CUSTOMERROLE>
                    <xsl:value-of select="eoAcct:PartyRole/ns3:Cod"/>
                  </CUSTOMERROLE>
                </xsl:if>
              </mCUSTOMER>
            </xsl:for-each>
          </gCUSTOMER>
          <PRODUCT>
            <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:AcctSubtype/ns3:Cod"/>
          </PRODUCT>
          <CURRENCY>
            <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:CurCode"/>
          </CURRENCY>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:Variation/ns3:Cod/text()">
            <PRODUCTVARIATION>
              <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:Variation/ns3:Cod"/>
            </PRODUCTVARIATION>
          </xsl:if>
          <gPROPERTY>
            <xsl:if test="count($PROPERTY_BALANCE/mPROPERTY/sgFIELDNAME/FIELDNAME) > 0">
              <xsl:copy-of select="$PROPERTY_BALANCE"/>
            </xsl:if>
            <xsl:if test="count($PROPERTY_CUSTOMER/mPROPERTY/sgFIELDNAME/FIELDNAME) > 0">
              <xsl:copy-of select="$PROPERTY_CUSTOMER"/>
            </xsl:if>
            <xsl:if test="count($PROPERTY_OFFICER/mPROPERTY/sgFIELDNAME/FIELDNAME) > 0">
              <xsl:copy-of select="$PROPERTY_OFFICER"/>
            </xsl:if>
            <xsl:if test="count($PROPERTY_ACCOUNT/mPROPERTY/sgFIELDNAME/FIELDNAME) > 0">
              <xsl:copy-of select="$PROPERTY_ACCOUNT"/>
            </xsl:if>
          </gPROPERTY>
          <xsl:if test="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:AcctOpeningInfo/eoAcct:RqManualReason/text()">
            <REASON>
              <xsl:value-of select="/ns0:AcctAddRq/ns0:AcctAddRec/ns0:Acct/eoAcct:AcctOpeningInfo/eoAcct:RqManualReason"/>
            </REASON>
          </xsl:if>
        </AAARRANGEMENTACTIVITYWFACCTNEW>
      </tns:AAARRANGEMENTACTIVITYWFACCTNEWRequest>
    </opaq:opaqueElement>
  </xsl:template>
</xsl:stylesheet>
