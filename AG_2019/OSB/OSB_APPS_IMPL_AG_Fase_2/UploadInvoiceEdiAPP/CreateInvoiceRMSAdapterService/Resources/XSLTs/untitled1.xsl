<xsl:stylesheet version="1.0" exclude-result-prefixes=" xsd oracle-xsl-mapper xsi xsl ns0 tns UUIDUserFunction IsUserInGroupFunction oraext IsUserInRoleFunction xp20 DVMFunctions oraxsl RuntimeTypeConversionFunctions XrefFunctions BasicCredentialsUserFunction" xmlns:UUIDUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.UUIDUserFunction" xmlns:IsUserInGroupFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInGroupFunction" xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:IsUserInRoleFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInRoleFunction" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:DVMFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.dvm.DVMFunctions" xmlns:tns="http://TargetNamespace.com/ftpReference" xmlns:oracle-xsl-mapper="http://www.oracle.com/xsl/mapper/schemas" xmlns:oraxsl="http://www.oracle.com/XSL/Transform/java" xmlns:RuntimeTypeConversionFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.RuntimeTypeConversionFunctions" xmlns:XrefFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.xref.XrefFunctions" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:BasicCredentialsUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.BasicCredentialsUserFunction" xmlns:ns0="http://www.agarcia.mx/EnterpriseObjects/Invoice" xmlns:com="http://www.agarcia.mx/EnterpriseObjects/Common" xmlns:ns1="http://www.agarcia.mx/EnterpriseObjects/Custom" xmlns:nxsd="http://xmlns.oracle.com/pcbpel/nxsd">
   <oracle-xsl-mapper:schema>
      <!--SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY.-->
      <oracle-xsl-mapper:mapSources>
         <oracle-xsl-mapper:source type="XSD">
            <oracle-xsl-mapper:schema location="../../../../MetaData/Components/EnterpriseObjectLibrary/EBO/Invoice/InvoiceEBM.xsd"/>
            <oracle-xsl-mapper:rootElement name="CreateInvoiceEBM" namespace="http://www.agarcia.mx/EnterpriseObjects/Invoice"/>
         </oracle-xsl-mapper:source>
      </oracle-xsl-mapper:mapSources>
      <oracle-xsl-mapper:mapTargets>
         <oracle-xsl-mapper:target type="XSD">
            <oracle-xsl-mapper:schema location="../../../../MetaData/Components/EnterpriseObjectLibrary/EBO/Invoice/EscribeFileFTP.xsd"/>
            <oracle-xsl-mapper:rootElement name="Root-Element" namespace="http://TargetNamespace.com/ftpReference"/>
         </oracle-xsl-mapper:target>
      </oracle-xsl-mapper:mapTargets>
      <!--GENERATED BY ORACLE XSL MAPPER 12.2.1.2.0(XSLT Build 161003.0739.0018) AT [THU SEP 10 18:23:53 CDT 2020].-->
   </oracle-xsl-mapper:schema>
   <!--User Editing allowed BELOW this line - DO NOT DELETE THIS LINE-->
   <xsl:template match="/">
    <ftp:Root-Element xmlns:ftp="http://TargetNamespace.com/ftpReference">
    <!--You have a CHOICE of the next 6 items at this level-->
    <ftp:FHEAD>
        <ftp:LineId><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:FHLine_id, '0000000000')"/></ftp:LineId>
        <ftp:GentranID><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:FHGentran_ID,'          '),1,5)"/></ftp:GentranID>
        <ftp:Currentdate><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:FHCurrent_date,'          '),1,14)"/></ftp:Currentdate>
    </ftp:FHEAD>
        <ftp:THEAD>
        <ftp:LineId><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Line_id2, '0000000000')"/></ftp:LineId>
        <ftp:TransactionNum><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Transaction_number, '0000000000')"/></ftp:TransactionNum>
        <ftp:DocumType><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Document_Type,'          '),1,6)"/></ftp:DocumType>
        <ftp:UUID><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Vendor_Document_Number,'                              '),1,50)"/></ftp:UUID>
        <ftp:GroupID><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Group_ID,'           '),1,10)"/></ftp:GroupID>
        <ftp:VendorType><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Vendor_Type,'          '),1,6)"/></ftp:VendorType>
        <ftp:VendorID><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Vendor_ID,'           '),1,10)"/></ftp:VendorID>
        <ftp:VendorDocDate><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Vendor_Document_Date,'              '),1,14)"/></ftp:VendorDocDate>
        <ftp:OrderNumber><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Order_Number/com:ID, '000000000000')"/></ftp:OrderNumber>
        <ftp:Location><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Location/com:LocationId, '0000000000')"/></ftp:Location>
        <ftp:LocationType><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Location_Type/com:LocationId"/></ftp:LocationType>
        <ftp:Terms><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Terms,'               '),1,15)"/></ftp:Terms>
        <ftp:DueDate><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Due_Date,'              '),1,14)"/></ftp:DueDate>
        <ftp:Paymentmethod><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Payment_method,'      '),1,6)"/></ftp:Paymentmethod>
        <ftp:Currencycode><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Currency_code,'   '),1,3)"/></ftp:Currencycode>
        <ftp:Exchangerate><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Exchange_rate, '00000000000000000000')"/></ftp:Exchangerate>
        <ftp:Sign><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Sign_Indicator"/></ftp:Sign>
        <ftp:TotalCost><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Total_Cost, '00000000000000000000')"/></ftp:TotalCost>
        <ftp:Sing1><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Sign_Indicator1"/></ftp:Sing1>
        <ftp:TotalVATAmount><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Total_VAT_Amount, '00000000000000000000')"/></ftp:TotalVATAmount>
        <ftp:Sing2><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Sign_Indicator2"/></ftp:Sing2>
        <ftp:TotalQuantity><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Total_Quantity, '000000000000')"/></ftp:TotalQuantity>
        <ftp:Sing3><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Sign_Indicator3"/></ftp:Sing3>
        <ftp:TotalDiscount><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Total_Discount, '000000000000')"/></ftp:TotalDiscount>
        <ftp:FreightType><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Freight_Type,'      '),1,6)"/></ftp:FreightType>
        <ftp:PaidInd><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Paid_Ind"/></ftp:PaidInd>
        <ftp:MultiLocation><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Multi_Location"/></ftp:MultiLocation>
        <ftp:MerchandiseType><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Merchandise_Type"/></ftp:MerchandiseType>
        <ftp:DealId><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Deal_Id,'          '),1,10)"/></ftp:DealId>
        <ftp:DealDetailId><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Deal_Detail_Id,'          '),1,10)"/></ftp:DealDetailId>
        <ftp:RefCNRExtDocId><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Ref_CNR_Ext_Doc_Id,'                                                  '),1,50)"/></ftp:RefCNRExtDocId>
        <ftp:RefINVExtDocId><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Ref_INV_Ext_Doc_Id'                                                  '),1,50)"/></ftp:RefINVExtDocId>
        <ftp:DealAppInd><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Deal_Approval_Indicator"/></ftp:DealAppInd>
        <ftp:RTVind><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:RTV_indicator"/></ftp:RTVind>
        <ftp:CustDocRef1><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Reference1,'                                                                                          '),1,90)"/></ftp:CustDocRef1>
        <ftp:CustDocRef2><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Reference2,'                                                                                          '),1,90)"/></ftp:CustDocRef2>
        <ftp:CustDocRef3><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Reference3,'                                                                                          '),1,90)"/></ftp:CustDocRef3>
        <ftp:CustDocRef4><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Reference4,'                                                                                          '),1,90)"/></ftp:CustDocRef4>
        <ftp:CrossReference><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:HeadInvoice/ns0:Cross_reference_doc_numb,'          '),1,10)"/></ftp:CrossReference>
    </ftp:THEAD>
    <xsl:for-each select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:DetailInvoice">
    <ftp:TDETL>
        <ftp:LineId><xsl:value-of select="format-number(ns0:Line_id, '0000000000')"/></ftp:LineId>
        <ftp:TranNumber><xsl:value-of select="format-number(ns0:Transaction_number, '0000000000')"/></ftp:TranNumber>
        <ftp:UPC><xsl:value-of select="substring(concat(ns0:UPC,'                         '),1,25)"/></ftp:UPC>
        <ftp:UPCSupp><xsl:value-of select="substring(concat(ns0:UPC_Supplement,'     '),1,5)"/></ftp:UPCSupp>
        <ftp:Item><xsl:value-of select="substring(concat(ns0:Item,'                         '),1,25)"/></ftp:Item>
        <ftp:VPN><xsl:value-of select="substring(concat(ns0:VPN,'                              '),1,30)"/></ftp:VPN>
        <ftp:Sign><xsl:value-of select="ns0:Sign_Indicator"/></ftp:Sign>
        <ftp:DocQuantity><xsl:value-of select="format-number(ns0:Original_Doc_Quantity, '000000000000')"/></ftp:DocQuantity>
        <ftp:Sign1><xsl:value-of select="ns0:Sign_Indicator1"/></ftp:Sign1>
        <ftp:UnitCost><xsl:value-of select="format-number(ns0:Original_Unit_cost, '00000000000000000000')"/></ftp:UnitCost>
        <ftp:VATCode><xsl:value-of select="substring(concat(ns0:Original_VAT_Code/com:Identification/com:ID,'      '),1,6)"/></ftp:VATCode>
        <ftp:VATRate><xsl:value-of select="format-number(ns0:Original_VAT_rate, '00000000000000000000')"/></ftp:VATRate>
        <ftp:Sign2><xsl:value-of select="ns0:Sign_Indicator2"/></ftp:Sign2>
        <ftp:TotalAllowance><xsl:value-of select="format-number(ns0:Total_Allowance, '00000000000000000000')"/></ftp:TotalAllowance>
    </ftp:TDETL>
</xsl:for-each>
    <ftp:TVATS>
        <ftp:LineId><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:TVatsInvoice/ns0:Line_id, '0000000000')"/></ftp:LineId>
        <ftp:TransactionNum><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:TVatsInvoice/ns0:Transaction_number, '0000000000')"/></ftp:TransactionNum>
        <ftp:VATcode><xsl:value-of select="substring(concat(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:TVatsInvoice/ns0:VAT_code/com:Identification/com:ID,'      '),1,6)"/></ftp:VATcode>
        <ftp:VATrate><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:TVatsInvoice/ns0:VAT_rate, '00000000000000000000')"/></ftp:VATrate>
        <ftp:Sign><xsl:value-of select="/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:TVatsInvoice/ns0:Sign_Indicator"/></ftp:Sign>
        <ftp:CostVATCode><xsl:value-of select="format-number   (/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:TVatsInvoice/ns0:VAT_code/com:TotalTaxesTransferred, '00000000000000000000')"/></ftp:CostVATCode>
    </ftp:TVATS>
    <ftp:TTAIL>
        <ftp:LineId><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:CheckInvoice/ns0:TTLine_id2, '0000000000')"/></ftp:LineId>
        <ftp:TransactionNum><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:CheckInvoice/ns0:TTTransaction_number, '0000000000')"/></ftp:TransactionNum>
        <ftp:TransactionLines><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:CheckInvoice/ns0:TTTransaction_lines2, '000000')"/></ftp:TransactionLines>
    </ftp:TTAIL>
        <ftp:FTAIL>
        <ftp:LineId><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:CheckInvoice/ns0:FTLine_id, '0000000000')"/></ftp:LineId>
        <ftp:NumLines><xsl:value-of select="format-number(/ns0:CreateInvoiceEBM/ns0:dataArea/ns0:InvoiceEBO/ns0:CheckInvoice/ns0:FTTransaction_lines, '0000000000')"/></ftp:NumLines>
    </ftp:FTAIL>
</ftp:Root-Element>
   </xsl:template>
</xsl:stylesheet>