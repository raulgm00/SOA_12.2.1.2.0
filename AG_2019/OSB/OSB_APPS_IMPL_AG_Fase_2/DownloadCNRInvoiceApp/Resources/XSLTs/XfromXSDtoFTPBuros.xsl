<xsl:stylesheet version="1.0" exclude-result-prefixes=" xsd oracle-xsl-mapper xsi xsl ns0 UUIDUserFunction IsUserInGroupFunction oraext IsUserInRoleFunction xp20 DVMFunctions oraxsl RuntimeTypeConversionFunctions XrefFunctions BasicCredentialsUserFunction" xmlns:UUIDUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.UUIDUserFunction" xmlns:IsUserInGroupFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInGroupFunction" xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:IsUserInRoleFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.IsUserInRoleFunction" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:DVMFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.dvm.DVMFunctions" xmlns:oracle-xsl-mapper="http://www.oracle.com/xsl/mapper/schemas" xmlns:oraxsl="http://www.oracle.com/XSL/Transform/java" xmlns:RuntimeTypeConversionFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.RuntimeTypeConversionFunctions" xmlns:XrefFunctions="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.functions.xref.XrefFunctions" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cnr="http://www.agarcia.mx/EnterpriseObjects/CNRInvoice" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:BasicCredentialsUserFunction="http://www.oracle.com/XSL/Transform/java/com.bea.wli.sb.stages.functions.BasicCredentialsUserFunction" xmlns:nxsd="http://xmlns.oracle.com/pcbpel/nxsd">
   <oracle-xsl-mapper:schema>
      <!--SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY.-->
      <oracle-xsl-mapper:mapSources>
         <oracle-xsl-mapper:source type="XSD">
            <oracle-xsl-mapper:schema location="../../../MetaData/Components/EnterpriseObjectLibrary/EBO/CNRInvoice/CNRInvoiceEBM.xsd"/>
            <oracle-xsl-mapper:rootElement name="CreateCNRInvoiceEBM" namespace="http://www.agarcia.mx/EnterpriseObjects/CNRInvoice"/>
         </oracle-xsl-mapper:source>
      </oracle-xsl-mapper:mapSources>
      <oracle-xsl-mapper:mapTargets>
         <oracle-xsl-mapper:target type="XSD">
            <oracle-xsl-mapper:schema location="../../../MetaData/Components/EnterpriseObjectLibrary/EBO/CNRInvoice/XSDToLinesFtpBuros.xsd"/>
            <oracle-xsl-mapper:rootElement name="Root-Element" namespace="http://www.agarcia.mx/EnterpriseObjects/CNRInvoice"/>
         </oracle-xsl-mapper:target>
      </oracle-xsl-mapper:mapTargets>
      <!--GENERATED BY ORACLE XSL MAPPER 12.2.1.2.0(XSLT Build 161003.0739.0018) AT [THU SEP 17 16:18:13 CDT 2020].-->
   </oracle-xsl-mapper:schema>
   <!--User Editing allowed BELOW this line - DO NOT DELETE THIS LINE-->
   <xsl:template match="/">
      <cnr:Root-Element>
	<!--You have a CHOICE of the next 6 items at this level-->
	<cnr:FHEAD>
	<cnr:LineId><xsl:value-of select="/cnr:CreateCNRInvoiceEBM/cnr:dataArea/cnr:CNRInvoiceEBO/cnr:FHEAD/cnr:LineId"/></cnr:LineId>
	<cnr:FileTypeID><xsl:value-of select="/cnr:CreateCNRInvoiceEBM/cnr:dataArea/cnr:CNRInvoiceEBO/cnr:FHEAD/cnr:FileTypeID"/></cnr:FileTypeID>
	<cnr:FileCreateDate><xsl:value-of select="/cnr:CreateCNRInvoiceEBM/cnr:dataArea/cnr:CNRInvoiceEBO/cnr:FHEAD/cnr:FileCreateDate"/></cnr:FileCreateDate>
	</cnr:FHEAD>
        <xsl:for-each select="/cnr:CreateCNRInvoiceEBM/cnr:dataArea/cnr:CNRInvoiceEBO/cnr:THEAD">
          <cnr:THEAD>
          <cnr:LineId><xsl:value-of select="cnr:LineId"/></cnr:LineId>
          <cnr:TransactionID><xsl:value-of select="cnr:TransactionID"/></cnr:TransactionID>
          <cnr:DocType><xsl:value-of select="cnr:DocType"/></cnr:DocType>
          <cnr:VendorDocNum><xsl:value-of select="cnr:VendorDocNum"/></cnr:VendorDocNum>
          <cnr:InvoiceNum><xsl:value-of select="cnr:InvoiceNum"/></cnr:InvoiceNum>
          <cnr:VendorID><xsl:value-of select="cnr:VendorID"/></cnr:VendorID>
          <cnr:DocDate><xsl:value-of select="cnr:DocDate"/></cnr:DocDate>
          <cnr:OrderNum><xsl:value-of select="cnr:OrderNum"/></cnr:OrderNum>
          <cnr:Location><xsl:value-of select="cnr:Location"/></cnr:Location>
          <cnr:LocationType><xsl:value-of select="cnr:LocationType"/></cnr:LocationType>
          <cnr:Terms><xsl:value-of select="cnr:Terms"/></cnr:Terms>
          <cnr:DueDate><xsl:value-of select="cnr:DueDate"/></cnr:DueDate>
          <cnr:CurrencyCode><xsl:value-of select="cnr:CurrencyCode"/></cnr:CurrencyCode>
          <cnr:ExchangeRate><xsl:value-of select="cnr:ExchangeRate"/></cnr:ExchangeRate>
          <cnr:SignInd><xsl:value-of select="cnr:SignInd"/></cnr:SignInd>
          <cnr:TotalCost><xsl:value-of select="cnr:TotalCost"/></cnr:TotalCost>
          <cnr:SignInd2><xsl:value-of select="cnr:SignInd2"/></cnr:SignInd2>
          <cnr:TotalVATAmount><xsl:value-of select="cnr:TotalVATAmount"/></cnr:TotalVATAmount>
          <cnr:SignInd3><xsl:value-of select="cnr:SignInd3"/></cnr:SignInd3>
          <cnr:TotalQuantity><xsl:value-of select="cnr:TotalQuantity"/></cnr:TotalQuantity>
          <cnr:C22/>
          </cnr:THEAD>
          <xsl:variable name="banderaT" select="cnr:TransactionID"/>
          <xsl:for-each select="/cnr:CreateCNRInvoiceEBM/cnr:dataArea/cnr:CNRInvoiceEBO/cnr:TDETL">
          <xsl:if test="cnr:TransactionNum = $banderaT">
          <cnr:TDETL>
            <cnr:LineId><xsl:value-of select="cnr:LineId"/></cnr:LineId>
            <cnr:TransactionNum><xsl:value-of select="cnr:TransactionNum"/></cnr:TransactionNum>
            <cnr:Item><xsl:value-of select="cnr:Item"/></cnr:Item>
            <cnr:UPC><xsl:value-of select="cnr:UPC"/></cnr:UPC>
            <cnr:UpcSupp><xsl:value-of select="cnr:UpcSupp"/></cnr:UpcSupp>
            <cnr:VPN><xsl:value-of select="cnr:VPN"/></cnr:VPN>
            <cnr:Comments><xsl:value-of select="cnr:Comments"/></cnr:Comments>
            <cnr:ReasonCode><xsl:value-of select="cnr:ReasonCode"/></cnr:ReasonCode>
            <cnr:ReasonCodeDesc><xsl:value-of select="cnr:ReasonCodeDesc"/></cnr:ReasonCodeDesc>
            <cnr:SignInd><xsl:value-of select="cnr:SignInd"/></cnr:SignInd>
            <cnr:DiscrepantQuantity><xsl:value-of select="cnr:DiscrepantQuantity"/></cnr:DiscrepantQuantity>
            <cnr:SignInd2><xsl:value-of select="cnr:SignInd2"/></cnr:SignInd2>
            <cnr:DiscrepantCost><xsl:value-of select="cnr:DiscrepantCost"/></cnr:DiscrepantCost>
            <cnr:VATCode><xsl:value-of select="cnr:VATCode"/></cnr:VATCode>
            <cnr:VATRate><xsl:value-of select="cnr:VATRate"/></cnr:VATRate>
          </cnr:TDETL>
          </xsl:if>
          </xsl:for-each>
          
          <xsl:for-each select="/cnr:CreateCNRInvoiceEBM/cnr:dataArea/cnr:CNRInvoiceEBO/cnr:TVATS">
               <xsl:if test="cnr:TransactionID = $banderaT">
          <cnr:TVATS>
          <cnr:LineId><xsl:value-of select="cnr:LineId"/></cnr:LineId>
          <cnr:TransactionID><xsl:value-of select="cnr:TransactionID"/></cnr:TransactionID>
          <cnr:VATCode><xsl:value-of select="cnr:VATCode"/></cnr:VATCode>
          <cnr:VATRate><xsl:value-of select="cnr:VATRate"/></cnr:VATRate>
          <cnr:SignInd><xsl:value-of select="cnr:SignInd"/></cnr:SignInd>
          <cnr:VATCostBasis><xsl:value-of select="cnr:VATCostBasis"/></cnr:VATCostBasis>
          </cnr:TVATS>
          </xsl:if>
          </xsl:for-each>
          
                         <xsl:for-each select="/cnr:CreateCNRInvoiceEBM/cnr:dataArea/cnr:CNRInvoiceEBO/cnr:TTAIL">
                     <xsl:if test="cnr:TransactionNum = $banderaT">
          <cnr:TTAIL>
          <cnr:LineId><xsl:value-of select="cnr:LineId"/></cnr:LineId>
          <cnr:TransactionNum><xsl:value-of select="cnr:TransactionNum"/></cnr:TransactionNum>
          <cnr:TransactionLines><xsl:value-of select="cnr:TransactionLines"/></cnr:TransactionLines>
          </cnr:TTAIL>
          </xsl:if>
          </xsl:for-each>
        </xsl:for-each>
	<cnr:FTAIL>
	<cnr:LineId><xsl:value-of select="/cnr:CreateCNRInvoiceEBM/cnr:dataArea/cnr:CNRInvoiceEBO/cnr:FTAIL/cnr:LineId"/></cnr:LineId>
	<cnr:TransactionLine><xsl:value-of select="/cnr:CreateCNRInvoiceEBM/cnr:dataArea/cnr:CNRInvoiceEBO/cnr:FTAIL/cnr:TransactionLine"/></cnr:TransactionLine>
	</cnr:FTAIL>
        </cnr:Root-Element>
   </xsl:template>
</xsl:stylesheet>