package org.bcie.fenix.common.model.vo;

import java.sql.Timestamp;

import oracle.adf.share.logging.ADFLogger;

import oracle.jbo.Key;
import oracle.jbo.Row;
import oracle.jbo.ViewCriteria;
import oracle.jbo.server.ViewObjectImpl;

import org.bcie.fenix.common.model.vo.common.CondicionVO;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Wed Jan 20 17:56:42 CST 2016
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class CondicionVOImpl extends ViewObjectImpl implements CondicionVO {
    
    private static ADFLogger logger = null;
    
    /**
     * This is the default constructor (do not remove).
     */
    public CondicionVOImpl() {
        if (logger == null) {
            logger = ADFLogger.createADFLogger(this.getClass());
        }
    }
    
    public void modificarTcaEstadoTcc(Long idCondicion,Integer idTcaEstadoTcc){
        logger.log(ADFLogger.WARNING, "Inside modificarTcaEstadoTcc.");
        Row condicionRow = null;
        condicionRow = this.getRow(new Key(new Object[] {idCondicion}));
        if(condicionRow != null) {
            condicionRow.setAttribute("IdTcaEstadoTcc",idTcaEstadoTcc);
            getDBTransaction().commit();
        }
    }
    
    /**
     * Returns the variable value for idCondicion.
     * @return variable value for idCondicion
     */
    public Long getidCondicion() {
        return (Long) ensureVariableManager().getVariableValue("idCondicion");
    }

    /**
     * Sets <code>value</code> for variable idCondicion.
     * @param value value to bind as idCondicion
     */
    public void setidCondicion(Long value) {
        ensureVariableManager().setVariableValue("idCondicion", value);
    }
    
    public void actualizarFechaVigencia(Long idCondicion, Timestamp fechaVigencia) {
        logger.warning("Inside actualizarFechaVigencia.");
        logger.warning("idCondicion: " + idCondicion);
        logger.warning("fechaVigencia: " + fechaVigencia);
        
        Row condicionRow = null;        
        ViewCriteria criteria = null;
        
        try{      
            criteria = this.getViewCriteriaManager().getViewCriteria("CondicionVOCriteriaByIdCondicion");
            criteria.ensureVariableManager().setVariableValue("idCondicion", idCondicion);
            this.applyViewCriteria(criteria);
            this.executeQuery();
        
            if(getEstimatedRowCount() > 0) {
                setCurrentRow(first());
                condicionRow = getCurrentRow();
                
                condicionRow.setAttribute(CondicionVORowImpl.FECHAVIGENCIA, fechaVigencia);
                getDBTransaction().commit();
                
            } else {
                 logger.warning("El row recuperado es Null no hay coincidencias en la busqueda."); 
            }
        } catch (Exception e){
            logger.log(ADFLogger.WARNING, "Error al buscar por Id: " + e);     
        } finally {
            getViewCriteriaManager().removeApplyViewCriteriaName("CondicionVOCriteriaByIdCondicion");
            executeQuery();              
        }
    }
}

