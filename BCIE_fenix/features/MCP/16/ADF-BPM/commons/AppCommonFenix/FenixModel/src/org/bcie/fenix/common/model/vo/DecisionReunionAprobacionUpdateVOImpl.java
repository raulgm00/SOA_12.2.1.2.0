package org.bcie.fenix.common.model.vo;

import java.math.BigDecimal;

import java.sql.Timestamp;

import oracle.adf.share.logging.ADFLogger;

import oracle.jbo.Row;
import oracle.jbo.ViewCriteria;
import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewObjectImpl;

import org.bcie.fenix.common.model.vo.common.DecisionReunionAprobacionUpdateVO;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Tue Dec 05 18:46:03 CST 2017
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class DecisionReunionAprobacionUpdateVOImpl extends ViewObjectImpl implements DecisionReunionAprobacionUpdateVO {
    
    private static ADFLogger logger = null;
    
    /**
     * This is the default constructor (do not remove).
     */
    public DecisionReunionAprobacionUpdateVOImpl() {
        if (logger == null) {
            logger = ADFLogger.createADFLogger(this.getClass());
        }
    }
    
    public Boolean actualizarDecisionReunion(Number idSolicitudAprob,
                                                            Number idTipoAccion,
                                                            String numActa,
                                                            String numAcuerdo,
                                                            String acuerdo,
                                                            String userName){
        
        logger.log(ADFLogger.WARNING, "Into actualizarDecisionReunion.");
        
        logger.log(ADFLogger.WARNING, "idSolicitudAprob : "+idSolicitudAprob);
        logger.log(ADFLogger.WARNING, "idTipoAccion : "+idTipoAccion);
        logger.log(ADFLogger.WARNING, "numActa : "+numActa);
        logger.log(ADFLogger.WARNING, "numAcuerdo : "+numAcuerdo);
        logger.warning("acuerdo : "+acuerdo);
        logger.warning("userName : "+userName);
        
        DecisionReunionAprobacionUpdateVORowImpl row = null;
        Row decisionRow = null;        
        ViewCriteria criteria = null;
        Boolean resultado = null;       
        
        if(idSolicitudAprob != null &&
           idTipoAccion != null &&
           userName != null){
            
                try{      
                    criteria =this.getViewCriteriaManager().getViewCriteria("DecisionReunionAprobacionUpdateVC");
                    criteria.ensureVariableManager().setVariableValue("pIdSolicitud", idSolicitudAprob);
                    this.applyViewCriteria(criteria);
                    this.executeQuery();
                
                    if(getEstimatedRowCount() > 0) {               
                        setCurrentRow(first());
                        decisionRow = getCurrentRow();
                        
                        decisionRow.setAttribute("IdTcaAccionASeguir",idTipoAccion);
                        decisionRow.setAttribute("NumeroAcuerdo",numAcuerdo);
                        decisionRow.setAttribute("Acuerdo",acuerdo);
                        
                        //TO DO 
                        getDBTransaction().commit();
                        //retorna true
                        resultado = Boolean.TRUE;
                        
                        logger.warning("Actualziar registro de Decision. Id Decision" + decisionRow.getAttribute("Id") +
                                    "Id Solicitud: " + idSolicitudAprob +
                                    " Id Accion a Seguir: " + idTipoAccion +
                                    " Numero Acuerdo: " + numAcuerdo + 
                                    " Numero Acta: " + numActa +
                                    " Usuario: " + userName);
                        
                    } else {
                         logger.warning("El row recuperado es Null no hay coincidencias en la busqueda"); 
                    }
                }catch(Exception e){
                    logger.log(ADFLogger.WARNING, "*** Error al BuscarPorId  ->" + e);     
                }finally{
                    getViewCriteriaManager().removeApplyViewCriteriaName("DecisionReunionAprobacionUpdateVC");
                    executeQuery();              
                }
           }
        
        return resultado;
        
    }

    /**
     * Returns the variable value for pIdSolicitud.
     * @return variable value for pIdSolicitud
     */
    public Number getpIdSolicitud() {
        return (Number) ensureVariableManager().getVariableValue("pIdSolicitud");
    }

    /**
     * Sets <code>value</code> for variable pIdSolicitud.
     * @param value value to bind as pIdSolicitud
     */
    public void setpIdSolicitud(Number value) {
        ensureVariableManager().setVariableValue("pIdSolicitud", value);
    }
    
    
}

