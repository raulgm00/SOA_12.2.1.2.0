xquery version "1.0" encoding "utf-8";

(:: OracleAnnotationVersion "1.0" ::)

declare namespace des="http://www.bcie.org/DesembolsoMO";
(:: import schema at "oramds:/apps/Resources/ComponentesComunes/DominioDesembolso/Desembolso/V1/Schema/DesembolsoMO.xsd" ::)

declare namespace com = "http://www.bcie.org/CommonBO";

declare namespace des1 = "http://www.bcie.org/DesembolsoBO";

declare namespace cat = "http://www.bcie.org/CatalogoBO";

declare namespace cli = "http://www.bcie.org/ClienteBO";

declare namespace lin = "http://www.bcie.org/LineaCreditoBO";

declare namespace ope = "http://www.bcie.org/OperacionBO";

declare namespace com1 = "http://www.bcie.org/ComisionBO";

declare namespace atr = "http://www.bcie.org/AtributoBO";

declare namespace mat = "http://www.bcie.org/MatrizTCCBO";

declare namespace pro = "http://www.bcie.org/ProductoBO";

declare namespace her = "http://www.bcie.org/HerramientaCEBO";

declare variable $outConsultarDesembolsoById.response as element() (:: schema-element(des:ConsultarDesembolsosByIdResponse) ::) external;
declare variable $outConsultarInformacionDesembolso.response as element() (:: schema-element(des:ConsultarInformacionReglasByIdResponse) ::) external;

declare function local:funcXq_asignarparametros($outConsultarDesembolsoById.response as element() (:: schema-element(des:ConsultarDesembolsosByIdResponse) ::), 
                                                $outConsultarInformacionDesembolso.response as element() (:: schema-element(des:ConsultarInformacionReglasByIdResponse) ::)) 
                                                as element() (:: schema-element(des:CrearTransferenciaFLEXCUBERequest) ::) {
    <des:CrearTransferenciaFLEXCUBERequest>
        <des:ContratoDesembolso>
            <des1:idDesembolso>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:idDesembolso)}</des1:idDesembolso>
            {
                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:idFacturador)
                then <des1:idFacturador>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:idFacturador)}</des1:idFacturador>
                else ()
            }
            {
                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:producto)
                then 
                    <des1:producto>
                        <pro:idProducto>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:producto/pro:idProducto)}</pro:idProducto>
                        <pro:descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:producto/pro:descripcion)}</pro:descripcion>
                        <pro:descripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:producto/pro:descripcionCorta)}</pro:descripcionCorta>
                        <pro:fechaRegistro>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:producto/pro:fechaRegistro)}</pro:fechaRegistro>
                        <pro:codExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:producto/pro:codExterno)}</pro:codExterno>
                        {
                            for $Componente in $outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:producto/des1:Componente
                            return 
                            <des1:Componente>
                                {
                                    if ($Componente/cat:Id)
                                    then <cat:Id>{fn:data($Componente/cat:Id)}</cat:Id>
                                    else ()
                                }
                                {
                                    if ($Componente/cat:Descripcion)
                                    then <cat:Descripcion>{fn:data($Componente/cat:Descripcion)}</cat:Descripcion>
                                    else ()
                                }
                                {
                                    if ($Componente/cat:DescripcionCorta)
                                    then <cat:DescripcionCorta>{fn:data($Componente/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                    else ()
                                }
                                {
                                    if ($Componente/cat:estatus)
                                    then <cat:estatus>{fn:data($Componente/cat:estatus)}</cat:estatus>
                                    else ()
                                }
                                {
                                    if ($Componente/cat:codigoExterno)
                                    then <cat:codigoExterno>{fn:data($Componente/cat:codigoExterno)}</cat:codigoExterno>
                                    else ()
                                }
                                <des1:TipoComponente>
                                    {
                                        if ($Componente/des1:TipoComponente/cat:Id)
                                        then <cat:Id>{fn:data($Componente/des1:TipoComponente/cat:Id)}</cat:Id>
                                        else ()
                                    }
                                    {
                                        if ($Componente/des1:TipoComponente/cat:Descripcion)
                                        then <cat:Descripcion>{fn:data($Componente/des1:TipoComponente/cat:Descripcion)}</cat:Descripcion>
                                        else ()
                                    }
                                    {
                                        if ($Componente/des1:TipoComponente/cat:DescripcionCorta)
                                        then <cat:DescripcionCorta>{fn:data($Componente/des1:TipoComponente/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                        else ()
                                    }
                                    {
                                        if ($Componente/des1:TipoComponente/cat:estatus)
                                        then <cat:estatus>{fn:data($Componente/des1:TipoComponente/cat:estatus)}</cat:estatus>
                                        else ()
                                    }
                                    {
                                        if ($Componente/des1:TipoComponente/cat:codigoExterno)
                                        then <cat:codigoExterno>{fn:data($Componente/des1:TipoComponente/cat:codigoExterno)}</cat:codigoExterno>
                                        else ()
                                    }
                                </des1:TipoComponente>
                                <des1:TipoTasa>
                                    {
                                        if ($Componente/des1:TipoTasa/cat:Id)
                                        then <cat:Id>{fn:data($Componente/des1:TipoTasa/cat:Id)}</cat:Id>
                                        else ()
                                    }
                                    {
                                        if ($Componente/des1:TipoTasa/cat:Descripcion)
                                        then <cat:Descripcion>{fn:data($Componente/des1:TipoTasa/cat:Descripcion)}</cat:Descripcion>
                                        else ()
                                    }
                                    {
                                        if ($Componente/des1:TipoTasa/cat:DescripcionCorta)
                                        then <cat:DescripcionCorta>{fn:data($Componente/des1:TipoTasa/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                        else ()
                                    }
                                    {
                                        if ($Componente/des1:TipoTasa/cat:estatus)
                                        then <cat:estatus>{fn:data($Componente/des1:TipoTasa/cat:estatus)}</cat:estatus>
                                        else ()
                                    }
                                    {
                                        if ($Componente/des1:TipoTasa/cat:codigoExterno)
                                        then <cat:codigoExterno>{fn:data($Componente/des1:TipoTasa/cat:codigoExterno)}</cat:codigoExterno>
                                        else ()
                                    }
                                </des1:TipoTasa>
                                <des1:esPrincipal>{fn:data($Componente/des1:esPrincipal)}</des1:esPrincipal>
                                {
                                    if ($Componente/des1:Plazo)
                                    then 
                                        <des1:Plazo>
                                            <com:Tipo>
                                                {
                                                    if ($Componente/des1:Plazo/com:Tipo/cat:Id)
                                                    then <cat:Id>{fn:data($Componente/des1:Plazo/com:Tipo/cat:Id)}</cat:Id>
                                                    else ()
                                                }
                                                {
                                                    if ($Componente/des1:Plazo/com:Tipo/cat:Descripcion)
                                                    then <cat:Descripcion>{fn:data($Componente/des1:Plazo/com:Tipo/cat:Descripcion)}</cat:Descripcion>
                                                    else ()
                                                }
                                                {
                                                    if ($Componente/des1:Plazo/com:Tipo/cat:DescripcionCorta)
                                                    then <cat:DescripcionCorta>{fn:data($Componente/des1:Plazo/com:Tipo/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                                    else ()
                                                }
                                                {
                                                    if ($Componente/des1:Plazo/com:Tipo/cat:estatus)
                                                    then <cat:estatus>{fn:data($Componente/des1:Plazo/com:Tipo/cat:estatus)}</cat:estatus>
                                                    else ()
                                                }
                                                {
                                                    if ($Componente/des1:Plazo/com:Tipo/cat:codigoExterno)
                                                    then <cat:codigoExterno>{fn:data($Componente/des1:Plazo/com:Tipo/cat:codigoExterno)}</cat:codigoExterno>
                                                    else ()
                                                }
                                            </com:Tipo>
                                            <com:Valor>{fn:data($Componente/des1:Plazo/com:Valor)}</com:Valor>
                                        </des1:Plazo>
                                    else ()
                                }
                            </des1:Componente>
                        }
                    </des1:producto>
                else ()
            }
            <des1:referencia></des1:referencia>
            {
                for $monto in $outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:monto
                return 
                <des1:monto>
                    <com:tipo>
                        {
                            if ($monto/com:tipo/cat:Id)
                            then <cat:Id>{fn:data($monto/com:tipo/cat:Id)}</cat:Id>
                            else ()
                        }
                        {
                            if ($monto/com:tipo/cat:Descripcion)
                            then <cat:Descripcion>{fn:data($monto/com:tipo/cat:Descripcion)}</cat:Descripcion>
                            else ()
                        }
                        {
                            if ($monto/com:tipo/cat:DescripcionCorta)
                            then <cat:DescripcionCorta>{fn:data($monto/com:tipo/cat:DescripcionCorta)}</cat:DescripcionCorta>
                            else ()
                        }
                        {
                            if ($monto/com:tipo/cat:estatus)
                            then <cat:estatus>{fn:data($monto/com:tipo/cat:estatus)}</cat:estatus>
                            else ()
                        }
                        {
                            if ($monto/com:tipo/cat:codigoExterno)
                            then <cat:codigoExterno>{fn:data($monto/com:tipo/cat:codigoExterno)}</cat:codigoExterno>
                            else ()
                        }
                    </com:tipo>
                    {
                        if ($monto/com:importe)
                        then <com:importe>{fn:data($monto/com:importe)}</com:importe>
                        else ()
                    }
                    {
                        if ($monto/com:moneda)
                        then 
                            <com:moneda>
                                {
                                    if ($monto/com:moneda/cat:Id)
                                    then <cat:Id>{fn:data($monto/com:moneda/cat:Id)}</cat:Id>
                                    else ()
                                }
                                {
                                    if ($monto/com:moneda/cat:Descripcion)
                                    then <cat:Descripcion>{fn:data($monto/com:moneda/cat:Descripcion)}</cat:Descripcion>
                                    else ()
                                }
                                {
                                    if ($monto/com:moneda/cat:DescripcionCorta)
                                    then <cat:DescripcionCorta>{fn:data($monto/com:moneda/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                    else ()
                                }
                                {
                                    if ($monto/com:moneda/cat:estatus)
                                    then <cat:estatus>{fn:data($monto/com:moneda/cat:estatus)}</cat:estatus>
                                    else ()
                                }
                                {
                                    if ($monto/com:moneda/cat:codigoExterno)
                                    then <cat:codigoExterno>{fn:data($monto/com:moneda/cat:codigoExterno)}</cat:codigoExterno>
                                    else ()
                                }
                            </com:moneda>
                        else ()
                    }
                </des1:monto>
            }
            <des1:estado>
                <cat:Id></cat:Id>
                <cat:Descripcion></cat:Descripcion>
                <cat:DescripcionCorta></cat:DescripcionCorta>
                <cat:estatus></cat:estatus>
                <cat:codigoExterno></cat:codigoExterno>
            </des1:estado>
            <des1:programado></des1:programado>
            <des1:fechaEstimadaDesembolsar></des1:fechaEstimadaDesembolsar>
            <des1:fechaEfectiva></des1:fechaEfectiva>
            <des1:fechaAsignacion></des1:fechaAsignacion>
            <des1:fechaRegistro></des1:fechaRegistro>
            <des1:fechaVencimiento></des1:fechaVencimiento>
            <des1:estatus></des1:estatus>
            <des1:condicionesFinancieras>
                <des1:fondo>
                    {
                        if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:condicionesFinancieras/des1:fondo/cat:Id)
                        then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:condicionesFinancieras/des1:fondo/cat:Id)}</cat:Id>
                        else ()
                    }
                    <cat:Descripcion></cat:Descripcion>
                    <cat:DescripcionCorta></cat:DescripcionCorta>
                    <cat:estatus></cat:estatus>
                    <cat:codigoExterno></cat:codigoExterno>
                    <des1:Validador>
                        <cat:Id></cat:Id>
                        <cat:Descripcion></cat:Descripcion>
                        <cat:DescripcionCorta></cat:DescripcionCorta>
                        <cat:estatus></cat:estatus>
                        <cat:codigoExterno></cat:codigoExterno>
                    </des1:Validador>
                </des1:fondo>
            </des1:condicionesFinancieras>
            <des1:idLinea></des1:idLinea>
            <des1:recursosExternos></des1:recursosExternos>
            {
                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:cuentaCliente)
                then <des1:cuentaCliente>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:cuentaCliente)}</des1:cuentaCliente>
                else ()
            }
            <des1:usuario></des1:usuario>
            {
                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:fechaDisponibilidadFondos)
                then <des1:fechaDisponibilidadFondos>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:fechaDisponibilidadFondos)}</des1:fechaDisponibilidadFondos>
                else ()
            }
            <des1:origenTransferenciaCte></des1:origenTransferenciaCte>
            {
                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa)
                then 
                    <des1:Programa>
                        <her:LineaFinanciera>
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:Id)
                                then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:Id)}</cat:Id>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:Descripcion)
                                then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:Descripcion)}</cat:Descripcion>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:DescripcionCorta)
                                then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:estatus)
                                then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:estatus)}</cat:estatus>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:codigoExterno)
                                then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:LineaFinanciera/cat:codigoExterno)}</cat:codigoExterno>
                                else ()
                            }
                        </her:LineaFinanciera>
                        <her:DestinoFinanciamiento>
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:Id)
                                then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:Id)}</cat:Id>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:Descripcion)
                                then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:Descripcion)}</cat:Descripcion>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:DescripcionCorta)
                                then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:estatus)
                                then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:estatus)}</cat:estatus>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:codigoExterno)
                                then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:DestinoFinanciamiento/cat:codigoExterno)}</cat:codigoExterno>
                                else ()
                            }
                        </her:DestinoFinanciamiento>
                        <her:ModalidadFinanciamiento>
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:Id)
                                then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:Id)}</cat:Id>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:Descripcion)
                                then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:Descripcion)}</cat:Descripcion>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:DescripcionCorta)
                                then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:estatus)
                                then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:estatus)}</cat:estatus>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:codigoExterno)
                                then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ModalidadFinanciamiento/cat:codigoExterno)}</cat:codigoExterno>
                                else ()
                            }
                        </her:ModalidadFinanciamiento>
                        <her:HerramientaCE>
                            <her:ActividadEconomica>
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:Id)
                                    then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:Id)}</cat:Id>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:Descripcion)
                                    then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:Descripcion)}</cat:Descripcion>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:DescripcionCorta)
                                    then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:estatus)
                                    then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:estatus)}</cat:estatus>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:codigoExterno)
                                    then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:ActividadEconomica/cat:codigoExterno)}</cat:codigoExterno>
                                    else ()
                                }
                            </her:ActividadEconomica>
                            <her:EjeEstrategico>
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:Id)
                                    then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:Id)}</cat:Id>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:Descripcion)
                                    then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:Descripcion)}</cat:Descripcion>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:DescripcionCorta)
                                    then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:estatus)
                                    then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:estatus)}</cat:estatus>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:codigoExterno)
                                    then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:EjeEstrategico/cat:codigoExterno)}</cat:codigoExterno>
                                    else ()
                                }
                            </her:EjeEstrategico>
                            <her:AreaFocalizacion>
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:Id)
                                    then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:Id)}</cat:Id>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:Descripcion)
                                    then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:Descripcion)}</cat:Descripcion>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:DescripcionCorta)
                                    then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:estatus)
                                    then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:estatus)}</cat:estatus>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:codigoExterno)
                                    then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:HerramientaCE/her:AreaFocalizacion/cat:codigoExterno)}</cat:codigoExterno>
                                    else ()
                                }
                            </her:AreaFocalizacion>
                        </her:HerramientaCE>
                        <her:ClasificacionGeneral>
                            <her:SectorMercado>
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:Id)
                                    then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:Id)}</cat:Id>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:Descripcion)
                                    then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:Descripcion)}</cat:Descripcion>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:DescripcionCorta)
                                    then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:estatus)
                                    then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:estatus)}</cat:estatus>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:codigoExterno)
                                    then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorMercado/cat:codigoExterno)}</cat:codigoExterno>
                                    else ()
                                }
                            </her:SectorMercado>
                            <her:SectorInstitucional>
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:Id)
                                    then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:Id)}</cat:Id>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:Descripcion)
                                    then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:Descripcion)}</cat:Descripcion>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:DescripcionCorta)
                                    then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:estatus)
                                    then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:estatus)}</cat:estatus>
                                    else ()
                                }
                                {
                                    if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:codigoExterno)
                                    then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:Programa/her:ClasificacionGeneral/her:SectorInstitucional/cat:codigoExterno)}</cat:codigoExterno>
                                    else ()
                                }
                            </her:SectorInstitucional>
                        </her:ClasificacionGeneral>
                    </des1:Programa>
                else ()
            }
            <des1:Transferencia>
                <des1:idTransferencia></des1:idTransferencia>
                <des1:idDesembolso></des1:idDesembolso>
                <des1:idFacturador></des1:idFacturador>
                <des1:Monto>
                    <com:tipo>
                        <cat:Id></cat:Id>
                        <cat:Descripcion></cat:Descripcion>
                        <cat:DescripcionCorta></cat:DescripcionCorta>
                        <cat:estatus></cat:estatus>
                        <cat:codigoExterno></cat:codigoExterno>
                    </com:tipo>
                    <com:importe></com:importe>
                    <com:moneda>
                        <cat:Id></cat:Id>
                        <cat:Descripcion></cat:Descripcion>
                        <cat:DescripcionCorta></cat:DescripcionCorta>
                        <cat:estatus></cat:estatus>
                        <cat:codigoExterno></cat:codigoExterno>
                    </com:moneda>
                </des1:Monto>
                <des1:FormaTransferencia>
                    <cat:Id></cat:Id>
                    <cat:Descripcion></cat:Descripcion>
                    <cat:DescripcionCorta></cat:DescripcionCorta>
                    <cat:estatus></cat:estatus>
                    <cat:codigoExterno></cat:codigoExterno>
                </des1:FormaTransferencia>
                <des1:referenciaMensaje></des1:referenciaMensaje>
                <des1:esConsolidada></des1:esConsolidada>
                <des1:esConsolidacionPadre></des1:esConsolidacionPadre>
                <des1:idConsolidacionPadre></des1:idConsolidacionPadre>
                <des1:bhqTransferencia></des1:bhqTransferencia>
                <des1:NumeroReserva></des1:NumeroReserva>
                <des1:idBancoTransferencia></des1:idBancoTransferencia>
                <des1:numeroCuenta></des1:numeroCuenta>
                <des1:nombreCuenta></des1:nombreCuenta>
                <des1:nombreBanco></des1:nombreBanco>
                <des1:idOperacion></des1:idOperacion>
                <des1:tipoMensaje></des1:tipoMensaje>
                <des1:estado></des1:estado>
                <des1:fechaRegistro></des1:fechaRegistro>
                <des1:Beneficiario>
                    <des1:tipoOpcion></des1:tipoOpcion>
                    <des1:numeroCta></des1:numeroCta>
                    <des1:identificador></des1:identificador>
                    <des1:beneficiario></des1:beneficiario>
                    <des1:direccion></des1:direccion>
                </des1:Beneficiario>
                <des1:Banco>
                    <des1:tipoOpcion></des1:tipoOpcion>
                    <des1:numeroCta></des1:numeroCta>
                    <des1:identificador></des1:identificador>
                    <des1:beneficiario></des1:beneficiario>
                    <des1:direccion></des1:direccion>
                </des1:Banco>
                <des1:Intermediario>
                    <des1:tipoOpcion></des1:tipoOpcion>
                    <des1:numeroCta></des1:numeroCta>
                    <des1:identificador></des1:identificador>
                    <des1:beneficiario></des1:beneficiario>
                    <des1:direccion></des1:direccion>
                </des1:Intermediario>
            </des1:Transferencia>
            {
                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE)
                then 
                    <des1:HerramientaCE>
                        <her:ActividadEconomica>
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:Id)
                                then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:Id)}</cat:Id>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:Descripcion)
                                then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:Descripcion)}</cat:Descripcion>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:DescripcionCorta)
                                then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:estatus)
                                then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:estatus)}</cat:estatus>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:codigoExterno)
                                then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:ActividadEconomica/cat:codigoExterno)}</cat:codigoExterno>
                                else ()
                            }
                        </her:ActividadEconomica>
                        <her:EjeEstrategico>
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:Id)
                                then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:Id)}</cat:Id>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:Descripcion)
                                then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:Descripcion)}</cat:Descripcion>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:DescripcionCorta)
                                then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:estatus)
                                then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:estatus)}</cat:estatus>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:codigoExterno)
                                then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:EjeEstrategico/cat:codigoExterno)}</cat:codigoExterno>
                                else ()
                            }
                        </her:EjeEstrategico>
                        <her:AreaFocalizacion>
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:Id)
                                then <cat:Id>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:Id)}</cat:Id>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:Descripcion)
                                then <cat:Descripcion>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:Descripcion)}</cat:Descripcion>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:DescripcionCorta)
                                then <cat:DescripcionCorta>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:DescripcionCorta)}</cat:DescripcionCorta>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:estatus)
                                then <cat:estatus>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:estatus)}</cat:estatus>
                                else ()
                            }
                            {
                                if ($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:codigoExterno)
                                then <cat:codigoExterno>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:HerramientaCE/her:AreaFocalizacion/cat:codigoExterno)}</cat:codigoExterno>
                                else ()
                            }
                        </her:AreaFocalizacion>
                    </des1:HerramientaCE>
                else ()
            }
        </des:ContratoDesembolso>
       <des:Parametros>
            <com:name>NUMERO_LINEA</com:name>
            <com:value>{fn:data($outConsultarInformacionDesembolso.response/des:LineaCredito/lin:NumeroLineaCredito)}</com:value>
        </des:Parametros>
        <des:Parametros>
            <com:name>TIPO_RECURSO</com:name>
            <com:value>ND</com:value>
        </des:Parametros>
        <des:Parametros>
            <com:name>PAIS</com:name>
            <com:value>{fn:data($outConsultarInformacionDesembolso.response/des:Cliente/cli:pais/cat:codigoExterno)}</com:value>
        </des:Parametros>
        <des:Parametros>
            <com:name>SECTOR</com:name>
            <com:value>{fn:data($outConsultarInformacionDesembolso.response/des:Cliente/cli:sector/cat:codigoExterno)}</com:value>
        </des:Parametros>
        <des:Parametros>
          <com:name>EJECUTIVO</com:name>
            <com:value>{fn:data($outConsultarDesembolsoById.response/des:ContratoDesembolso/des1:usuario)}</com:value>
        </des:Parametros>
        <des:Parametros>
          <com:name>OBJETIVO_ESTRATEGICO</com:name>
            <com:value>{fn:data($outConsultarInformacionDesembolso.response/des:Operacion/ope:objetivosEstrategicos)}</com:value>
        </des:Parametros>
    </des:CrearTransferenciaFLEXCUBERequest>
};

local:funcXq_asignarparametros($outConsultarDesembolsoById.response, $outConsultarInformacionDesembolso.response)
