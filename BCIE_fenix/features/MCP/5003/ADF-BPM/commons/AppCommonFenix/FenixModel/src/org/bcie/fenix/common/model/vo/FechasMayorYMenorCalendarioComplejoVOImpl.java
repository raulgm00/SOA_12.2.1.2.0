package org.bcie.fenix.common.model.vo;

import java.sql.Timestamp;

import oracle.adf.share.logging.ADFLogger;

import oracle.jbo.server.ViewObjectImpl;

import org.bcie.fenix.common.model.am.FenixAMImpl;
import org.bcie.fenix.common.model.am.FenixGestorDesembolsosAMImpl;
import org.bcie.fenix.common.model.vo.common.FechasMayorYMenorCalendarioComplejoVO;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Fri Apr 28 14:20:35 CDT 2017
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class FechasMayorYMenorCalendarioComplejoVOImpl extends ViewObjectImpl implements FechasMayorYMenorCalendarioComplejoVO {
    
    private static ADFLogger logger = null;
    
    public FechasMayorYMenorCalendarioComplejoVOImpl() {        
        if (logger == null) {
            logger = ADFLogger.createADFLogger(this.getClass());
        }        
    }
    
    
    public Boolean recuperarFechasMayoMenorCalendarioComplejo(Long idCondicionFinanciera){
      logger.warning("*Inf, Inicia metodo recuperarFechasMayoMenorCalendarioComplejo idCondicionFinanciera: "+idCondicionFinanciera);
      Boolean respuesta = Boolean.FALSE;
      Timestamp fechaMayorPago = null;
      Timestamp fechaMenorPago = null;
      FenixAMImpl fenixAMImpl = null;
      
      
      if(idCondicionFinanciera == null){
        logger.warning("*Error, el parametro idCondicionFinanciera es resuelto a null"); 
        return respuesta;
      }
                
        setpIdConsicionFinanciera(idCondicionFinanciera);
        executeQuery();
        
        if(getEstimatedRowCount() > 0){
            setCurrentRow(first());
            
            try{                
                fechaMenorPago = (Timestamp)getCurrentRow().getAttribute("FechaMenorPago");
                fechaMayorPago = (Timestamp)getCurrentRow().getAttribute("FechaMayorPago");
            }catch(Exception e){
                logger.warning("*Error, ha ocurrido un error al castear las fechas ->", e);
            }
                        
            logger.warning("*Inf, fechas asociadas a la condicion financiera :");             
            logger.warning("*Inf, fechas menor :"+fechaMenorPago); 
            logger.warning("*Inf, fechas mayor :"+fechaMayorPago);
            
            if(fechaMayorPago == null || fechaMenorPago == null){
                logger.warning("*Inf, Error la fecha menor y mayor de pago son requeridas");
                return respuesta;
            }else{ 
                try{
                  fenixAMImpl = (FenixAMImpl) this.getRootApplicationModule();
                  FenixGestorDesembolsosAMImpl gestorDesembolsoAMImpl =
                      (FenixGestorDesembolsosAMImpl) fenixAMImpl.getFenixGestorDesembolsosAM();            
                       respuesta = gestorDesembolsoAMImpl.getCondicionesFinancieras()
                                   .asignarFechasPrimerPagoYVencimientoTimeStamp(fechaMenorPago, fechaMayorPago);
                }catch(Exception e){
                    logger.warning("*Error, ->", e);
                }
           
            }
                        
                        
        }else{
            logger.warning("*Inf, Important! no se encontraron fechas en calendario complejo " +
                                                       "asociadas a la condicion financiera"); 
        }
        
                
      logger.warning("*Inf, Termina metodo recuperarFechasMayoMenorCalendarioComplejo");
    return respuesta;
    }
    


    /**
     * Returns the bind variable value for pIdConsicionFinanciera.
     * @return bind variable value for pIdConsicionFinanciera
     */
    public Long getpIdConsicionFinanciera() {
        return (Long) getNamedWhereClauseParam("pIdConsicionFinanciera");
    }

    /**
     * Sets <code>value</code> for bind variable pIdConsicionFinanciera.
     * @param value value to bind as pIdConsicionFinanciera
     */
    public void setpIdConsicionFinanciera(Long value) {
        setNamedWhereClauseParam("pIdConsicionFinanciera", value);
    }
}

