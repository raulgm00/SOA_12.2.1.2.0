package org.bcie.fenix.common.model.vo;

import oracle.adf.share.logging.ADFLogger;

import oracle.jbo.Row;
import oracle.jbo.ViewCriteria;
import oracle.jbo.server.ViewObjectImpl;

import org.bcie.fenix.common.model.vo.common.DatosActividadVO;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Wed Oct 05 12:38:18 CDT 2016
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class DatosActividadVOImpl extends ViewObjectImpl implements DatosActividadVO {
    private static ADFLogger logger = null;
    /**
     * This is the default constructor (do not remove).
     */
    public DatosActividadVOImpl() {
        if (logger == null) {
            logger = ADFLogger.createADFLogger(this.getClass());
        }
    }

    /**
     * Returns the bind variable value for varPrograma.
     * @return bind variable value for varPrograma
     */
    public String getvarPrograma() {
        return (String) getNamedWhereClauseParam("varPrograma");
    }

    /**
     * Sets <code>value</code> for bind variable varPrograma.
     * @param value value to bind as varPrograma
     */
    public void setvarPrograma(String value) {
        if(null!=value){
                setNamedWhereClauseParam("varPrograma", value);
            }
       }

    /**
     * Returns the bind variable value for varActividadF1.
     * @return bind variable value for varActividadF1
     */
    public Integer getvarActividadF1() {
        return (Integer) getNamedWhereClauseParam("varActividadF1");
    }

    /**
     * Sets <code>value</code> for bind variable varActividadF1.
     * @param value value to bind as varActividadF1
     */
    public void setvarActividadF1(Integer value) {
        if(null!=value){
                setNamedWhereClauseParam("varActividadF1", value);
            }
    }


    /**
     * Returns the variable value for varActividad.
     * @return variable value for varActividad
     */
    public Integer getvarActividad() {
        return (Integer) ensureVariableManager().getVariableValue("varActividad");
    }

    /**
     * Sets <code>value</code> for variable varActividad.
     * @param value value to bind as varActividad
     */
    public void setvarActividad(Integer value) {
        ensureVariableManager().setVariableValue("varActividad", value);
    }

    /**
     * Returns the variable value for varIniciativa.
     * @return variable value for varIniciativa
     */
    public Integer getvarIniciativa() {
        return (Integer) ensureVariableManager().getVariableValue("varIniciativa");
    }

    /**
     * Sets <code>value</code> for variable varIniciativa.
     * @param value value to bind as varIniciativa
     */
    public void setvarIniciativa(Integer value) {
        ensureVariableManager().setVariableValue("varIniciativa", value);
    }
    
    public Integer obtenActividadIniciativar(String codigoPrograma, Integer actividadF1,
                                             Integer valor, Integer opcion){
        setvarActividadF1(actividadF1);
        setvarPrograma(codigoPrograma);
        this.executeQuery();
        Integer resultado=null;
        logger.warning("codigoPrograma: " + codigoPrograma);
        logger.warning("actividadF1: " + actividadF1);

        
        if(null!=valor){
                ViewCriteria criteriaByClienteInstanciaProceso = null;
                if(codigoPrograma != null && null!=actividadF1) {

                       criteriaByClienteInstanciaProceso=this.getViewCriteriaManager().getViewCriteria("DatosActividadVOCriteria");
                       Integer valorIniciativa=1;
                       if(opcion.compareTo(valorIniciativa)==0){
                        criteriaByClienteInstanciaProceso.ensureVariableManager().setVariableValue("varIniciativa", valor);
                        }
                       else{
                               criteriaByClienteInstanciaProceso.ensureVariableManager().setVariableValue("varActividad", valor);
                           }
                        
                        this.applyViewCriteria(criteriaByClienteInstanciaProceso);
                        this.executeQuery();
                        
                        // 2) Asignamos valor de retorno
                        if(this.getEstimatedRowCount() > 0) {

                                    Row datosHerramienta = this.getRowAtRangeIndex(0);
                          
                            if(opcion.compareTo(valorIniciativa)==0){
                                 resultado=(Integer) datosHerramienta.getAttribute("Id");
                                 }
                            else{
                                    resultado=(Integer) datosHerramienta.getAttribute("IdIniciativa");
                                }
                                                    
                        }
                            // Removemos criteria del VO
                            this.getViewCriteriaManager().removeApplyViewCriteriaName("DatosActividadVOCriteria");

                        } 
            }
        else{
                logger.warning("Error al obtener el dato intente mas tarde");
            }
            logger.warning("actividad o iniciativa obtenida: " + resultado);
        return resultado;
        }
}

