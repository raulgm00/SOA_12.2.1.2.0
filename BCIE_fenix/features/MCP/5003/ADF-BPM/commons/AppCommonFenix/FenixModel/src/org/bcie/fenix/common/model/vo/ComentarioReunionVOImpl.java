package org.bcie.fenix.common.model.vo;

import java.sql.Timestamp;

import java.util.List;

import java.util.Map;

import oracle.adf.share.logging.ADFLogger;

import oracle.jbo.Row;
import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewObjectImpl;

// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Tue Nov 24 13:55:06 CST 2015
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class ComentarioReunionVOImpl extends ViewObjectImpl {
    
    /**
     * Log de la aplicacion
     */
    public static final ADFLogger LOGGER = ADFLogger.createADFLogger(ComentarioReunionVOImpl.class);
    
    /**
     * This is the default constructor (do not remove).
     */
    public ComentarioReunionVOImpl() {
    }
    
    public void consultarComentariosPorIdSolicitud(List<Long> listaId){
        
        if(listaId == null){
            return;
        }
        
        try{
            String concatIdSolicitud = "";
            if(listaId.size() > 0){
                for(Long idSolicitud : listaId){
                    if("".equals(concatIdSolicitud)){
                        concatIdSolicitud = idSolicitud.toString();
                    }else{
                        concatIdSolicitud = concatIdSolicitud + 
                                            "," + 
                                            idSolicitud.toString();
                    }
                }    
            }
            
            //concatIdSolicitud = concatIdSolicitud.substring(0, concatIdSolicitud.length()-1);
            
            if(!"".equals(concatIdSolicitud)){
                String whereClause="ID_USUARIO_REUNION IN (" + concatIdSolicitud + ") AND ID_VOTO_APROBACION IS NULL";
                setWhereClause(whereClause);
                executeQuery();
                setCurrentRow(first());
            }
        }catch(Exception e){
            LOGGER.severe("Error al ejecutar consulta por Id's de usuario reunion", e);
        }        
    }

    public Row asignarDatosComentarios(Map<String,Object> mapAtributosComentarios, Row createRow){
        try{            
            Number id = (Number) mapAtributosComentarios.get("ID");
            Number idUsuarioReunion = (Number) mapAtributosComentarios.get("IdUsuarioReunion");
            Number idVotoAprobacion = (Number) mapAtributosComentarios.get("IdVotoAprobacion");
            Timestamp fechaRegistro = (Timestamp) mapAtributosComentarios.get("FechaRegistro");
            String comentario = mapAtributosComentarios.get("Comentario").toString();
            String nombreUsuario = mapAtributosComentarios.get("NombreUsuario").toString();
            Boolean esComentarioVoto = (Boolean) mapAtributosComentarios.get("EsComentarioVoto");
            
            createRow.setAttribute("Id", id);
            createRow.setAttribute("IdUsuarioReunion", idUsuarioReunion);
            createRow.setAttribute("FechaHora", fechaRegistro);
            createRow.setAttribute("Comentario", comentario);
            createRow.setAttribute("NombreUsuario", nombreUsuario); 
            if(!esComentarioVoto){
                createRow.setAttribute("IdVotoAprobacion", null);
            }else{
                createRow.setAttribute("IdVotoAprobacion", idVotoAprobacion);
            }
        }catch(Exception e){
            e.printStackTrace();
        }        
        return createRow;
    }

    /**
     * Returns the variable value for idUsuario.
     * @return variable value for idUsuario
     */
    public Number getidUsuario() {
        return (Number) ensureVariableManager().getVariableValue("idUsuario");
    }

    /**
     * Sets <code>value</code> for variable idUsuario.
     * @param value value to bind as idUsuario
     */
    public void setidUsuario(Number value) {
        ensureVariableManager().setVariableValue("idUsuario", value);
    }

    /**
     * Returns the variable value for idVoto.
     * @return variable value for idVoto
     */
    public Number getidVoto() {
        return (Number) ensureVariableManager().getVariableValue("idVoto");
    }

    /**
     * Sets <code>value</code> for variable idVoto.
     * @param value value to bind as idVoto
     */
    public void setidVoto(Number value) {
        ensureVariableManager().setVariableValue("idVoto", value);
    }
}

