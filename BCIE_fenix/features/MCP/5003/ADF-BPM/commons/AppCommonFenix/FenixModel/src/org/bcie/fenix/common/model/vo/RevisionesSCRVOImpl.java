package org.bcie.fenix.common.model.vo;

import java.sql.Timestamp;

import oracle.adf.share.logging.ADFLogger;

import oracle.jbo.Row;
import oracle.jbo.server.ViewObjectImpl;

import org.bcie.fenix.common.model.vo.common.RevisionesSCRVO;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Wed Jul 20 18:29:58 CDT 2016
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class RevisionesSCRVOImpl extends ViewObjectImpl implements RevisionesSCRVO {
    /**
     * This is the default constructor (do not remove).
     */
    public RevisionesSCRVOImpl() {
    }
    
    private static ADFLogger logger = ADFLogger.createADFLogger(MoraVOImpl.class);
    
    /**
     * Returns the bind variable value for varIdCliente.
     * @return bind variable value for varIdCliente
     */
    public Long getvarIdCliente() {
        return (Long) getNamedWhereClauseParam("varIdCliente");
    }

    /**
     * Sets <code>value</code> for bind variable varIdCliente.
     * @param value value to bind as varIdCliente
     */
    public void setvarIdCliente(Long value) {
        if(null!= value){
                setNamedWhereClauseParam("varIdCliente", value);
                }
    }


    /**
     * Returns the bind variable value for varFecha.
     * @return bind variable value for varFecha
     */
    public Timestamp getvarFecha() {
        return (Timestamp) getNamedWhereClauseParam("varFecha");
    }

    /**
     * Sets <code>value</code> for bind variable varFecha.
     * @param value value to bind as varFecha
     */
    public void setvarFecha(Timestamp value) {
        setNamedWhereClauseParam("varFecha", value);
    }
    
    public Long obtenerRegistro(Long idCliente){
            Long idSeguimiento = null;
            java.sql.Timestamp fecha=new java.sql.Timestamp(System.currentTimeMillis());

        if(null!=idCliente){
                Integer anio=fecha.getYear()-1;
                fecha.setDate(1);
                fecha.setMonth(0);
                fecha.setHours(0);
                fecha.setMinutes(0);
                fecha.setSeconds(0);
                fecha.setNanos(0);
                fecha.setYear(anio);
                logger.warning("fecha :" + fecha); 
                setvarFecha(fecha);
                 setvarIdCliente(idCliente);
                 executeQuery();
                this.getAllRowsInRange();
                Row seguimientoUltimo=null;
                if(this.getEstimatedRowCount()>0){
                seguimientoUltimo=this.getRowAtRangeIndex(0);        
                        if(null!= seguimientoUltimo){
                            idSeguimiento =(Long)seguimientoUltimo.getAttribute("Id");
                            logger.warning("idSeguimiento"+ idSeguimiento);
                            }
                    }
            }

                return idSeguimiento;
        }
    
    public java.sql.Timestamp obtenerFecha(){
            Long idSeguimiento = null;
            java.sql.Timestamp fechaRegistrada=null;
            this.getAllRowsInRange();
            Row seguimientoUltimo=null;
            if(this.getEstimatedRowCount()>0){
            seguimientoUltimo=this.getRowAtRangeIndex(0);        
                    if(null!= seguimientoUltimo){
                        fechaRegistrada=(java.sql.Timestamp)seguimientoUltimo.getAttribute("FechaRegistro"); 
                        idSeguimiento =(Long)seguimientoUltimo.getAttribute("Id");
                        logger.warning("idSeguimiento"+ idSeguimiento);
                            logger.warning("fechaRegistrada"+ fechaRegistrada);
                        }
                }
                return fechaRegistrada;
        }
}

