package org.bcie.fenix.common.model.vo;

import java.util.ArrayList;
import java.util.List;

import oracle.adf.share.logging.ADFLogger;

import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewObjectImpl;
import oracle.jbo.Row;

import org.bcie.fenix.common.model.am.FenixAMImpl;
import org.bcie.fenix.common.model.vo.common.ConsultarContrapartesTerminoVO;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Thu Mar 03 19:17:01 CST 2016
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class ConsultarContrapartesTerminoVOImpl extends ViewObjectImpl implements ConsultarContrapartesTerminoVO {
    
    public static final ADFLogger LOGGER = ADFLogger.createADFLogger(ConsultarContrapartesTerminoVOImpl.class);
    /**
     * This is the default constructor (do not remove).
     */
    public ConsultarContrapartesTerminoVOImpl() {
    }
    
    private List<Long> listaIdContraParteEliminada = new ArrayList<>();

    /**
     * Returns the bind variable value for idTerminoContrapartes.
     * @return bind variable value for idTerminoContrapartes
     */
    public Number getidTerminoContrapartes() {
        return (Number) getNamedWhereClauseParam("idTerminoContrapartes");
    }

    /**
     * Sets <code>value</code> for bind variable idTerminoContrapartes.
     * @param value value to bind as idTerminoContrapartes
     */
    public void setidTerminoContrapartes(Number value) {
        Long IdContraparte = null;
        String NombreContraparte = null;
        FenixAMImpl fenixAM = null;
        Row[] contrapartesAsoiadasEliminadas = null;
        fenixAM = (FenixAMImpl)this.getRootApplicationModule();
        contrapartesAsoiadasEliminadas = fenixAM.getContrapartesTerminoVO().recuperarContrapartesAsociadasEliminadas();
        for(Row row : contrapartesAsoiadasEliminadas){
            listaIdContraParteEliminada.add((Long)row.getAttribute("IdContraparte"));
        }
        fenixAM.getContrapartesTerminoVO().limpiarContrapartesAsociadas();
        setNamedWhereClauseParam("idTerminoContrapartes", value);
        this.executeQuery();
        this.setRangeSize(-1);
        for(Row row:this.getAllRowsInRange()){
            IdContraparte = (Long)row.getAttribute("IdCliente");
            NombreContraparte = (String)row.getAttribute("RazonSocial");
            fenixAM.getContrapartesTerminoVO().insertarContrapartesAsociadas(IdContraparte, NombreContraparte);
        }
        
        fenixAM.getContrapartesTerminoVO().eliminarContrapartesAsociadasEliminadas(listaIdContraParteEliminada);
    }
    //Al cancelar y hacer rollback de datos tambein eliminar la lista para los registros eliminados programaticamente
    public void retablecerListaIdContraparteEliminada(){
        listaIdContraParteEliminada = new ArrayList<>();
    }
}

