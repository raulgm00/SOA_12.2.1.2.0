var common = function() {
        var o;
        return o = {
            elModal: null,
            initialize: function() {
                var o = this;
                o.elModal = $("#notificacion")
            },
            setMessage: function(o) {
                var i = this;
                i.elModal.find("#messageModal").html(o)
            },
            triggerModal: function(o) {
                var i = this;
                i.elModal.modal(o)
            },
            isReadOperation: function(o) {
                var i = {};
                return o === !0 ? (i.faClass = "fa-check", i.colorClass = "list-group-item blue-read") : (i.faClass = "fa-file-text-o", i.colorClass = "list-group-item"), i
            },
            replaceAll: function(o, i, t) {
                try {
                    return o.replace(new RegExp(i, "gi"), t)
                } catch (e) {
                    return o
                }
            }
        }, {
            init: function() {
                o.initialize()
            },
            message: function(i) {
                o.setMessage(i)
            },
            modal: function(i) {
                o.triggerModal(i)
            },
            getClass: function(i) {
                return o.isReadOperation(i)
            }
        }
    }(),
    validator = function() {
        var o;
        return o = {
            initialize: function(o) {
                return $(o).validate({
                    highlight: function(o) {
                        var i = "#" + $(o).attr("id") + "1";
                        $(o).closest(".input-group").addClass("has-error"), $(i).removeClass("glyphicon-ok").addClass("glyphicon-remove")
                    },
                    unhighlight: function(o) {
                        var i = "#" + $(o).attr("id") + "1";
                        $(o).closest(".input-group").removeClass("has-error"), $(i).removeClass("glyphicon-remove").addClass("glyphicon-ok")
                    },
                    errorElement: "span",
                    errorClass: "help-block",
                    errorPlacement: function(o, i) {
                        i.parent(".input-group").length ? o.insertAfter(i.parent()) : o.insertAfter(i)
                    }
                })
            }
        }, {
            init: function(i) {
                return o.initialize(i)
            }
        }
    }(validator),
    endPoint = function() {
        var o = window.location.hostname,
            i = window.location.port,
            t = window.location.protocol,
            e = {
                login: {
                    get: t + "//" + o + ":" + i + "/Canal/AutenticarUsuario/V1.0/GetAutenticarUsuario"
                },
                voto: {
                    put: t + "//" + o + ":" + i + "/Canal/CrearRegistroVotacion/V1.0/PutCrearRegistroVotacion",
                    post: t + "//" + o + ":" + i + "/Canal/CrearRegistroVotacion/V1.0/PostCrearRegistroVotacion",
                    get: t + "//" + o + ":" + i + "/Canal/ConsultarVotaciones/V1.0/GetConsultarVotaciones"
                },
                operacion: {
                    getDetalleOperacion: t + "//" + o + ":" + i + "/Canal/ConsultarOperacion/V1.0/GetConsultarOperacion",
                    getVotosEmitidos: t + "//" + o + ":" + i + "/Canal/ConsultarVotosEmitidos/V1.0/GetConsultarVotosEmitidos",
                    putRegistraComentario: t + "//" + o + ":" + i + "/Canal/CrearComentarioVotacion/V1.0/PutCrearComentarioVotacion"
                },
                documento: {
                    getDocumento: t + "//" + o + ":" + i + "/Canal/ObtenerDocumento/V1.0/GetDocumento"
                }
            };
        return {
            point: function() {
                return e
            }
        }
    }(endPoint),
    storage = function() {
        var o, i;
        return i = {
            items: [],
            isActive: !1
        }, o = {
            getCID: function() {
                return Math.ceil((new Date).getTime() * Math.random(20), 2)
            },
            setItem: function(o, t) {
                var e = this;
                0 !== o.length || void 0 !== o ? "object" == typeof o && e.getItem(t) !== t && (i.items.push({
                    cid: e.getCID(),
                    object: o,
                    type: t
                }), i.isActive = !0) : console.log("Error el tipo de objeto no es soportado")
            },
            getItem: function(o) {
                var t;
                return $.each(i.items, function(e) {
                    i.items[e].type === o && (t = i.items[e])
                }), t ? t : !1
            },
            resetItems: function() {
                i.items.splice(0, i.items.length)
            },
            getActive: function() {
                return i.isActive
            },
            setLocalStorage: function(o, i) {
                localStorage.setItem(o, i)
            },
            getLocalStorage: function(o) {
                return localStorage.getItem(o)
            },
            clearLocalStorage: function() {
                return localStorage.clear()
            }
        }, {
            set: function(i, t) {
                o.setItem(i, t)
            },
            get: function(i) {
                return o.getItem(i)
            },
            reset: function() {
                o.resetItems()
            },
            isActive: function() {
                return o.getActive()
            },
            setLocal: function(i, t) {
                o.setLocalStorage(i, t)
            },
            getLocal: function(i) {
                return o.getLocalStorage(i)
            },
            clearStorage: function() {
                o.clearLocalStorage()
            }
        }
    }(storage);
$(document).ajaxStart(function() {
    $("#loader").modal("show")
}), $(document).ajaxStop(function() {
    $("#loader").modal("hide"), $("body").removeAttr("style")
});
var operacionExternaController = function() {
    var o;
    return o = {
        initialize: function() {
            var o = this;
            o.getOperacion(), o.getVotosEmitidos(), o.event()
        },
        event: function() {
            var o = this,
                i = $("#emiteComentario");
            i.on({
                click: function() {
                    $("#comentario").val() ? (o.registraComentario(), $("#votosEmitidos").empty(), $("#containerComentarios").empty()) : ($("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message("Es requerido el comentario para su registro."), common.modal("show"))
                }
            })
        },
        getOperacion: function() {
            var o = this;
            $.ajax({
                url: endPoint.point().operacion.getOperacion,
                type: "get",
                headers: {
                    Accept: "application/json; charset=utf-8",
                    "Content-Type": "text/plain; charset=utf-8"
                },
                data: {
                    idVotacion: JSON.parse(storage.getLocal("operacion-" + storage.getLocal("id"))).id,
                    nivelAprobacion: JSON.parse(storage.getLocal("operacion-" + storage.getLocal("id"))).aprobacion,
                    idUsuario: JSON.parse(storage.getLocal("operacion-" + storage.getLocal("id"))).idUsuario
                },
                cache: !1
            }).done(function(i, t, e) {
                null !== i && void 0 !== i ? o.render(i) : ($("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message("No existen datos en la operaci&oacute; consultada."), common.modal("show"))
            }).fail(function(o, i, t) {
                console.log(o), console.log(i), console.log(t), $("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message("Se ha detectado un problema en el servicio, favor de intentar nuevamente."), common.modal("show")
            })
        },
        render: function(o) {
            var i = this;
            $("#idOperacion").text(" " + o.detalleOperacion.idOperacion), $("#descripcionOperacion").text(o.detalleOperacion.nombreOperacion), $("#nombreCliente").text(o.detalleOperacion.nombreCliente), $("#productoOperacion").text(o.detalleOperacion.producto), $("#pais").text(o.detalleOperacion.pais), $("#sector").text(o.detalleOperacion.sector), i.renderTipoDesicion(o.detalleOperacion.listadoCatalogos), o.detalleOperacion.listadoDocumentos && (o.detalleOperacion.listadoDocumentos.length > 0 || null !== o.detalleOperacion.listadoDocumentos ? 
            $.each(o.detalleOperacion.listadoDocumentos, function(i) {
                     
                    
                     var idDocumentoDiv = (o.detalleOperacion.listadoDocumentos[i].esJustificacion)
                                        ? Math.floor((Math.random() * 100) + 1) : o.detalleOperacion.listadoDocumentos[i].idAdjunto;
                     
                     var en_onbase = (o.detalleOperacion.listadoDocumentos[i].idDocumento == null) ? 'false' : 'true';

                    $("#documentosOperacion").append('<div id="d-'+idDocumentoDiv+'" data-nombre_doc="'+o.detalleOperacion.listadoDocumentos[i].nombreDocumento+'"  data-tipo_doc="' + o.detalleOperacion.listadoDocumentos[i].mimeType + '" data-en_onbase="'+en_onbase+'" class="list-group-item"><div class="row-action-primary"><i class="material-icons"><span class="fa fa-file-pdf-o"></span></i></div><div class="row-content"><p class="list-group-item-text">' + o.detalleOperacion.listadoDocumentos[i].nombreDocumento + '.<br><span style="color: #969393;font-size: smaller;"> Fecha Documento: ' + moment(o.detalleOperacion.listadoDocumentos[i].fechaDocumento).format("DD/MMM/YYYY") + '</span></p></div></div><div class="list-group-separator"></div>'), 
                    
                    $("#d-" + idDocumentoDiv).on({
                        click: function() {                         

                            if(o.detalleOperacion.listadoDocumentos[i].esJustificacion){
                                console.log("ok es justificacion");
                                $("#notificacion").find(".modal-title").html("Notificaci&oacute;n"),common.message("No existe un documento por la siguiente justificaci&oacute;n: <br/><br/>"+o.detalleOperacion.listadoDocumentos[i].comentario), common.modal("show")
                                
                            }else{
                                
                                var nom_doc = $(this).attr('data-nombre_doc');
                                var mime_type = $(this).attr('data-tipo_doc');
                                var extencion_doc;
                                
                                    if(mime_type != null){
                                        switch(mime_type){
                                            case 'application/msword':
                                                 extencion_doc = 'doc';
                                            break;
                                            case 'application/pdf':
                                                extencion_doc = 'pdf';
                                            break;
                                            case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
                                                extencion_doc = 'docx';
                                            break;
                                            default:
                                            alert('El tipo de documento no es aceptado');
                                        }

                                    }else{
                                        alert('no se puede leer el tipo del documento');
                                    }

                          if ( (navigator.appName.match(/explorer/gi) || navigator.userAgent.match(/trident/gi) ) && en_onbase == 'true') {
                                var e = "detailPDF",
                                    a = "dependent=yes,locationbar=no,scrollbars=yes,menubar=yes, resizable,screenX=50,screenY=50,width=850,height=1050";
                                window.open("http://az-ecm-app-prod/AppNet/docpop/docpop.aspx?docid=" + o.detalleOperacion.listadoDocumentos[i].idDocumento, e, a)
                            }else{

                                    $.ajax({
                                        url: endPoint.point().documento.getDocumento,
                                        type: "get",
                                        headers: {
                                            Accept: "application/json; charset=utf-8",
                                            "Content-Type": "text/plain; charset=utf-8"
                                        },
                                        data: {
                                            idExterno: jsEncode.encode(o.detalleOperacion.listadoDocumentos[i].idAdjunto)
                                        },
                                        cache: !1
                                    }).done(function(e, a, t) {
                                        //console.log('e: ',e);
                                        //console.log('nom_doc: ',nom_doc);
                                        //console.log('t: ',t);
                                       if (navigator.appName.match(/explorer/gi) || navigator.userAgent.match(/trident/gi)) {
                                             //console.log("Se ha detectado IE para la descarga del Documento "+o.detalleOperacion.listadoDocumentos[i].nombreDocumento);
                                                var data = e.codigo;
                                                var byteCharacters = atob(data);
                                                var byteNumbers = new Array(byteCharacters.length);
                                                 
                                                 for (var a = 0; a < byteCharacters.length; a++) {
                                                    byteNumbers[a] = byteCharacters.charCodeAt(a);
                                                 }

                                                var byteArray = new Uint8Array(byteNumbers);
                                                var blob = new Blob([byteArray], {type: mime_type});
                                                window.navigator.msSaveOrOpenBlob(blob, nom_doc+'.'+extencion_doc);                                    
                                            
                                        }else{
                                            
                                            //console.log('nombre documento',o.detalleOperacion.listadoDocumentos[i].nombreDocumento);
                                            //var nombreDoc = o.detalleOperacion.listadoDocumentos[i].nombreDocumento;
                                            var data64 = e.codigo;
                                            var binaryString = window.atob(data64);
                                            var binaryLen = binaryString.length;
                                            var bytes = new Uint8Array(binaryLen);
                                            for (var i = 0; i < binaryLen; i++) {
                                                var ascii = binaryString.charCodeAt(i);
                                                bytes[i] = ascii;
                                            }
                                            //--
                                            var arrBuffer = bytes;
                                            var newBlob = new Blob([arrBuffer], { type: "application/pdf" });
                                            var data = window.URL.createObjectURL(newBlob);
                                            /*var link = document.createElement('a');
                                            document.body.appendChild(link); //required in FF, optional for Chrome
                                            link.href = data;
                                            link.download = 'Documento.pdf';
                                            link.click();
                                            window.URL.revokeObjectURL(data);
                                            link.remove(); */
                                            ($("#downloadFilePDF").attr("href",data).attr("download", nom_doc + "."+extencion_doc), $("#modalDocumento").modal("show"))
                                        }
                                    }).fail(function(o, i, e) {
                                        console.log(o), console.log(i), console.log(e), $("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message("Se ha detectado un problema en el servicio, favor de intentar nuevamente."), common.modal("show")
                                    })
                             }

                            } 
                        }
                    })
                }) : console.log("No existen documentos asociados en la operacion"))
        },
        getVotosEmitidos: function() {
            var o = this;
            $.ajax({
                url: endPoint.point().operacion.getVotosEmitidos,
                type: "get",
                headers: {
                    Accept: "application/json; charset=utf-8",
                    "Content-Type": "text/plain; charset=utf-8"
                },
                data: {
                    idSolicitudAprobacion: JSON.parse(storage.getLocal("operacion-" + storage.getLocal("id"))).id
                },
                cache: !1
            }).done(function(i, t, e) {
                null !== i && void 0 !== i ? o.renderComentarios(i) : ($("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message("No existen datos en la operaci&oacute; consultada."), common.modal("show"))
            }).fail(function(o, i, t) {
                console.log(o), console.log(i), console.log(t), $("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message("Se ha detectado un problema en el servicio, favor de intentar nuevamente."), common.modal("show")
            })
        },
        renderComentarios: function(o) {
            var i = [];
            null !== o.detalleVotosEmitidos ? ($("#resumenVotaciones").empty(), o.detalleVotosEmitidos.listaAcumuladoVotos && $.each(o.detalleVotosEmitidos.listaAcumuladoVotos, function(i) {
                $("#resumenVotaciones").append("<tr><td>" + o.detalleVotosEmitidos.listaAcumuladoVotos[i].descripcionDecision + "</td><td><span>" + o.detalleVotosEmitidos.listaAcumuladoVotos[i].CantidadVotos + "</span></td></tr>")
            }), o.detalleVotosEmitidos.listaComentariosVotacion ? $.each(o.detalleVotosEmitidos.listaComentariosVotacion, function(i) {
                var t = null;
                1 === o.detalleVotosEmitidos.listaComentariosVotacion[i].idTipoDecision || 2 === o.detalleVotosEmitidos.listaComentariosVotacion[i].idTipoDecision || 4 === o.detalleVotosEmitidos.listaComentariosVotacion[i].idTipoDecision ? (t = "green", faClass = "fa-check") : (t = "red-primary", faClass = "fa-times");
                var e = null === o.detalleVotosEmitidos.listaComentariosVotacion[i].comentarioVotacion ? "" : o.detalleVotosEmitidos.listaComentariosVotacion[i].comentarioVotacion;
                $("#votosEmitidos").append('<div class="list-group-item ' + t + '"><div class="row-action-primary"><i class="material-icons"><span class="fa ' + faClass + '"></span></i></div><div class="row-content"><div class="least-content">' + moment(o.detalleVotosEmitidos.listaComentariosVotacion[i].fechaHora).format("DD/MMM/YYYY") + '</div><h4 class="list-group-item-heading">' + o.detalleVotosEmitidos.listaComentariosVotacion[i].descripcion + '</h4><p class="list-group-item-text">' + o.detalleVotosEmitidos.listaComentariosVotacion[i].nombreUsuario + " <br> " + e + '</p></div></div><div class="list-group-separator"></div>')
            }) : i.push("No existen decisiones"), o.detalleVotosEmitidos.listaComentarios ? $.each(o.detalleVotosEmitidos.listaComentarios, function(i) {
                $("#containerComentarios").append('<div class="col-sm-12 col-md-12"><div class="panel panel-default"><div class="panel-heading"><div class="row"><div class="col-xs-2"><strong>' + o.detalleVotosEmitidos.listaComentarios[i].nombreUsuario + '</strong></div><div class="col-sm-4 col-xs-offset-2 col-md-offset-6 text-right"><span class="text-muted fa fa-calendar"> ' + moment(o.detalleVotosEmitidos.listaComentarios[i].fechaHora).format("DD/MMM/YYYY") + '</span></div></div></div><div class="panel-body">' + o.detalleVotosEmitidos.listaComentarios[i].comentario + "</div></div></div>")
            }) : i.length > 1 ? i.push(" comentarios ") : i.push("No existen comentarios "), i.length > 1 ? ($("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message(i.join(" y ") + " asociados a esta operaci&oacute;n."), common.modal("show")) : 1 === i.length && ($("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message(i.join("") + " asociados a esta operaci&oacute;n."), common.modal("show"))) : ($("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message(o.Result.message), common.modal("show"))
        },
        renderTipoDesicion: function(o) {
            o && ($.each(o, function(i) {
                0 === i ? $("#catalogoDesicion").append('<div class="radio radio-primary"><label><input type="radio" name="tipoDesicion" id="tipoDesicion' + i + '" value=" ' + o[i].Id + ' " checked  required>' + o[i].Descripcion + "</label></div>") : $("#catalogoDesicion").append('<div class="radio radio-primary"><label><input type="radio" name="tipoDesicion" id="tipoDesicion' + i + '" value=" ' + o[i].Id + ' " required>' + o[i].Descripcion + "</label></div>")
            }), $.material.init(), $("input[type='radio']").parent().each(function(o) {
                $(this).on("click", function() {
                    $(this).find("input[type='radio']").is(":checked") && 2 === parseInt($(this).find("input[type='radio']").val()) ? $("#observacionDesicion").attr("required", !0) : ($("#observacionDesicion").removeAttr("required").removeAttr("aria-required").removeAttr("aria-describedby").removeAttr("aria-invalid"), $("#observacionDesicion-error").remove())
                })
            }))
        },
        registraComentario: function() {
            var o = this,
                i = '{"idUsuario" : ' + JSON.parse(storage.getLocal("operacion-" + storage.getLocal("id"))).idUsuario + ', "nombreUsuario":"' + JSON.parse(storage.getLocal("login")).nombreCompleto + '", "comentarios":"' + $("#comentario").val() + '"}';
            $.ajax({
                url: endPoint.point().operacion.putRegistraComentario,
                type: "put",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: i
            }).done(function(i, t, e) {
                i && "OK" == i.Resultado.result ? ($("#notificacion").find(".modal-title").text("Registro Exitoso"), $("#notificacion").find(".modal-body span").text(i.Resultado.message), $("#notificacion").modal("show"), $("#notificacion").on("hidden.bs.modal", function() {
                    $("#comentario").val(null)
                }), o.getVotosEmitidos()) : ($("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), $("#notificacion").find(".modal-body span").text(i.Resultado.message), $("#notificacion").modal("show"), $("#notificacion").on("hidden.bs.modal", function() {
                    $("#comentario").val(null)
                }))
            }).fail(function(o, i, t) {
                console.log(o), console.log(i), console.log(t), $("#notificacion").find("#.modal-title").html("Notificaci&oacute;n"), common.message("Se ha detectado un problema en el servicio, favor de intentar nuevamente."), common.modal("show")
            })
        }
    }, {
        init: function() {
            o.initialize()
        },
        getVotosEmitidos: function() {
            $("#votosEmitidos").empty(), $("#containerComentarios").empty(), o.getVotosEmitidos()
        }
    }
}(operacionExternaController);
$(document).ready(function() {
    common.init(), operacionExternaController.init()
});
var votacionExternaController = function() {
    var o;
    return o = {
        el: null,
        initialize: function(o, i, t) {
            var e = this;
            o ? e.el = $(o) : null, i ? e.process(i, t) : !1
        },
        process: function(o, i) {
            var t = this;
            switch (o) {
                case "add":
                    validator.init(t.el), t.votarEvents();
                    break;
                case "get":
                    t.getVotaciones(i)
            }
        },
        getDesicion: function() {
            var o = null,
                i = this;
            return i.el.find("input[type='radio']").each(function(i) {
                $(this).is(":checked") && (o = $(this).val())
            }), o
        },
        getObservacion: function() {
            return $("#observacionDesicion").val()
        },
        votarEvents: function() {
            var o = this,
                i = $("#invocaVotacion"),
                t = $("#cancelarVoto"),
                e = $("#emitirVoto");
            t.on({
                click: function() {
                    $("#slideVoto").removeClass("fadeInLeftBig animated").addClass("hide")
                }
            }), i.on({
                click: function() {
                    $("#slideVoto").removeClass("hide").addClass("fadeInLeftBig animated")
                }
            }), e.on({
                click: function() {
                    o.el.valid() && o.registra()
                }
            })
        },
        registra: function() {
            var o = this,
                i = '{"registroVotacion" : { "idTipoDecision" : ' + parseInt(o.getDesicion()) + ',"idUsuario" : ' + JSON.parse(storage.getLocal("operacion-" + storage.getLocal("id"))).idUsuario + ', "loginUsuario" : "' + JSON.parse(storage.getLocal("login")).usuario + '","comentario" : "' + o.getObservacion() + '","nombreUsuario":"' + JSON.parse(storage.getLocal("login")).nombreCompleto + '"}}';
            $.ajax({
                url: endPoint.point().voto.put,
                type: "put",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: i
            }).done(function(o, i, t) {
                o && "OK" == o.Resultado.result ? (operacionExternaController.getVotosEmitidos(), $("#slideVoto").removeClass("fadeInLeftBig animated").addClass("hide"), $("#modalVoto").find("#titleHeader").text("Registro Exitoso"), $("#modalVoto").modal("show"), $("#modalVoto").on("hidden.bs.modal", function() {
                    $("#observacionDesicion").val(null)
                })) : ($("#modalVoto").find("#titleHeader").text("Registro no exitoso"), $("#modalVoto").find(".modal-body").text(o.Resultado.message), $("#modalVoto").modal("show"), $("#modalVoto").on("hidden.bs.modal", function() {
                    $("#observacionDesicion").val(null)
                }))
            }).fail(function(o, i, t) {
                console.log(o), console.log(i), console.log(t), $("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message("Se ha detectado un problema en el servicio, favor de internar nuevamente."), common.modal("show")
            })
        },
        getVotaciones: function(o) {
            var i = this;
            $.ajax({
                url: endPoint.point().voto.get,
                type: "get",
                headers: {
                    Accept: "application/json; charset=utf-8",
                    "Content-Type": "text/plain; charset=utf-8"
                },
                data: {
                    Usuario: JSON.parse(storage.getLocal("login")).usuario
                },
                cache: !1
            }).done(function(t, e, a) {
                null !== t.Votaciones ? i.renderVotacion(t, o) : ($(".desktop-item-virtual, .desktop-item-presencial, .mobile-item-virtual, .mobile-item-presencial").addClass("hide"), $("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), $("#notificacion .modal-body").find("span").text("No existen votaciones asociadas al usuario"), $("#notificacion").modal("show"))
            }).fail(function(o, i, t) {
                console.log(o), console.log(i), console.log(t), $("#notificacion").find(".modal-title").html("Notificaci&oacute;n"), common.message("Se ha detectado un problema en el servicio, favor de internar nuevamente."), common.modal("show")
            })
        },
        renderVotacion: function(o, i) {
            var t = !1;
            void 0 !== o && "object" == typeof o && ($.each(o.Votaciones.Votacion, function(e) {
                var a = null,
                    n = null;
                if (o.Votaciones.Votacion[e].SolicitudAprobacion.marcadoComoLeido ? (a = "fa-check", n = "list-group-item blue-read") : (a = "fa-file-text-o", n = "list-group-item"), 1 !== o.Votaciones.Votacion[e].SolicitudAprobacion.nivelAprobacion.Id) {
                    t = !0;
                    var c = String(Math.random(1e3)).replace(".", "");
                    $("#virtual").append('<div id="o-' + o.Votaciones.Votacion[e].SolicitudAprobacion.idOperacion + c + '" class=" ' + n + '"><div class="row-action-primary"><i class="material-icons"><span class="fa ' + a + '"></span></i></div><div class="row-content"><div class="least-content"></div><h4 class="list-group-item-heading">' + o.Votaciones.Votacion[e].SolicitudAprobacion.nombreOperacion + '</h4><p class="list-group-item-text"><span class="fa fa-calendar-plus-o"></span> Fecha Inicio:' + moment(o.Votaciones.Votacion[e].SolicitudAprobacion.fechaInicio).format("DD/MMM/YYYY") + '</p><p class="list-group-item-text"><span class="fa fa-calendar-plus-o"></span> Fecha Termino: ' + (o.Votaciones.Votacion[e].SolicitudAprobacion.fechaTermino ? moment(o.Votaciones.Votacion[e].SolicitudAprobacion.fechaTermino).format("DD/MMM/YYYY") : "-") + '</p></div></div><div class="list-group-separator"></div>'), $("#o-" + o.Votaciones.Votacion[e].SolicitudAprobacion.idOperacion + c).on({
                        click: function() {
                            storage.setLocal("operacion", '{ "id" :' + o.Votaciones.Votacion[e].SolicitudAprobacion.idSolicitudAprobacion + ', "aprobacion" :' + o.Votaciones.Votacion[e].SolicitudAprobacion.nivelAprobacion.Id + ',"idUsuario" : ' + o.Votaciones.Votacion[e].Usuario.idUsuarioReunion + ', "rol":' + o.Votaciones.Votacion[e].Usuario.rol.Id + ', "emiteVoto":' + o.Votaciones.Votacion[e].Usuario.emiteVoto + ', "fechaInicio":"' + o.Votaciones.Votacion[e].SolicitudAprobacion.fechaInicio + '", "fechaTermino":"' + o.Votaciones.Votacion[e].SolicitudAprobacion.fechaTermino + '"}'), window.location.hash = "#operacion"
                        }
                    })
                } else if (o.Votaciones.Votacion[e].SolicitudAprobacion.esReunionVirtual === i) {
                    var c = String(Math.random(1e3)).replace(".", "");
                    $("#virtual").append('<div id="o-' + o.Votaciones.Votacion[e].SolicitudAprobacion.idOperacion + c + '" class=" ' + n + '"><div class="row-action-primary"><i class="material-icons"><span class="fa ' + a + '"></span></i></div><div class="row-content"><div class="least-content"></div><h4 class="list-group-item-heading">' + o.Votaciones.Votacion[e].SolicitudAprobacion.nombreOperacion + '</h4><p class="list-group-item-text"><span class="fa fa-calendar-plus-o"></span> Fecha Inicio:' + moment(o.Votaciones.Votacion[e].SolicitudAprobacion.fechaInicio).format("DD/MMM/YYYY") + '</p><p class="list-group-item-text"><span class="fa fa-calendar-plus-o"></span> Fecha Termino: ' + (o.Votaciones.Votacion[e].SolicitudAprobacion.fechaTermino ? moment(o.Votaciones.Votacion[e].SolicitudAprobacion.fechaTermino).format("DD/MMM/YYYY") : "-") + '</p></div></div><div class="list-group-separator"></div>'), $("#o-" + o.Votaciones.Votacion[e].SolicitudAprobacion.idOperacion + c).on({
                        click: function() {
                            storage.setLocal("operacion", '{ "id" :' + o.Votaciones.Votacion[e].SolicitudAprobacion.idSolicitudAprobacion + ', "aprobacion" :' + o.Votaciones.Votacion[e].SolicitudAprobacion.nivelAprobacion.Id + ',"idUsuario" : ' + o.Votaciones.Votacion[e].Usuario.idUsuarioReunion + ', "rol":' + o.Votaciones.Votacion[e].Usuario.rol.Id + ', "emiteVoto":' + o.Votaciones.Votacion[e].Usuario.emiteVoto + ', "fechaInicio":"' + o.Votaciones.Votacion[e].SolicitudAprobacion.fechaInicio + '", "fechaTermino":"' + o.Votaciones.Votacion[e].SolicitudAprobacion.fechaTermino + '"}'), window.location.hash = "#operacion"
                        }
                    })
                }
            }), t && (storage.setLocal("isPresidencia", !0), userController.navigation()))
        }
    }, {
        init: function(i, t, e) {
            o.initialize(i, t, e)
        },
        render: function(i) {
            o.renderVotacion(i)
        }
    }
}(votacionExternaController);
$(document).ready(function() {
    common.init(), votacionExternaController.init("#formVotar", "add")
});