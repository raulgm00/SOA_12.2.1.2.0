package org.bcie.fenix.common.model.vo;

import java.math.BigDecimal;

import oracle.adf.share.logging.ADFLogger;
import oracle.jbo.ViewCriteria;
import oracle.jbo.Key;
import oracle.jbo.Row;
import oracle.jbo.server.ViewObjectImpl;

import org.bcie.fenix.common.model.vo.common.LineaCreditoAsociadaVO;

// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Wed Mar 22 12:28:59 CST 2017
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class LineaCreditoAsociadaVOImpl extends ViewObjectImpl implements LineaCreditoAsociadaVO {
    
    private static ADFLogger logger = null;
    
    /**
     * This is the default constructor (do not remove).
     */
    public LineaCreditoAsociadaVOImpl() {
        if (logger == null) {
            logger = ADFLogger.createADFLogger(this.getClass());
        }
    }
    
    public Boolean modificarLineaCreditoPorIdLineaCredito(Long idLineaCredito, 
                                                    String numeroLineaCredito, 
                                                    String descripcionLineaCredito, 
                                                    BigDecimal montoLineaCredito){
        
        logger.warning("Entrando a modificarLineaCreditoPorIdLineaCredito.");
        
        Boolean exito = false;
        ViewCriteria criteria = null;
        Row lineaCreditoRow = null;
        
        try{
            logger.warning("Ejecutando criteria de busqueda de linea de credito.");
            criteria = getViewCriteriaManager().getViewCriteria("LineaCreditoAsociadaVOIdCriteria");
            criteria.ensureVariableManager().setVariableValue("pIdLineaCredito", idLineaCredito);
            this.applyViewCriteria(criteria);
            this.executeQuery();
        
            logger.warning("Registros de lineas encontrados: " + getEstimatedRowCount());
            if(getEstimatedRowCount() > 0){
                lineaCreditoRow = first();
                
                if(lineaCreditoRow != null) {
                    
                    logger.warning("Numero Linea: " + numeroLineaCredito);
                    logger.warning("Descripcion: " + descripcionLineaCredito);
                    logger.warning("Monto Linea: " + montoLineaCredito);
                    logger.warning("Id Linea: " + idLineaCredito);
                    
                    // Asignación de atributos
                    lineaCreditoRow.setAttribute("NumeroLineaCredito", numeroLineaCredito);
                    lineaCreditoRow.setAttribute("DescripcionLinea", descripcionLineaCredito);
                    lineaCreditoRow.setAttribute("MontoLinea", montoLineaCredito);
                    
                    try{
                        getDBTransaction().commit();
                        exito = true;
                    }catch(Exception e){
                        logger.severe("Error al hacer commit", e);
                        getDBTransaction().rollback();
                    }
                }else{
                    logger.severe("No se encontro Row que actualizar. Id Linea: " + idLineaCredito);
                }
            }
        }catch(Exception e){
            logger.warning("ERROR al ejecutar el crietria ContratoDesembolsoVOCriteria.", e);
        }finally{
            //Eliminamos el ViewCriteria
            getViewCriteriaManager().removeApplyViewCriteriaName("LineaCreditoAsociadaVOIdCriteria");
        }
        
        logger.warning("Num lineas despues de filtro: " + getEstimatedRowCount());
        
        logger.warning("Finaliza modificarLineaCreditoPorIdLineaCredito.");
        return exito;
    }

    /**
     * Returns the variable value for pIdLineaCredito.
     * @return variable value for pIdLineaCredito
     */
    public Long getpIdLineaCredito() {
        return (Long) ensureVariableManager().getVariableValue("pIdLineaCredito");
    }

    /**
     * Sets <code>value</code> for variable pIdLineaCredito.
     * @param value value to bind as pIdLineaCredito
     */
    public void setpIdLineaCredito(Long value) {
        ensureVariableManager().setVariableValue("pIdLineaCredito", value);
    }
}

