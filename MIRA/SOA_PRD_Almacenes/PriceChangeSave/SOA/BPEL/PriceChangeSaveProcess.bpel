<?xml version = "1.0" encoding = "UTF-8" ?>
<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  Oracle JDeveloper BPEL Designer 
  
  Created: Tue Jun 18 16:11:04 CDT 2019
  Author:  offic
  Type: BPEL 2.0 Process
  Purpose: Synchronous BPEL Process
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->
<process name="PriceChangeSaveProcess"
               targetNamespace="http://xmlns.oracle.com/PriceChangeProcessBackup/PriceChangeSave/PriceChangeSaveProcess"
               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
               xmlns:client="http://xmlns.oracle.com/PriceChangeProcessBackup/PriceChangeSave/PriceChangeSaveProcess"
               xmlns:ora="http://schemas.oracle.com/xpath/extension"
               xmlns:ui="http://xmlns.oracle.com/soa/designer"
               xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns1="http://xmlns.oracle.com/pcbpel/adapter/db/PriceChangeProcessBackup/PriceChangeSave/QueryRPMPriceChangeDB"
         xmlns:ns4="http://mx.agarcia.ea/Canonical/Commons/RetailStore/v1"
         xmlns:ns7="http://xmlns.oracle.com/pcbpel/adapter/db/top/QueryRPMPriceChangeDB"
         xmlns:ns2="http://mx.agarcia.ea/RetailOperations/SellService/PriceChangeTaskSvc/PriceChangeProcess/BS/PriceChangeSaveProcess"
         xmlns:ns5="http://mx.agarcia.ea/Canonical/Commons/Items/v1"
         xmlns:ns6="http://mx.agarcia.ea/Canonical/Commons/Suppliers/v1"
         xmlns:ns3="http://mx.agarcia.ea/Canonical/Commons/ChangePrice/v1"
         xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
         xmlns:bpm="http://xmlns.oracle.com/bpmn20/extensions"
         xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
         xmlns:ess="http://xmlns.oracle.com/scheduler" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath"
         xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions"
         xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue"
         xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
         xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk"
         xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath"
         xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap"
         xmlns:ns8="http://xmlns.oracle.com/pcbpel/adapter/db/PriceChangeProcessBackup/PriceChangeSave/SaveMDMPriceChangeEventDB"
         xmlns:ns9="http://xmlns.oracle.com/pcbpel/adapter/db/top/SaveMDMPriceChangeEventDB"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         xmlns:ns10="http://xmlns.oracle.com/pcbpel/adapter/db/PriceChangeProcessBackup/PriceChangeSave/get_Export_DetDB"
         xmlns:ns11="http://xmlns.oracle.com/pcbpel/adapter/db/PriceChangeProcessBackup/PriceChangeSave/updateMDMPriceEventDB"
         xmlns:ns12="http://xmlns.oracle.com/pcbpel/adapter/db/top/get_Export_DetDB"
         xmlns:ns13="http://xmlns.oracle.com/pcbpel/adapter/db/top/updateMDMPriceEventDB"
         xmlns:ns14="http://xmlns.oracle.com/pcbpel/adapter/db/PriceChangeProcessBackup/PriceChangeSave/insertMDMPriceEventDet"
         xmlns:ns15="http://xmlns.oracle.com/pcbpel/adapter/db/PriceChangeProcessBackup/PriceChangeSave/pcExportDetDb"
         xmlns:ns16="http://xmlns.oracle.com/pcbpel/adapter/db/top/pcExportDetDb"
         xmlns:ns17="http://xmlns.oracle.com/pcbpel/adapter/db/PriceChangeProcessBackup/PriceChangeSave/ExportDetailDb"
         xmlns:ns18="http://xmlns.oracle.com/pcbpel/adapter/db/ExportDetailDb"
         xmlns:ns19="http://xmlns.oracle.com/pcbpel/adapter/db/RPMExportPriceCostChangeApp/RPMExportPriceCostChange/RPMPriceCostChangeExport"
         xmlns:ns20="http://xmlns.oracle.com/pcbpel/adapter/db/RPMPriceCostChangeExport"
         xmlns:ns21="http://mx.agarcia.ea/Commons/Schemas/AGStandardHeader"
         xmlns:ns22="http://mx.agarcia.ea/Applications/Governance"
         xmlns:ns23="http://xmlns.oracle.com/pcbpel/adapter/db/PriceChangeProcessBackup/PriceChangeSave/insertEventMaster_BatchRPM"
         xmlns:ns24="http://xmlns.oracle.com/pcbpel/adapter/db/top/insertEventMaster_BatchRPM"
         xmlns:ns25="http://mx.agarcia.ea/Capabilities/Core/Suppliers/SupplierEntitySvc/v1.0"
         xmlns:ns26="http://mx.agarcia.ea/Capabilities/Foundation/Party/SupplierEntitySvc"
         xmlns:ns27="http://mx.agarcia.ea/Canonical/Commons/LocationsCommon/v1"
         xmlns:ns28="http://xmlns.oracle.com/pcbpel/adapter/db/top/insertMDMPriceEventDet"
         xmlns:ns29="http://mx.agarcia.ea/Capabilities/Core/RetailStore/RetailStoreEntitySvc"
         xmlns:ns30="http://mx.agarcia.ea/Capabilities/Core/RetailStore/RetailStoreEntitySvc/Schema">
  <import namespace="http://mx.agarcia.ea/Applications/Governance"
          location="http://172.16.19.26:7004/Applications/Governance/PS/GovernanceAPIPXY/v1.0?WSDL"
          importType="http://schemas.xmlsoap.org/wsdl/"/>
  <import ui:processWSDL="true" namespace="http://xmlns.oracle.com/PriceChangeProcessBackup/PriceChangeSave/PriceChangeSaveProcess" location="../WSDLs/PriceChangeSaveProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <!-- 
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        PARTNERLINKS                                                      
        List of services participating in this BPEL process               
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    --> 
  <partnerLinks>
    <!-- 
      The 'client' role represents the requester of this service. It is 
      used for callback. The location and correlation information associated
      with the client role are automatically set using WS-Addressing.
    -->
    <partnerLink name="PriceChangeSaveService" partnerLinkType="client:PriceChangeSaveProcess" myRole="PriceChangeSaveProcessProvider"/>
   
    <partnerLink name="updateMDMPriceEventDB" partnerLinkType="ns11:updateMDMPriceEventDB_plt"
                 partnerRole="updateMDMPriceEventDB_role"/>
    <partnerLink name="RPMPriceCostChangeExportPXY" partnerLinkType="ns19:RPMPriceCostChangeExport_plt"
                 partnerRole="RPMPriceCostChangeExport_role"/>
    <partnerLink name="insertMDMPriceEventDet" partnerLinkType="ns14:insertMDMPriceEventDet_plt"
                 partnerRole="insertMDMPriceEventDet_role"/>
    <partnerLink name="GovernanceAPIPXY" partnerLinkType="ns22:GovernanceAPIPXY" partnerRole="GovernancePort"/>
    <partnerLink name="insertEventMaster_BatchRPM" partnerLinkType="ns23:insertEventMaster_BatchRPM_plt"
                 partnerRole="insertEventMaster_BatchRPM_role"/>
    <partnerLink name="RetailStoreEntityPXY" partnerLinkType="ns29:RetailStoreEntityPXY"
                 partnerRole="RetailStorePType"/>
  </partnerLinks>

  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      VARIABLES                                                        
      List of messages and XML documents used within this BPEL process 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <variables>
    <!-- Reference to the message passed as input during initiation -->
    <variable name="inputVariable" messageType="client:PriceChangeSaveProcessRequestMessage"/>

    <!-- Reference to the message that will be returned to the requester-->
    <variable name="outputVariable" messageType="client:PriceChangeSaveProcessResponseMessage"/>
    <variable name="queryIdIn" type="xsd:int"/>
    <variable name="updateMDMPriceEventDB_InputVariable" messageType="ns11:PrcEventsCollection_msg"/>
    <variable name="insertMDMPriceEventDet_InputVariable" messageType="ns14:PrcEventsDetailsCollection_msg"/>
    <variable name="RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_InputVariable"
              messageType="ns19:RPMPriceCostChangeExportInput_msg"/>
    <variable name="RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable"
              messageType="ns19:RPMPriceCostChangeExportOutputCollection_msg"/>
    <variable name="countEventDet" type="xsd:integer"/>
    <variable name="controlErrorVar" type="xsd:integer">
      <from>0</from>
    </variable>
    <variable name="header" messageType="client:StandardHeaderMessage"/>
    <variable name="interfaceId" type="xsd:string"/>
    <variable name="insertEventMaster_BatchRPM_insert_InputVariable" messageType="ns23:PrcEventsCollection_msg"/>
    <variable name="tracePriceDetail_audit_InputVariable" messageType="ns22:audit"/>
    <variable name="tracePriceDetail_audit_OutputVariable" messageType="ns22:auditResponse"/>
    <variable name="RetailStoreEntityPXY_translate_InputVariable" messageType="ns29:translateRetailStoreRequest"/>
    <variable name="RetailStoreEntityPXY_translate_OutputVariable" messageType="ns29:translateRetailStoreResponse"/>
  </variables>

  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
     ORCHESTRATION LOGIC                                               
     Set of activities coordinating the flow of messages across the    
     services integrated within this business process                  
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <sequence name="main">

    <!-- Receive input from requestor. (Note: This maps to operation defined in PriceChangeSaveProcess.wsdl) -->
    <receive name="receiveInput" partnerLink="PriceChangeSaveService" portType="client:PriceChangeSaveProcess" operation="process" variable="inputVariable" createInstance="yes"
             bpelx:headerVariable="header"/><sequence name="InterfaceId"
                                                      xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <if name="validateInterfaceId">
         <documentation>
            <![CDATA[Recibe Id de interface]]>
         </documentation>
         <condition>$header.headerMessage/ns21:parameters/ns21:parameter[@Key='gov.interface.id']</condition>
         <assign name="getInterfaceId">
            <copy>
               <from>$header.headerMessage/ns21:parameters/ns21:parameter[@Key='gov.interface.id']</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$interfaceId</to>
            </copy>
         </assign>
         <else>
            <documentation>
               <![CDATA[No recibe Id de interface]]>
            </documentation>
            <empty name="InterfaceIdNull"/>
         </else>
      </if>
   </sequence>
    <if name="validateSource">
      <documentation>
        <![CDATA[Evento registrado por RequesPriceChange]]>
      </documentation>
      <condition>$inputVariable.payload/ns2:event/ns3:userRequestor/ns3:id='AGARCIA_SOA'</condition>
      <sequence name="interfazSOA">
        <assign name="getId">
          <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
            <from>number(string($inputVariable.payload/ns2:event/ns3:idType))</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_InputVariable.RPMPriceCostChangeExportInput_msg/ns20:pHeadId</to>
          </copy>
        </assign>
        <sequence name="insertarDetalles">
          <invoke name="RPMPriceCostChangeExportPXY" bpelx:invokeAsDetail="no" partnerLink="RPMPriceCostChangeExportPXY"
                  portType="ns19:RPMPriceCostChangeExport_ptt" operation="RPMPriceCostChangeExport"
                  inputVariable="RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_InputVariable"
                  outputVariable="RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable"/>
          <assign name="countEventDet">
            <copy>
              <from>count($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput)</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$countEventDet</to>
            </copy>
          </assign>
          <assign name="insertarDetalles">
            <bpelx:annotation>
              <bpelx:pattern patternName="bpelx:transformation"></bpelx:pattern>
            </bpelx:annotation>
            <copy>
              <from>ora:doXSLTransformForDoc("../Transformations/insertarDetalles.xsl", $RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection)</from>
              <to variable="insertMDMPriceEventDet_InputVariable" part="PrcEventsDetailsCollection"/>
            </copy>
          </assign>
          <scope name="translate">
            <forEach parallel="no" counterName="CounterSupplier" name="ForEachStore">
              <startCounterValue>1</startCounterValue>
              <finalCounterValue>$countEventDet</finalCounterValue>
              <scope name="Scope1">
                <sequence>
                  <if name="validateSupp">
                    <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$CounterSupplier]/ns20:STORE)&gt;0</condition>
                    <sequence name="Sequence3">
                      <assign name="insertSupp">
                        <copy>
                          <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$CounterSupplier]/ns20:STORE</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$RetailStoreEntityPXY_translate_InputVariable.request/ns30:id</to>
                        </copy>
                        <copy>
                          <from>'OracleRMS'</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$RetailStoreEntityPXY_translate_InputVariable.request/ns30:applicationCode</to>
                        </copy>
                        <copy>
                          <from>'JDA'</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$RetailStoreEntityPXY_translate_InputVariable.request/ns30:targetApplicationCode</to>
                        </copy>
                      </assign>
                      <invoke name="RetailStoreEntityPXY" bpelx:invokeAsDetail="no" partnerLink="RetailStoreEntityPXY"
                              portType="ns29:RetailStorePType" operation="translate"
                              inputVariable="RetailStoreEntityPXY_translate_InputVariable"
                              outputVariable="RetailStoreEntityPXY_translate_OutputVariable"/>
                      <assign name="updateSUpp">
                        <copy ignoreMissingFromData="no" bpelx:insertMissingToData="yes">
                          <from>$RetailStoreEntityPXY_translate_OutputVariable.response/ns30:retailStoreList/ns4:retailStore/ns4:storeID</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertMDMPriceEventDet_InputVariable.PrcEventsDetailsCollection/ns28:PrcEventsDetails[$CounterSupplier]/ns28:buId</to>
                        </copy>
                      </assign>
                    </sequence>
                    <else>
                      <empty name="null"/>
                    </else>
                  </if>
                </sequence>
              </scope>
            </forEach>
          </scope>
          <invoke name="insertMDMPriceEventDet" bpelx:invokeAsDetail="no" partnerLink="insertMDMPriceEventDet"
                  portType="ns14:insertMDMPriceEventDet_ptt" operation="insert"
                  inputVariable="insertMDMPriceEventDet_InputVariable"/>
        </sequence>
        <forEach parallel="no" counterName="ForEachNodes" name="validateErrorStatus">
          <startCounterValue>1</startCounterValue>
          <finalCounterValue>$countEventDet</finalCounterValue>
          <scope name="ValidateDataRequestPC">
            <variables>
              <variable name="errorMessage" type="xsd:string"/>
              <variable name="itemIdVar" type="xsd:string"/>
            </variables>
            <sequence name="Sequence1">
              <if name="validateErrorStatus">
                <condition>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:STATUS='E'</condition>
                <sequence name="Sequence2">
                  <if name="StyleOrSKU">
                    <documentation>
                      <![CDATA[style]]>
                    </documentation>
                    <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:STYLE)&gt;0</condition>
                    <assign name="style">
                      <copy>
                        <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:STYLE</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemIdVar</to>
                      </copy>
                    </assign>
                    <elseif>
                      <documentation>
                        <![CDATA[SKU]]>
                      </documentation>
                      <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:SKU)&gt;0</condition>
                      <assign name="SKU">
                        <copy ignoreMissingFromData="yes">
                          <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:SKU</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemIdVar</to>
                        </copy>
                      </assign>
                    </elseif>
                    <else>
                      <documentation>
                        <![CDATA[null]]>
                      </documentation>
                      <empty name="varNull"/>
                    </else>
                  </if>
                  <assign name="setError">
                    <copy ignoreMissingFromData="yes">
                      <from>string($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:ERR_MSG)</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$errorMessage</to>
                    </copy>
                    <copy>
                      <from>$controlErrorVar + 1</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$controlErrorVar</to>
                    </copy>
                  </assign>
                  <assign name="failEvent" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>'false'</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$outputVariable.payload/client:result</to>
      </copy>
   </assign>
                </sequence>
                <else>
                  <sequence><empty name="controlVarEqualZero"/>
                  </sequence>
                </else>
              </if>
              <scope name="trace" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <variables>
                  <variable name="itemId" type="xsd:string"/>
                  <variable name="Entry_1" messageType="ns22:audit"/>
                  <variable name="Entry_2" messageType="ns22:audit"/>
                  <variable name="Entry_3" messageType="ns22:audit"/>
                  <variable name="Entry_4" messageType="ns22:audit"/>
                  <variable name="Entry_5" messageType="ns22:audit"/>
                  <variable name="Entry_6" messageType="ns22:audit"/>
                  <variable name="Entry_7" messageType="ns22:audit"/>
                  <variable name="Entry_8" messageType="ns22:audit"/>
                  <variable name="Entry_9" messageType="ns22:audit"/>
                </variables>
                <faultHandlers>
                  <catchAll>
                    <empty name="Empty2"/>
                  </catchAll>
                </faultHandlers>
                <sequence>
                  <if name="StyleOrSKU">
                    <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:STYLE)&gt;1</condition>
                    <assign name="itemId">
                      <copy>
                        <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:STYLE</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemId</to>
                      </copy>
                    </assign>
                    <elseif>
                      <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:SKU)&gt;1</condition><assign name="itemId"
                                                                                                                                                                                                                                                  xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:SKU</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemId</to>
      </copy></assign></elseif>
                    <else><assign name="itemIdNull" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>'Id Null'</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemId</to>
      </copy></assign></else>
                  </if>
                  <if name="ErrorMessage">
                    <documentation>
                      <![CDATA[Item recibido con error]]>
                    </documentation>
                    <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:ERR_MSG)&gt;1</condition>
                    <assign name="ErrorMessage">
                      <copy>
                        <from>concat("Message:",$errorMessage)</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
                      </copy>
                    </assign>
                    <else>
                      <documentation>
                        <![CDATA[Item valido]]>
                      </documentation>
                      <assign name="ItemValido" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>'Correcto'</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
      </copy></assign></else>
                  </if>
                  <assign name="sendMessage">
                    <copy>
                      <from>"TraceInterface"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:operation</to>
                    </copy>
                    <copy>
                      <from>$interfaceId</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:interfaceId</to>
                    </copy>
                    <copy>
                      <from>concat("Id:",$itemId)</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:data</to>
                    </copy>
                    <copy>
                      <from>"id"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
                    </copy>
                    <copy>
                      <from>concat($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:PC_EXPORT_ID,'T',$ForEachNodes)</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
                    </copy>
                    <copy>
                      <from>"registrationDate"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
                    </copy>
                    <copy>
                      <from>xp20:current-dateTime()</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
                    </copy>
                    <copy>
                      <from>"finishDate"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
                    </copy>
                    <copy>
                      <from>xp20:current-dateTime()</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
                    </copy>
                    <copy>
                      <from>"component"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
                    </copy>
                    <copy>
                      <from>"PCh Approved"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
                    </copy>
                    <copy>
                      <from>"destinyComponent"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
                    </copy>
                    <copy>
                      <from>"PriceChangeDistrubute"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
                    </copy>
                    <copy>
                      <from>"message"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
                    </copy>
                    <copy>
                      <from>"level"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
                    </copy>
                    <copy>
                      <from>1</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
                    </copy>
                    <copy>
                      <from>"status"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
                    </copy>
                    <copy>
                      <from>"Finalizado"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
                    </copy>
                    <copy>
                      <from>"class"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
                    </copy>
                    <copy>
                      <from>"Expert"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
                    </copy>
                    <extensionAssignOperation>
                      <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                        <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                        <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
                      </bpelx:append>
                    </extensionAssignOperation>
                    <extensionAssignOperation>
                      <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                        <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                        <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
                      </bpelx:append>
                    </extensionAssignOperation>
                    <extensionAssignOperation>
                      <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                        <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                        <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
                      </bpelx:append>
                    </extensionAssignOperation>
                    <extensionAssignOperation>
                      <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                        <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                        <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
                      </bpelx:append>
                    </extensionAssignOperation>
                    <extensionAssignOperation>
                      <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                        <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                        <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
                      </bpelx:append>
                    </extensionAssignOperation>
                    <extensionAssignOperation>
                      <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                        <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                        <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
                      </bpelx:append>
                    </extensionAssignOperation>
                    <extensionAssignOperation>
                      <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                        <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                        <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
                      </bpelx:append>
                    </extensionAssignOperation>
                    <extensionAssignOperation>
                      <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                        <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                        <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
                      </bpelx:append>
                    </extensionAssignOperation>
                    <extensionAssignOperation>
                      <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                        <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                        <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
                      </bpelx:append>
                    </extensionAssignOperation>
                  </assign><invoke name="tracePriceDetail" bpelx:invokeAsDetail="no" partnerLink="GovernanceAPIPXY"
                          portType="ns22:GovernancePort" operation="audit"
                          inputVariable="tracePriceDetail_audit_InputVariable"
                          outputVariable="tracePriceDetail_audit_OutputVariable"/>
                  <assign name="sendMessage" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
   <copy>
         <from>' '</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:operation</to>
      </copy><copy>
         <from>' '</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:interfaceId</to>
      </copy><copy>
         <from>' '</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:data</to>
      </copy><copy>
                      <from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">' '</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</to>
                    </copy></assign>
                </sequence></scope>
            </sequence>
          </scope>
        </forEach>
        <sequence name="updateMDM" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
          <bpelx:skipCondition>$controlErrorVar&gt;0</bpelx:skipCondition>
          <assign name="insertUpdateStatus">
            <copy>
              <from>$inputVariable.payload/ns2:event/ns3:idType</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateMDMPriceEventDB_InputVariable.PrcEventsCollection/ns13:PrcEvents/ns13:id</to>
            </copy>
            <copy>
              <from>'RPMAPR'</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateMDMPriceEventDB_InputVariable.PrcEventsCollection/ns13:PrcEvents/ns13:statusCode</to>
            </copy>
            <copy>
              <from>1</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateMDMPriceEventDB_InputVariable.PrcEventsCollection/ns13:PrcEvents/ns13:exportFlag</to>
            </copy>
          </assign>
          <invoke name="updateMDMPriceEventDB" bpelx:invokeAsDetail="no" partnerLink="updateMDMPriceEventDB"
                  portType="ns11:updateMDMPriceEventDB_ptt" operation="update"
                  inputVariable="updateMDMPriceEventDB_InputVariable"
                  xmlns:bpelx="http://schemas.oracle.com/bpel/extension"/>
        </sequence>
      </sequence>
      <else>
        <documentation>
          <![CDATA[batch de RPM]]>
        </documentation>
        <sequence name="RPM">
          <if name="validateScope" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <documentation>
         <![CDATA[Cadena]]>
      </documentation>
      <condition>$inputVariable.payload/ns2:event/ns3:scope='Z'</condition>
      <assign name="insertC" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy ignoreMissingFromData="yes">
         <from>'C'</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:scope</to>
      </copy></assign><else>
         <documentation>
            <![CDATA[Supplier]]>
         </documentation>
         
      <sequence name="Sequence4">
                <assign name="insertScope">
                  <copy ignoreMissingFromData="yes">
                    <from>$inputVariable.payload/ns2:event/ns3:scope</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:scope</to>
                  </copy>
                </assign>
              </sequence></else>
   </if>
          <assign name="insertEventHead">
            <copy>
              <from>5</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:exportFlag</to>
            </copy>
            <copy>
              <from>$inputVariable.payload/ns2:event/ns3:idType</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:id</to>
            </copy>
            <copy ignoreMissingFromData="yes">
              <from>concat($inputVariable.payload/ns2:event/ns3:idType/@Name,$inputVariable.payload/ns2:event/ns3:idType)</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:name</to>
            </copy>
            <copy ignoreMissingFromData="yes">
              <from>concat($inputVariable.payload/ns2:event/ns3:idType/@Name,$inputVariable.payload/ns2:event/ns3:idType)</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:description</to>
            </copy>
            <copy>
              <from>'RPMAPR'</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:statusCode</to>
            </copy>
            <copy>
              <from>0</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:jdaId</to>
            </copy>
            <copy>
              <from>0</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:rpmId</to>
            </copy>
            <copy>
              <from>'MXN'</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:currency</to>
            </copy>
            <copy>
              <from>'RPM'</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:userRequestor</to>
            </copy>
            <copy>
              <from>0</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:globalPercent</to>
            </copy>
            <copy ignoreMissingFromData="yes">
              <from>$inputVariable.payload/ns2:event/ns3:idType/@type</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:eventType</to>
            </copy>
            <copy ignoreMissingFromData="yes">
              <from>$inputVariable.payload/ns2:event/ns3:effectiveDate</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:effectiveDate</to>
            </copy>
            <copy ignoreMissingFromData="yes">
              <from>$inputVariable.payload/ns2:event/ns3:expirationDate</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:expirationDate</to>
            </copy>
            <copy ignoreMissingFromData="yes">
              <from>$inputVariable.payload/ns2:event/ns3:cause</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:cause</to>
            </copy>
          </assign>
          <if name="validationType">
            <documentation>
              <![CDATA[Type=Clearence]]>
            </documentation>
            <condition>$inputVariable.payload/ns2:event/ns3:idType/@type='L'</condition>
            <assign name="ChangeToRegular">
              <copy>
                <from>'R'</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertEventMaster_BatchRPM_insert_InputVariable.PrcEventsCollection/ns24:PrcEvents/ns24:eventType</to>
              </copy>
            </assign>
            <else>
              <documentation>
                <![CDATA[R o P]]>
              </documentation>
              <empty name="RorP"/>
            </else>
          </if><invoke name="insertEventMaster_BatchRPM" bpelx:invokeAsDetail="no" partnerLink="insertEventMaster_BatchRPM"
                  portType="ns23:insertEventMaster_BatchRPM_ptt" operation="insert"
                  inputVariable="insertEventMaster_BatchRPM_insert_InputVariable"/><assign name="getId"
                                                                                           xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
            xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
         <from>number(string($inputVariable.payload/ns2:event/ns3:idType))</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_InputVariable.RPMPriceCostChangeExportInput_msg/ns20:pHeadId</to>
      </copy>
   </assign><sequence name="insertarDetalles" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <invoke name="RPMPriceCostChangeExportPXY" bpelx:invokeAsDetail="no" partnerLink="RPMPriceCostChangeExportPXY"
              portType="ns19:RPMPriceCostChangeExport_ptt" operation="RPMPriceCostChangeExport"
              inputVariable="RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_InputVariable"
              outputVariable="RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable"
              xmlns:bpelx="http://schemas.oracle.com/bpel/extension"/>
      <assign name="countEventDet">
         <copy>
            <from>count($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput)</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$countEventDet</to>
         </copy>
      </assign>
      <assign name="insertarDetalles">
         <bpelx:annotation xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
            <bpelx:pattern patternName="bpelx:transformation"></bpelx:pattern>
         </bpelx:annotation>
         <copy>
            <from>ora:doXSLTransformForDoc("../Transformations/insertarDetalles.xsl", $RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection)</from>
            <to variable="insertMDMPriceEventDet_InputVariable" part="PrcEventsDetailsCollection"/>
         </copy>
      </assign><scope name="translate1" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <forEach parallel="no" counterName="CounterSupplier" name="ForEachStore">
         <startCounterValue>1</startCounterValue>
         <finalCounterValue>$countEventDet</finalCounterValue>
         <scope name="Scope1">
            <sequence>
               <if name="validateSupp">
                  <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$CounterSupplier]/ns20:STORE)&gt;0</condition>
                  <sequence name="Sequence3">
                     <assign name="insertSupp">
                          <copy>
                            <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$CounterSupplier]/ns20:STORE</from>
                            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$RetailStoreEntityPXY_translate_InputVariable.request/ns30:id</to>
                          </copy>
                          <copy>
                            <from>'OracleRMS'</from>
                            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$RetailStoreEntityPXY_translate_InputVariable.request/ns30:applicationCode</to>
                          </copy>
                          <copy>
                            <from>'JDA'</from>
                            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$RetailStoreEntityPXY_translate_InputVariable.request/ns30:targetApplicationCode</to>
                          </copy>
                        </assign>
                     <invoke name="RetailStoreEntityPXY" bpelx:invokeAsDetail="no" partnerLink="RetailStoreEntityPXY"
                             portType="ns29:RetailStorePType" operation="translate"
                             inputVariable="RetailStoreEntityPXY_translate_InputVariable"
                             outputVariable="RetailStoreEntityPXY_translate_OutputVariable"
                             xmlns:bpelx="http://schemas.oracle.com/bpel/extension"/>
                     <assign name="updateSUpp">
                        <copy ignoreMissingFromData="no" bpelx:insertMissingToData="yes"
                              xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                           <from>$RetailStoreEntityPXY_translate_OutputVariable.response/ns30:retailStoreList/ns4:retailStore/ns4:storeID</from>
                           <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$insertMDMPriceEventDet_InputVariable.PrcEventsDetailsCollection/ns28:PrcEventsDetails[$CounterSupplier]/ns28:buId</to>
                        </copy>
                     </assign>
                  </sequence>
                  <else>
                     <empty name="null"/>
                  </else>
               </if>
            </sequence>
         </scope>
      </forEach>
   </scope><invoke name="insertMDMPriceEventDet" bpelx:invokeAsDetail="no" partnerLink="insertMDMPriceEventDet"
              portType="ns14:insertMDMPriceEventDet_ptt" operation="insert"
              inputVariable="insertMDMPriceEventDet_InputVariable"
              xmlns:bpelx="http://schemas.oracle.com/bpel/extension"/>
   </sequence><forEach parallel="no" counterName="ForEachNodes" name="validateErrorStatus"
                       xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <startCounterValue>1</startCounterValue>
      <finalCounterValue>$countEventDet</finalCounterValue>
      <scope name="ValidateDataRPM">
         <variables>
            <variable name="errorMessage" type="xsd:string"/>
            <variable name="itemIdVar" type="xsd:string"/>
         </variables>
         <sequence name="Sequence1">
            <if name="validateErrorStatus">
               <condition>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:STATUS='E'</condition>
               <sequence name="Sequence2">
                  <if name="StyleOrSKU">
                     <documentation>
                        <![CDATA[style]]>
                     </documentation>
                     <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:STYLE)&gt;0</condition>
                     <assign name="style">
                        <copy>
                           <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:STYLE</from>
                           <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemIdVar</to>
                        </copy>
                     </assign>
                     <elseif>
                        <documentation>
                           <![CDATA[SKU]]>
                        </documentation>
                        <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:SKU)&gt;0</condition>
                        <assign name="SKU">
                           <copy ignoreMissingFromData="yes">
                              <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:SKU</from>
                              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemIdVar</to>
                           </copy>
                        </assign>
                     </elseif>
                     <else>
                        <documentation>
                           <![CDATA[null]]>
                        </documentation>
                        <empty name="varNull"/>
                     </else>
                  </if>
                  <assign name="setError">
                     <copy ignoreMissingFromData="yes">
                        <from>string($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:ERR_MSG)</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$errorMessage</to>
                     </copy>
                     <copy>
                        <from>$controlErrorVar + 1</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$controlErrorVar</to>
                     </copy>
                  </assign>
                    <assign name="failEvent">
                      <copy>
                        <from>'false'</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$outputVariable.payload/client:result</to>
                      </copy>
                    </assign>
                  </sequence>
               <else>
                    <sequence name="Sequence5">
                      <empty name="controlVarEqualZero"/>
                    </sequence>
                  </else>
            </if><scope name="trace" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <variables>
         <variable name="itemId" type="xsd:string"/>
         <variable name="Entry_1" messageType="ns22:audit"/>
         <variable name="Entry_2" messageType="ns22:audit"/>
         <variable name="Entry_3" messageType="ns22:audit"/>
         <variable name="Entry_4" messageType="ns22:audit"/>
         <variable name="Entry_5" messageType="ns22:audit"/>
         <variable name="Entry_6" messageType="ns22:audit"/>
         <variable name="Entry_7" messageType="ns22:audit"/>
         <variable name="Entry_8" messageType="ns22:audit"/>
         <variable name="Entry_9" messageType="ns22:audit"/>
      </variables><faultHandlers>
                    <catchAll>
                      <empty name="Empty1"/>
                    </catchAll>
                  </faultHandlers>
      <sequence>
         
         <if name="StyleOrSKU" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:STYLE)&gt;1</condition>
      <assign name="itemId">
         <copy>
            <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:STYLE</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemId</to>
         </copy>
      </assign>
      <elseif>
         <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:SKU)&gt;1</condition>
         <assign name="itemId" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>$RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:SKU</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemId</to>
      </copy></assign>
      </elseif>
      <else>
         <assign name="itemIdNull" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>'Id Null'</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$itemId</to>
      </copy></assign>
      </else>
   </if><if name="ErrorMessage" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <documentation>
         <![CDATA[Item recibido con error]]>
      </documentation>
      <condition>string-length($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput[$ForEachNodes]/ns20:ERR_MSG)&gt;1</condition>
      <assign name="ErrorMessage">
         <copy>
            <from>concat("Message:",$errorMessage)</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
         </copy>
      </assign>
      <else>
         <documentation>
            <![CDATA[Item valido]]>
         </documentation>
         <assign name="ItemValido" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>'Correcto'</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
      </copy></assign>
      </else>
   </if><assign name="sendMessage">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
         <copy>
               <from>"TraceInterface"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:operation</to>
            </copy><copy>
               <from>$interfaceId</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:interfaceId</to>
            </copy><copy>
               <from>concat("Id:",$itemId)</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:data</to>
            </copy><copy>
               <from>"id"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
            </copy><copy>
               <from>concat($RPMPriceCostChangeExportPXY_RPMPriceCostChangeExport_OutputVariable.RPMPriceCostChangeExportOutputCollection/ns20:RPMPriceCostChangeExportOutput/ns20:PC_EXPORT_ID,'T',$ForEachNodes)</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
            </copy><copy>
               <from>"registrationDate"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
            </copy><copy>
               <from>xp20:current-dateTime()</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
            </copy><copy>
               <from>"finishDate"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
            </copy><copy>
               <from>xp20:current-dateTime()</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
            </copy><copy>
               <from>"component"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
            </copy><copy>
               <from>"PCh Approved"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
            </copy><copy>
               <from>"destinyComponent"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
            </copy><copy>
               <from>"PriceChangeDistrubute"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
            </copy><copy>
               <from>"message"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
            </copy><copy>
               <from>"level"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
            </copy><copy>
               <from>1</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
            </copy><copy>
               <from>"status"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
            </copy><copy>
               <from>"Finalizado"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
            </copy><copy>
               <from>"class"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:key</to>
            </copy><copy>
               <from>"Expert"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns22:request/ns22:header/ns22:parameters/ns22:entry/ns22:value</to>
            </copy><extensionAssignOperation>
                        <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
               </bpelx:append>
                      </extensionAssignOperation><extensionAssignOperation>
                        <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
               </bpelx:append>
                      </extensionAssignOperation><extensionAssignOperation>
                        <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
               </bpelx:append>
                      </extensionAssignOperation><extensionAssignOperation>
                        <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
               </bpelx:append>
                      </extensionAssignOperation><extensionAssignOperation>
                        <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
               </bpelx:append>
                      </extensionAssignOperation><extensionAssignOperation>
                        <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
               </bpelx:append>
                      </extensionAssignOperation><extensionAssignOperation>
                        <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
               </bpelx:append>
                      </extensionAssignOperation><extensionAssignOperation>
                        <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
               </bpelx:append>
                      </extensionAssignOperation><extensionAssignOperation>
                        <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns22:request/ns22:header/ns22:parameters/ns22:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</bpelx:to>
               </bpelx:append>
                      </extensionAssignOperation></assign>
         <invoke name="tracePriceDetail" bpelx:invokeAsDetail="no" partnerLink="GovernanceAPIPXY"
                 portType="ns22:GovernancePort" operation="audit" inputVariable="tracePriceDetail_audit_InputVariable"
                 outputVariable="tracePriceDetail_audit_OutputVariable"
                 xmlns:bpelx="http://schemas.oracle.com/bpel/extension"/>
         <assign name="sendMessage" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
   <copy>
         <from>' '</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:operation</to>
      </copy><copy>
         <from>' '</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:interfaceId</to>
      </copy><copy>
         <from>' '</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:data</to>
      </copy><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">' '</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$tracePriceDetail_audit_InputVariable.request/ns22:request/ns22:header/ns22:parameters</to></copy></assign>
      </sequence>
   </scope></sequence>
      </scope>
   </forEach><sequence name="updateMDM" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <bpelx:skipCondition xmlns:bpelx="http://schemas.oracle.com/bpel/extension">$controlErrorVar&gt;0</bpelx:skipCondition>
      <assign name="insertUpdateStatus">
         <copy>
            <from>$inputVariable.payload/ns2:event/ns3:idType</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateMDMPriceEventDB_InputVariable.PrcEventsCollection/ns13:PrcEvents/ns13:id</to>
         </copy>
         <copy>
            <from>'RPMAPR'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateMDMPriceEventDB_InputVariable.PrcEventsCollection/ns13:PrcEvents/ns13:statusCode</to>
         </copy>
         <copy>
            <from>1</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateMDMPriceEventDB_InputVariable.PrcEventsCollection/ns13:PrcEvents/ns13:exportFlag</to>
         </copy>
      </assign>
      <invoke name="updateMDMPriceEventDB" bpelx:invokeAsDetail="no" partnerLink="updateMDMPriceEventDB"
              portType="ns11:updateMDMPriceEventDB_ptt" operation="update"
              inputVariable="updateMDMPriceEventDB_InputVariable"
              xmlns:bpelx="http://schemas.oracle.com/bpel/extension"/>
   </sequence></sequence>
      </else>
    </if><!-- Generate reply to synchronous request -->
    <reply name="replyOutput" partnerLink="PriceChangeSaveService" portType="client:PriceChangeSaveProcess" operation="process" variable="outputVariable"/>
  </sequence>
</process>