<?xml version = "1.0" encoding = "UTF-8" ?>
<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  Oracle JDeveloper BPEL Designer 
  
  Created: Sun Jun 30 13:52:54 CDT 2019
  Author:  Sol4IT
  Type: BPEL 2.0 Process
  Purpose: Synchronous BPEL Process
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->
<process name="JDAUpdateStyleProcess"
               targetNamespace="http://xmlns.oracle.com/AGCreateStyleProcess/JDAUpdateStyle/JDAUpdateStyleProcess"
               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
               xmlns:client="http://xmlns.oracle.com/AGCreateStyleProcess/JDAUpdateStyle/JDAUpdateStyleProcess"
               xmlns:ora="http://schemas.oracle.com/xpath/extension"
               xmlns:ui="http://xmlns.oracle.com/soa/designer"
               xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns1="http://mx.agarcia.ea/Applications/JDA/Items/QueryItem/v1.0"
         xmlns:ns2="http://mx.agarcia.ea/Applications/JDA/Items/ModifyItem/v1.0"
         xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
         xmlns:bpm="http://xmlns.oracle.com/bpmn20/extensions"
         xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
         xmlns:ess="http://xmlns.oracle.com/scheduler" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath"
         xmlns:ns4="http://mx.agarcia.ea/Canonical/Commons/Items/v1"
         xmlns:ns5="http://mx.agarcia.ea/Canonical/Commons/Suppliers/v1"
         xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions"
         xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue"
         xmlns:ns3="http://mx.agarcia.ea/Applications/JDA/Items/QueryItem"
         xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
         xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk"
         xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap"
         xmlns:ns6="http://mx.agarcia.ea/Capabilities/Core/Items/UpdateItemEntity/UpdateStyle"
         xmlns:ns7="http://mx.agarcia.ea/Applications/JDA/Items/ModifyItem"
         xmlns:ns8="http://mx.agarcia.ea/Capabilities/Support/Commons/MerchandiseHierarchyEntitySvc/v1.0"
         xmlns:ns9="http://mx.agarcia.ea/Capabilities/Support/Commons/MerchandiseHierarchyEntity"
         xmlns:ns10="http://mx.agarcia.ea/Capabilities/Support/Commons/ItemCatalogEntitySvcWSDL"
         xmlns:ns11="http://mx.agarcia.ea/Capabilities/Support/Commons/ItemCatalogEntitySvc"
         xmlns:ns12="http://mx.agarcia.ea/Commons/Schemas/AGStandardMessage"
         xmlns:ns13="http://mx.agarcia.ea/Capabilities/Core/Items/UpdateItemEntitySvc/v1.0"
         xmlns:ns14="http://mx.agarcia.ea/Commons/Schemas/AGStandardHeader"
         xmlns:ns15="http://mx.agarcia.ea/Applications/Governance"
         xmlns:ns16="http://xmlns.oracle.com/pcbpel/adapter/db/JDAUpdateStyleAPP/JDAUpdateStyle/getSKUs"
         xmlns:ns17="http://xmlns.oracle.com/pcbpel/adapter/db/getSKUs"
         xmlns:ns18="http://xmlns.oracle.com/JDAUpdateSKUApp/JDAUpdateSKUProcess/JDAUpdateSKUProcess"
         xmlns:ns19="http://mx.agarcia.ea/Capabilities/Core/Items/UpdateItemEntity"
         xmlns:ns20="http://mx.agarcia.ea/Applications/JDA/Buyer/FindBuyer/v1.0"
         xmlns:ns21="http://mx.agarcia.ea/Applications/JDA/Buyer"
         xmlns:ns22="http://mx.agarcia.ea/Canonical/Commons/LocationsCommon/v1">
  <import namespace="http://mx.agarcia.ea/Applications/Governance"
          location="http://172.16.19.26:7004/Applications/Governance/PS/GovernanceAPIPXY/v1.0?WSDL"
          importType="http://schemas.xmlsoap.org/wsdl/"/>
  <import namespace="http://mx.agarcia.ea/Capabilities/Core/Items/UpdateItemEntitySvc/v1.0"
          location="../WSDLs/UpdateStyleProcessWSDL.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <import ui:processWSDL="true" namespace="http://xmlns.oracle.com/AGCreateStyleProcess/JDAUpdateStyle/JDAUpdateStyleProcess" location="../WSDLs/JDAUpdateStyleProcess.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
    <!-- 
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        PARTNERLINKS                                                      
        List of services participating in this BPEL process               
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    --> 
  <partnerLinks>
    <!-- 
      The 'client' role represents the requester of this service. It is 
      used for callback. The location and correlation information associated
      with the client role are automatically set using WS-Addressing.
    -->
    <partnerLink name="JDAUpdateStyleProcessSvc" partnerLinkType="client:JDAUpdateStyleProcess" myRole="JDAUpdateStyleProcessProvider"/>
    <partnerLink name="JDAFindStyleByIdPxy" partnerLinkType="ns1:JDAFindStyleByIdPxy" partnerRole="queryItemPort"/>
    <partnerLink name="JDAModifyStylePxy" partnerLinkType="ns2:JDAModifyStylePxy" partnerRole="modifyItemPort"/>
    <partnerLink name="SOAPJDAModifyStyleUDAPxy" partnerLinkType="ns2:SOAPJDAModifyStyleUDAPxy"
                 partnerRole="modifyItemPort"/>
    <partnerLink name="JDAModifyStyleHierarchyPxy" partnerLinkType="ns2:JDAModifyStyleHierarchyPxy"
                 partnerRole="modifyItemPort"/>
    <partnerLink name="JDAModifyStyleAttributesPxy" partnerLinkType="ns2:JDAModifyStyleAttributesPxy"
                 partnerRole="modifyItemPort"/>
    <partnerLink name="MerchandiseHierarchyEntitySvc" partnerLinkType="ns8:MerchandiseHierarchyEntitySvc"
                 partnerRole="MerchandiseHierarchyEntityPType"/>
    <partnerLink name="ItemCatalogEntitySvc" partnerLinkType="ns10:ItemCatalogEntitySvc"
                 partnerRole="ItemCatalogEntitySvcPType"/>
    <partnerLink name="JDAModifyStyleDescriptionsSvc" partnerLinkType="ns2:JDAModifyStyleDescriptionsSvc"
                 partnerRole="modifyItemPort"/>
    <partnerLink name="GovernanceAPIPXY" partnerLinkType="ns15:GovernanceAPIPXY" partnerRole="GovernancePort"/>
    <partnerLink name="getSKUs" partnerLinkType="ns16:getSKUs_plt" partnerRole="getSKUs_role"/>
    <partnerLink name="JDAUpdateSKUProcessPXY" partnerLinkType="ns18:JDAUpdateSKUProcess"
                 partnerRole="JDAUpdateSKUProcessProvider"/>
    <partnerLink name="JDAModifySKUHierarchyPXY" partnerLinkType="ns2:JDAModifySKUHierarchyPXY"
                 partnerRole="modifyItemPort"/>
    <partnerLink name="JDAModifySKUUDAFromStylePXY" partnerLinkType="ns2:JDAModifySKUUDAFromStylePXY"
                 partnerRole="modifyItemPort"/>
    <partnerLink name="JDAModifyStyleStickerPXY" partnerLinkType="ns2:JDAModifyStyleStickerPXY"
                 partnerRole="modifyItemPort"/>
    <partnerLink name="JDAFindBuyerPXY" partnerLinkType="ns20:JDAFindBuyerPXY" partnerRole="findBuyerPort"/>
  </partnerLinks>

  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
      VARIABLES                                                        
      List of messages and XML documents used within this BPEL process 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <variables>
    <!-- Reference to the message passed as input during initiation -->
    <variable name="inputVariable" messageType="client:JDAUpdateStyleProcessRequestMessage"/>

    <!-- Reference to the message that will be returned to the requester-->
    <variable name="outputVariable" messageType="client:JDAUpdateStyleProcessResponseMessage"/>
    <variable name="continueAction" type="xsd:integer">
      <from>true()</from>
    </variable>
    <variable name="InvFindJDAStyle_FindById_In" messageType="ns1:findItemByIdRequestMessage"/>
    <variable name="InvFindJDAStyle_FindById_Out" messageType="ns1:filterItemResponseMessage"/>
    <variable name="updateGeneralInfo" type="xsd:integer">
      <from>false()</from>
    </variable>
    <variable name="updateHierarchy" type="xsd:integer">
      <from>false()</from>
    </variable>
    <variable name="updateUDAs" type="xsd:integer">
      <from>false()</from>
    </variable>
    <variable name="updateAttribs" type="xsd:integer">
      <from>false()</from>
    </variable>
    <variable name="InvModifyStyle_In" messageType="ns2:modifyItemRequestMessage"/>
    <variable name="InvModifyStyle_Out" messageType="ns2:modifyItemResponseMessage"/>
    <variable name="JDAModifyStyleHierarchy_In" messageType="ns2:modifyItemRequestMessage"/>
    <variable name="JDAModifyStyleHierarchy_Out" messageType="ns2:modifyItemResponseMessage"/>
    <variable name="MerchandiseHierarchyEntitySvc_In" messageType="ns8:requestMessage"/>
    <variable name="MerchandiseHierarchyEntitySvc_Out" messageType="ns8:replyMessage"/>
    <variable name="SOAPJDAModifyStyleUDA_In" messageType="ns2:modifyItemRequestMessage"/>
    <variable name="SOAPJDAModifyStyleUDA_Out" messageType="ns2:modifyItemResponseMessage"/>
    <variable name="JDAModifyStyleAttributes_In" messageType="ns2:modifyItemRequestMessage"/>
    <variable name="JDAModifyStyleAttributes_Out" messageType="ns2:modifyItemResponseMessage"/>
    <variable name="countCatalog" type="xsd:integer"/>
    <variable name="JDAModifyStyleDescriptionsSvc_modify_InputVariable" messageType="ns2:modifyItemRequestMessage"/>
    <variable name="JDAModifyStyleDescriptionsSvc_modify_OutputVariable" messageType="ns2:modifyItemResponseMessage"/>
    <variable name="header" messageType="ns13:StandardHeaderMessage"/>
    <variable name="interfaceId" type="xsd:string"/>
    <variable name="activityId" type="xsd:string"/>
    <variable name="traceID1" type="xsd:string"/>
    <variable name="traceID2" type="xsd:string"/>
    <variable name="traceID3" type="xsd:string"/>
    <variable name="traceUDA_audit_InputVariable" messageType="ns15:audit"/>
    <variable name="traceUDA_audit_OutputVariable" messageType="ns15:auditResponse"/>
    <variable name="Entry_1" messageType="ns15:audit"/>
    <variable name="Entry_2" messageType="ns15:audit"/>
    <variable name="Entry_3" messageType="ns15:audit"/>
    <variable name="Entry_4" messageType="ns15:audit"/>
    <variable name="Entry_5" messageType="ns15:audit"/>
    <variable name="Entry_6" messageType="ns15:audit"/>
    <variable name="Entry_7" messageType="ns15:audit"/>
    <variable name="Entry_8" messageType="ns15:audit"/>
    <variable name="Entry_9" messageType="ns15:audit"/>
    <variable name="traceGeneral_audit_InputVariable" messageType="ns15:audit"/>
    <variable name="traceGeneral_audit_OutputVariable" messageType="ns15:auditResponse"/>
    <variable name="traceHierarchy_audit_InputVariable" messageType="ns15:audit"/>
    <variable name="traceHierarchy_audit_OutputVariable" messageType="ns15:auditResponse"/>
    <variable name="ItemCatalogEntitySvc_In" messageType="ns10:requestMessage"/>
    <variable name="ItemCatalogEntitySvc_Out" messageType="ns10:replyMessage"/>
    <variable name="updateSKUVar" type="xsd:int"/>
    <variable name="JDAModifySKUUDAFromStylePXY_modify_InputVariable" messageType="ns2:modifyItemRequestMessage"/>
    <variable name="JDAModifySKUUDAFromStylePXY_modify_OutputVariable" messageType="ns2:modifyItemResponseMessage"/>
    <variable name="JDAModifyStyleStickerPXY_modify_InputVariable" messageType="ns2:modifyItemRequestMessage"/>
    <variable name="JDAModifyStyleStickerPXY_modify_OutputVariable" messageType="ns2:modifyItemResponseMessage"/>
    <variable name="stickerVar" type="xsd:int"/>
  </variables>
  <!-- 
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
     ORCHESTRATION LOGIC                                               
     Set of activities coordinating the flow of messages across the    
     services integrated within this business process                  
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <sequence name="main">

    <!-- Receive input from requestor. (Note: This maps to operation defined in JDAUpdateStyleProcess.wsdl) -->
    <receive name="receiveInput" partnerLink="JDAUpdateStyleProcessSvc" portType="client:JDAUpdateStyleProcess" operation="process" variable="inputVariable" createInstance="yes"
             bpelx:headerVariable="header"/><flow name="GetGovernanceIds"
                                                                                                                                                                                         xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <sequence name="InterfaceId">
         <if name="validateInterfaceId">
            <documentation>
               
            <![CDATA[Recibe Id de interface]]></documentation>
            <condition>$header.headerMessage/ns14:parameters/ns14:parameter[@Key='gov.interface.id']</condition>
            <assign name="getInterfaceId">
               
            <copy>
                  <from>$header.headerMessage/ns14:parameters/ns14:parameter[@Key='gov.interface.id']</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$interfaceId</to>
               </copy></assign>
            <else>
               <documentation>
                  <![CDATA[No recibe Id de interface]]>
               </documentation>
               <empty name="InterfaceIdNull"/>
            </else>
         </if>
      </sequence>
      <sequence name="ActivityId">
         <if name="validateActicityId" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
            <documentation>
               
            <![CDATA[Recibe Id de actividad]]></documentation>
            <condition>$header.headerMessage/ns14:parameters/ns14:parameter[@Key='gov.activity.id']</condition>
            <assign name="getActivityId">
               
            <copy>
                  <from>$header.headerMessage/ns14:parameters/ns14:parameter[@Key='gov.activity.id']</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$activityId</to>
               </copy></assign>
            <else>
               <documentation>
                  <![CDATA[No recibe Id de actividad]]>
               </documentation>
               <empty name="ActivityIdNull"/>
            </else>
         </if>
      </sequence>
   </flow><scope name="PrepareOperation">
      <sequence name="Sequence1">
        <assign name="SetPayload">
          <copy>
            <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvFindJDAStyle_FindById_In.payload/ns3:itemFilter/ns4:id</to>
          </copy>
        </assign>
        <invoke name="InvFindJDAStyle" bpelx:invokeAsDetail="no" partnerLink="JDAFindStyleByIdPxy"
                portType="ns1:queryItemPort" operation="findById" inputVariable="InvFindJDAStyle_FindById_In"
                outputVariable="InvFindJDAStyle_FindById_Out"/>
        <if name="IFStyleExist">
          <condition>string-length($InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:name)&gt; 0</condition>
          <assign name="SetControlVars">
            <copy>
              <from>1</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$continueAction</to>
            </copy>
          </assign>
          <else>
            <assign name="SetElseControlVars">
              <copy>
                <from>0</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$continueAction</to>
              </copy>
            </assign>
          </else>
        </if>
      </sequence>
    </scope><assign name="SetControlVar" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
        <from>0</from>
        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateHierarchy</to>
      </copy>
      <copy>
        <from>0</from>
        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateUDAs</to>
      </copy>
      <copy>
        <from>0</from>
        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateAttribs</to>
      </copy>
      <copy>
        <from>0</from>
        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateGeneralInfo</to>
      </copy>
    </assign><scope name="alertlData" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <bpelx:skipCondition>1=1</bpelx:skipCondition>
      <variables>
        <variable name="alertModHierarchy_audit_InputVariable" messageType="ns15:audit"/>
        <variable name="alertModHierarchy_audit_OutputVariable" messageType="ns15:auditResponse"/>
        <variable name="alertId" type="xsd:string"/>
        <variable name="startDate" type="xsd:string"/>
        <variable name="item" type="xsd:string"/>
      </variables>
      <sequence>
         <assign name="sendMessage">
          <copy>
            <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$item</to>
          </copy>
          <copy>
            <from>oraext:sequence-next-val ("ID_SERV_SEC", "jdbc/MDMSOA")</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertId</to>
          </copy>
          <copy>
            <from>'id'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
          </copy>
          <copy>
            <from>$alertId</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
          </copy>
          <copy>
            <from>xp20:current-dateTime()</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$startDate</to>
          </copy>
          <copy>
            <from>'registrationDate'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
          </copy>
          <copy>
            <from>$startDate</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
          </copy>
          <copy>
            <from>'level'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
          </copy>
          <copy>
            <from>'W'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
          </copy>
          <copy>
            <from>'component'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
          </copy>
          <copy>
            <from>'ModifyHierarchy'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
          </copy>
          <copy>
            <from>'message'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
          </copy>
          <copy>
            <from>concat('Se modificara la jerarquia del articulo',$item)</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
          </copy>
          <copy>
            <from>'AlertInterface'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:operation</to>
          </copy>
          <copy>
            <from>$interfaceId</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:interfaceId</to>
          </copy>
          <copy>
            <from>$activityId</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:activityId</to>
          </copy>
          <extensionAssignOperation>
            <bpelx:append>
              <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
              <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
            </bpelx:append>
          </extensionAssignOperation>
          <extensionAssignOperation>
            <bpelx:append>
              <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
              <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
            </bpelx:append>
          </extensionAssignOperation>
          <extensionAssignOperation>
            <bpelx:append>
              <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
              <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
            </bpelx:append>
          </extensionAssignOperation>
          <extensionAssignOperation>
            <bpelx:append>
              <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
              <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
            </bpelx:append>
          </extensionAssignOperation>
          <extensionAssignOperation>
            <bpelx:append>
              <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
              <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
            </bpelx:append>
          </extensionAssignOperation>
          <copy>
            <from>'OracleRMS'</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:source</to>
          </copy>
          <copy>
            <from>$item</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$alertModHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:data</to>
          </copy>
        </assign>
         
      <invoke name="alertModHierarchy" partnerLink="GovernanceAPIPXY" portType="ns15:GovernancePort" operation="audit"
              inputVariable="alertModHierarchy_audit_InputVariable"
              outputVariable="alertModHierarchy_audit_OutputVariable"
              xmlns:bpelx="http://schemas.oracle.com/bpel/extension" bpelx:invokeAsDetail="no"/></sequence>
   </scope><scope name="ValidateGlobalInfo">
      <flow name="Flow2">
        <bpelx:skipCondition>$continueAction=0</bpelx:skipCondition>
        <sequence name="ValidateUDAChanges">
          <if name="IfUDAChanged">
            <condition>count($inputVariable.payload/ns6:items/ns4:item/ns4:catalogs/ns4:catalog)&gt;0</condition><sequence name="Sequence8"><assign name="SetControlVar">
                <copy>
                  <from>1</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateUDAs</to>
                </copy>
              </assign></sequence><else><assign name="SetControlVar" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>0</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateUDAs</to>
      </copy></assign></else>
          </if>
        </sequence>
        <sequence name="ValidateGeneralInfoChanges">
          <flow name="Flow3">
            <sequence name="SupplierId">
              <if name="validate">
                <condition>string-length($inputVariable.payload/ns6:items/ns4:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID)&gt;0</condition>
                <if name="IfSupplierIdChanged" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                  <condition>$inputVariable.payload/ns6:items/ns4:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID != $InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID</condition>
                  <assign name="SetControlVar">
                    <copy>
                      <from>$inputVariable.payload/ns6:items/ns4:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID</to>
                    </copy>
                    <copy>
                      <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:id</to>
                    </copy>
                    <copy>
                      <from>1</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateGeneralInfo</to>
                    </copy>
                  </assign>
                  <else>
                    <sequence>
                      <assign name="AssignSupplierId">
                        <copy bpelx:insertMissingToData="yes" ignoreMissingFromData="yes">
                          <from>$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID</to>
                        </copy>
                      </assign>
                    </sequence>
                  </else>
                </if>
                <else>
                  <sequence>
                    <empty name="Empty8"/><assign name="AssignSupplierId"
                                                  xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy bpelx:insertMissingToData="yes" ignoreMissingFromData="yes"
            xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
         <from>$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID</to>
      </copy>
   </assign></sequence>
                </else>
              </if></sequence>
            <sequence name="Name">
              <if name="validate">
                <condition>string-length($inputVariable.payload/ns6:items/ns4:item/ns4:name)&gt;0</condition>
                <if name="IfNameChanged" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                  <condition>$inputVariable.payload/ns6:items/ns4:item/ns4:name != $InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:name</condition>
                  <assign name="SetControlVar">
                    <copy>
                      <from>1</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateGeneralInfo</to>
                    </copy>
                    <copy>
                      <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:id</to>
                    </copy>
                    <copy>
                      <from>$inputVariable.payload/ns6:items/ns4:item/ns4:name</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:name</to>
                    </copy>
                  </assign>
                  <else>
                    <sequence>
                      <assign name="AssignName">
                        <copy>
                          <from>$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:name</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:name</to>
                        </copy>
                      </assign>
                    </sequence>
                  </else>
                </if>
                <else><sequence name="Sequence5"><assign name="AssignName"
                                                                                                                                            xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:name</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:name</to>
      </copy>
   </assign><empty name="Empty8" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence></else>
              </if></sequence>
            <sequence name="ShortDesc">
              <if name="validate">
                <condition>string-length($inputVariable.payload/ns6:items/ns4:item/ns4:shortDescription)</condition>
                <if name="IfShortDescriptionChanged" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                  <condition>$inputVariable.payload/ns6:items/ns4:item/ns4:shortDescription !=$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:shortDescription</condition>
                  <assign name="SetControlVar">
                    <copy>
                      <from>$inputVariable.payload/ns6:items/ns4:item/ns4:shortDescription</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:shortDescription</to>
                    </copy>
                    <copy>
                      <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:id</to>
                    </copy>
                    <copy>
                      <from>1</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateGeneralInfo</to>
                    </copy>
                  </assign>
                  <else>
                    <assign name="AssignShortDescription">
                      <copy>
                        <from>$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:shortDescription</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:shortDescription</to>
                      </copy>
                    </assign>
                  </else>
                </if>
                <else><sequence name="Sequence6"><assign name="AssignShortDescription"
                                                                xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:shortDescription</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvModifyStyle_In.payload/ns7:item/ns4:shortDescription</to>
      </copy>
   </assign><sequence><empty name="Empty8" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence></sequence></else>
              </if></sequence>
          </flow>
        </sequence>
        <sequence name="ValidateHierarchyChanges">
          <if name="validateHierarchy">
            <condition>string-length($inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Department']/ns4:id)&gt;0 and string-length($inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Class']/ns4:id)&gt;0 and string-length($inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Type']/ns4:id)&gt;0</condition>
            <sequence name="Sequence10">
              <assign name="SetControlVar" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
            <copy>
               <from>0</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateHierarchy</to>
            </copy>
         </assign>
              <flow name="Flow4">
                <sequence name="Sequence12"><if name="validateDepartment"
                                                xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      <condition>$inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Department']/ns4:id</condition>
      <sequence name="Sequence2">
         <assign name="SetControlVar">
            <copy>
               <from>1</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateHierarchy</to>
            </copy>
         </assign>
      <assign name="putDepartment" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <extensionAssignOperation>
                          <bpelx:append ignoreMissingFromData="yes">
                            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Department']</bpelx:from>
                            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$MerchandiseHierarchyEntitySvc_In.translateRequestMessage/ns9:itemHierarchyInfo</bpelx:to>
                          </bpelx:append>
                        </extensionAssignOperation></assign></sequence>
      <else>
         
      <sequence name="Sequence13"><empty name="noDept"/></sequence></else>
   </if></sequence>
                <sequence name="Sequence11"><if name="validateClass"
                                                xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      <condition>$inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Class']/ns4:id</condition>
      <sequence name="Sequence2">
         <assign name="SetControlVar">
            <copy>
               <from>1</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateHierarchy</to>
            </copy>
         </assign>
      <assign name="putClass" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <extensionAssignOperation>
                          <bpelx:append ignoreMissingFromData="yes"
                                        xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Class']</bpelx:from>
                            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$MerchandiseHierarchyEntitySvc_In.translateRequestMessage/ns9:itemHierarchyInfo</bpelx:to>
                          </bpelx:append>
                        </extensionAssignOperation></assign></sequence>
      <else>
         
      <sequence name="Sequence14"><empty name="noClass"
                                         xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence></else>
   </if></sequence>
                <sequence name="Sequence"><if name="validateType"
                                              xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      <condition>$inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Type']/ns4:id</condition>
      <sequence name="Sequence2">
         <assign name="SetControlVar">
            <copy>
               <from>1</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateHierarchy</to>
            </copy>
         </assign>
      <assign name="putType" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <extensionAssignOperation>
                          <bpelx:append ignoreMissingFromData="yes"
                                        xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Type']</bpelx:from>
                            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$MerchandiseHierarchyEntitySvc_In.translateRequestMessage/ns9:itemHierarchyInfo</bpelx:to>
                          </bpelx:append>
                        </extensionAssignOperation></assign></sequence>
      <else>
         
      <sequence name="Sequence15"><empty name="noType"
                                         xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence></else>
   </if></sequence>
                <sequence name="Sequence10"><if name="validateDivision"
                                                xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      <condition>$inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Division']/ns4:id</condition>
      <sequence name="Sequence2">
         <assign name="SetControlVar">
            <copy>
               <from>1</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateHierarchy</to>
            </copy>
         </assign>
      <assign name="putDivision" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <extensionAssignOperation>
                          <bpelx:append ignoreMissingFromData="yes"
                                        xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$inputVariable.payload/ns6:items/ns4:item/ns4:itemHierarchyInfo/ns4:hierarchy[@Type='Division']</bpelx:from>
                            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$MerchandiseHierarchyEntitySvc_In.translateRequestMessage/ns9:itemHierarchyInfo</bpelx:to>
                          </bpelx:append>
                        </extensionAssignOperation></assign></sequence>
      <else>
         
      <sequence name="Sequence16"><empty name="noDiv" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence></else>
   </if></sequence>
              </flow>
            </sequence>
            <else><sequence name="Sequence3">
                <empty name="Empty7"/>
              </sequence></else>
          </if>
        </sequence>
      </flow>
    </scope>
    <scope name="UpdateStyle">
      <variables>
        <variable name="initialDateTime" type="xsd:string"/>
        <variable name="stickerControlVar" type="xsd:int"/>
        <variable name="JDAFindBuyerPXY_modify_InputVariable" messageType="ns20:findBuyerRequestMessage"/>
        <variable name="JDAFindBuyerPXY_modify_OutputVariable" messageType="ns20:findBuyerResponseMessage"/>
      </variables>
      <flow name="Flow1">
        <bpelx:skipCondition>$continueAction=0</bpelx:skipCondition>
        <sequence name="Attributes">
          <bpelx:skipCondition>1=1</bpelx:skipCondition>
          <invoke name="JDAModifyStyleAttributes" bpelx:invokeAsDetail="no" partnerLink="JDAModifyStyleAttributesPxy"
                  portType="ns2:modifyItemPort" operation="modify" inputVariable="JDAModifyStyleAttributes_In"
                  outputVariable="JDAModifyStyleAttributes_Out"/>
        </sequence>
        <sequence name="UDA">
          <bpelx:skipCondition>$updateUDAs=0</bpelx:skipCondition>
          <assign name="getIdTrace" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>oraext:sequence-next-val ("ID_SERV_SEC", "jdbc/MDMSOA")</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceID1</to>
      </copy>
   </assign><assign name="initialDateC1" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>xp20:current-dateTime()</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$initialDateTime</to>
      </copy>
   </assign><assign name="CountCatalog">
            <copy>
              <from>count($inputVariable.payload/ns6:items/ns4:item/ns4:catalogs/ns4:catalog)</from>
              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$countCatalog</to>
            </copy>
          </assign>
          <forEach parallel="no" counterName="countUDAStyle" name="ForEachUDAStyle">
            <startCounterValue>1</startCounterValue>
            <finalCounterValue>$countCatalog</finalCounterValue>
            <scope name="DinamicTranslate">
              <variables>
                <variable name="type" type="xsd:string"/>
                <variable name="stickerControlVar" type="xsd:int"/>
              </variables>
              <sequence>
                <assign name="getTranslateUDA">
                  <copy>
                    <from>$inputVariable.payload/ns6:items/ns4:item/ns4:catalogs/ns4:catalog[number($countUDAStyle)]/ns4:id</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$ItemCatalogEntitySvc_In.request/ns11:id</to>
                  </copy>
                  <copy>
                    <from>'OracleRMS'</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$ItemCatalogEntitySvc_In.request/ns11:applicationCode</to>
                  </copy>
                  <copy>
                    <from>$inputVariable.payload/ns6:items/ns4:item/ns4:catalogs/ns4:catalog[number($countUDAStyle)]/@Type</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$ItemCatalogEntitySvc_In.request/ns11:catalogDefinition</to>
                  </copy>
                  <copy>
                    <from>'JDA'</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$ItemCatalogEntitySvc_In.request/ns11:targetAppCode</to>
                  </copy>
                </assign>
                <assign name="type">
                  <copy>
                    <from>$inputVariable.payload/ns6:items/ns4:item/ns4:catalogs/ns4:catalog[number($countUDAStyle)]/@Type</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$type</to>
                  </copy>
                </assign>
                <if name="validateCatalog">
                  <condition>string-length($inputVariable.payload/ns6:items/ns4:item/ns4:catalogs/ns4:catalog[number($countUDAStyle)]/ns4:id)=0</condition>
                  <if name="getBackup">
                    <bpelx:skipCondition>1=1</bpelx:skipCondition>
                    <condition>string-length($InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:catalogs/ns4:catalog[@Type=$type]/ns4:id)=0</condition>
                    <empty name="Empty10"/>
                    <else>
                      <assign name="insertCatalogBackup">
                        <extensionAssignOperation>
                          <bpelx:append ignoreMissingFromData="yes">
                            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:catalogs/ns4:catalog[@Type=$type]</bpelx:from>
                            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$SOAPJDAModifyStyleUDA_In.payload/ns7:item/ns4:catalogs</bpelx:to>
                          </bpelx:append>
                        </extensionAssignOperation>
                        <extensionAssignOperation>
                          <bpelx:append ignoreMissingFromData="yes">
                            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:catalogs/ns4:catalog[@Type=$type]</bpelx:from>
                            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifySKUUDAFromStylePXY_modify_InputVariable.payload/ns7:item/ns4:catalogs</bpelx:to>
                          </bpelx:append>
                        </extensionAssignOperation>
                      </assign>
                    </else>
                  </if>
                  <else>
                    <sequence name="Sequence7">
                      <invoke name="ItemCatalogEntitySvc" partnerLink="ItemCatalogEntitySvc"
                              portType="ns10:ItemCatalogEntitySvcPType" operation="translate"
                              inputVariable="ItemCatalogEntitySvc_In" outputVariable="ItemCatalogEntitySvc_Out"
                              xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                              xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                              bpelx:invokeAsDetail="no"/>
                      <assign name="AssignUDA">
                        <copy>
                          <from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$ItemCatalogEntitySvc_Out.response/ns11:catalogInfo/ns4:catalog[1]</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$SOAPJDAModifyStyleUDA_In.payload/ns7:item/ns4:catalogs</to>
                        </copy>
                        <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                          <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$SOAPJDAModifyStyleUDA_In.payload/ns7:item/ns4:id</to>
                        </copy>
                        <copy>
                          <from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$ItemCatalogEntitySvc_Out.response/ns11:catalogInfo/ns4:catalog[1]</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifySKUUDAFromStylePXY_modify_InputVariable.payload/ns7:item/ns4:catalogs</to>
                        </copy>
                        <copy ignoreMissingFromData="yes">
                          <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                          <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifySKUUDAFromStylePXY_modify_InputVariable.payload/ns7:item/ns4:id</to>
                        </copy>
                      </assign>
                      <if name="validateSticker">
                        <condition>$type='Sticker'</condition>
                        <sequence name="Sequence20">
                          <assign name="AssignUDA" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                            <copy>
                              <from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$ItemCatalogEntitySvc_Out.response/ns11:catalogInfo/ns4:catalog[1]</from>
                              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleStickerPXY_modify_InputVariable.payload/ns7:item/ns4:catalogs</to>
                            </copy>
                            <copy>
                              <from>1</from>
                              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$stickerVar</to>
                            </copy>
                            <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                              <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                              <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleStickerPXY_modify_InputVariable.payload/ns7:item/ns4:id</to>
                            </copy>
                          </assign>
                          <invoke name="JDAModifyStyleStickerPXY" bpelx:invokeAsDetail="no"
                                  partnerLink="JDAModifyStyleStickerPXY" portType="ns2:modifyItemPort"
                                  operation="modify" inputVariable="JDAModifyStyleStickerPXY_modify_InputVariable"
                                  outputVariable="JDAModifyStyleStickerPXY_modify_OutputVariable"/>
                        </sequence>
                        <else>
                          <empty name="noSticker"/>
                        </else>
                      </if>
                    </sequence>
                  </else>
                </if>
              </sequence>
            </scope>
          </forEach>
          <flow name="Flow5">
            <sequence name="Sequence">
              <invoke name="SOAPJDAModifyStyleUDA" partnerLink="SOAPJDAModifyStyleUDAPxy"
                      portType="ns2:modifyItemPort" operation="modify" inputVariable="SOAPJDAModifyStyleUDA_In"
                      outputVariable="SOAPJDAModifyStyleUDA_Out" xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                      xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable" bpelx:invokeAsDetail="no">
                <bpelx:skipCondition>$stickerVar=1</bpelx:skipCondition>
              </invoke>
            </sequence>
            <sequence name="Sequence21">
              <invoke name="JDAModifySKUUDAFromStylePXY" bpelx:invokeAsDetail="no"
                      partnerLink="JDAModifySKUUDAFromStylePXY" portType="ns2:modifyItemPort" operation="modify"
                      inputVariable="JDAModifySKUUDAFromStylePXY_modify_InputVariable"
                      outputVariable="JDAModifySKUUDAFromStylePXY_modify_OutputVariable"/>
            </sequence>
          </flow>
          <scope name="traceModifyUDAData"
                                                                                                                                                                              xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
            <bpelx:skipCondition>1=1</bpelx:skipCondition>
            <faultHandlers>
         <catchAll>
            <empty name="faultGeneralData"/>
         </catchAll>
      </faultHandlers>
      <sequence>
         <assign name="sendMessage">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
         <copy>
               <from>"TraceActivity"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:operation</to>
            </copy><copy>
               <from>$interfaceId</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:interfaceId</to>
            </copy><copy>
               <from>$activityId</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:activityId</to>
            </copy><copy>
               <from>"Modificando UDA de articulo"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:data</to>
            </copy><copy>
               <from>"id"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>$traceID1</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"registrationDate"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>$initialDateTime</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"finishDate"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>xp20:current-dateTime()</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"component"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"ModifyUDA"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"destinyComponent"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"ModifyUDAJDAProxy"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"message"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"Modificando UDAs de articulo"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"level"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>1</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"status"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"Finalizado"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"class"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"Expert"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceUDA_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation></assign>
         
      <invoke name="traceUDA" bpelx:invokeAsDetail="no" partnerLink="GovernanceAPIPXY" portType="ns15:GovernancePort"
              operation="audit" inputVariable="traceUDA_audit_InputVariable"
              outputVariable="traceUDA_audit_OutputVariable"/></sequence>
   </scope></sequence>
        <sequence name="GeneralInfo">
          <bpelx:skipCondition>$updateGeneralInfo=0</bpelx:skipCondition><assign name="getIdTrace"
                                                                                 xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>oraext:sequence-next-val ("ID_SERV_SEC", "jdbc/MDMSOA")</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceID2</to>
      </copy></assign><assign name="initialDateC2" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>xp20:current-dateTime()</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$initialDateTime</to>
      </copy></assign><invoke name="InvModifyStyle" partnerLink="JDAModifyStylePxy"
                  portType="ns2:modifyItemPort" operation="modify" inputVariable="InvModifyStyle_In"
                  outputVariable="InvModifyStyle_Out" bpelx:invokeAsDetail="no"/><scope name="traceModifyGeneralData"
                                                                                        xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
            <bpelx:skipCondition>1=1</bpelx:skipCondition>
            <faultHandlers>
         <catchAll>
            <empty name="faultGeneralData"/>
         </catchAll>
      </faultHandlers>
      <sequence>
         <assign name="sendMessage">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
         <copy>
               <from>"TraceActivity"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:operation</to>
            </copy><copy>
               <from>$interfaceId</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:interfaceId</to>
            </copy><copy>
               <from>$activityId</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:activityId</to>
            </copy><copy>
               <from>"Modificando articulo"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:data</to>
            </copy><copy>
               <from>"id"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>$traceID2</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"registrationDate"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>$initialDateTime</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"finishDate"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>xp20:current-dateTime()</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"component"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"ModifyGeneralData"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"destinyComponent"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"ModifyJDAProxy"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"message"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"Modificando datos generales de articulo"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"level"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>1</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"status"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"Finalizado"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"class"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"Expert"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceGeneral_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation></assign>
         
      <invoke name="traceGeneral" partnerLink="GovernanceAPIPXY" portType="ns15:GovernancePort"
              operation="audit" inputVariable="traceGeneral_audit_InputVariable"
              outputVariable="traceGeneral_audit_OutputVariable" xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
              bpelx:invokeAsDetail="no"/></sequence>
   </scope></sequence>
        <sequence name="Hierarchy">
          <bpelx:skipCondition>$updateHierarchy=0</bpelx:skipCondition><assign name="getIdTrace"
                                                                               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <copy>
         <from>oraext:sequence-next-val ("ID_SERV_SEC", "jdbc/MDMSOA")</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceID3</to>
      </copy></assign><assign name="initialDateC3" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>xp20:current-dateTime()</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$initialDateTime</to>
      </copy>
   </assign>
          <invoke name="MerchandiseHierarchyEntitySvc" bpelx:invokeAsDetail="no"
                  partnerLink="MerchandiseHierarchyEntitySvc" portType="ns8:MerchandiseHierarchyEntityPType"
                  operation="translate" inputVariable="MerchandiseHierarchyEntitySvc_In"
                  outputVariable="MerchandiseHierarchyEntitySvc_Out"/>
          <if name="failTranslate">
            <condition>string-length($MerchandiseHierarchyEntitySvc_Out.translateResponseMessage/ns9:itemHierarchyInfo/ns4:hierarchy[@Type='Department']/ns4:id)=0</condition><sequence name="Sequence18"><assign name="putDepartment"
                                                                                                                                                                                                                  xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <extensionAssignOperation>
                  <bpelx:append ignoreMissingFromData="yes" xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:catalogs/ns4:catalog[@Type='Department']/ns4:id</bpelx:from>
            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleHierarchy_In.payload/ns7:item/ns4:itemHierarchyInfo</bpelx:to>
         </bpelx:append>
                </extensionAssignOperation></assign><assign name="putClass" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <extensionAssignOperation>
                  <bpelx:append ignoreMissingFromData="yes" xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:catalogs/ns4:catalog[@Type='Class']/ns4:id</bpelx:from>
            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleHierarchy_In.payload/ns7:item/ns4:itemHierarchyInfo</bpelx:to>
         </bpelx:append>
                </extensionAssignOperation></assign><assign name="putType" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <extensionAssignOperation>
                  <bpelx:append ignoreMissingFromData="yes" xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:catalogs/ns4:catalog[@Type='Type']/ns4:id</bpelx:from>
            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleHierarchy_In.payload/ns7:item/ns4:itemHierarchyInfo</bpelx:to>
         </bpelx:append>
                </extensionAssignOperation></assign><assign name="putDivision" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
   <extensionAssignOperation>
                  <bpelx:append ignoreMissingFromData="yes" xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
            <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:catalogs/ns4:catalog[@Type='Division']/ns4:id</bpelx:from>
            <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleHierarchy_In.payload/ns7:item/ns4:itemHierarchyInfo</bpelx:to>
         </bpelx:append>
                </extensionAssignOperation></assign><assign name="putId" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      
   <copy>
         <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleHierarchy_In.payload/ns7:item/ns4:id</to>
      </copy><copy>
                  <from>0</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$updateSKUVar</to>
                </copy></assign></sequence><else>
              <sequence name="Sequence22">
                <assign name="modifyHierarchy">
                  <copy>
                    <from>$MerchandiseHierarchyEntitySvc_Out.translateResponseMessage/ns9:itemHierarchyInfo</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleHierarchy_In.payload/ns7:item/ns4:itemHierarchyInfo</to>
                  </copy>
                  <copy>
                    <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleHierarchy_In.payload/ns7:item/ns4:id</to>
                  </copy>
                </assign>
                <scope name="updateBuyer">
                  <faultHandlers>
                    <catchAll><empty name="FaultFind" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></catchAll>
                  </faultHandlers>
                  <sequence name="Sequence23">
                    <assign name="putHierarchyBayer">
                      <copy bpelx:insertMissingToData="yes" ignoreMissingFromData="yes">
                        <from>$MerchandiseHierarchyEntitySvc_Out.translateResponseMessage/ns9:itemHierarchyInfo/ns4:hierarchy[@Type='Department']/ns4:id</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAFindBuyerPXY_modify_InputVariable.findBuyerRequestMessage/ns21:department</to>
                      </copy>
                      <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                        <from>$MerchandiseHierarchyEntitySvc_Out.translateResponseMessage/ns9:itemHierarchyInfo/ns4:hierarchy[@Type='Type']/ns4:id</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAFindBuyerPXY_modify_InputVariable.findBuyerRequestMessage/ns21:subdepartment</to>
                      </copy>
                      <copy bpelx:insertMissingToData="yes" ignoreMissingFromData="yes">
                        <from>$MerchandiseHierarchyEntitySvc_Out.translateResponseMessage/ns9:itemHierarchyInfo/ns4:hierarchy[@Type='Class']/ns4:id</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAFindBuyerPXY_modify_InputVariable.findBuyerRequestMessage/ns21:class</to>
                      </copy>
                      <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                        <from>$MerchandiseHierarchyEntitySvc_Out.translateResponseMessage/ns9:itemHierarchyInfo/ns4:hierarchy[@Type='SubClass']/ns4:id</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAFindBuyerPXY_modify_InputVariable.findBuyerRequestMessage/ns21:subclass</to>
                      </copy>
                    </assign>
                    <invoke name="JDAFindBuyerPXY" bpelx:invokeAsDetail="no" partnerLink="JDAFindBuyerPXY"
                            portType="ns20:findBuyerPort" operation="modify"
                            inputVariable="JDAFindBuyerPXY_modify_InputVariable"
                            outputVariable="JDAFindBuyerPXY_modify_OutputVariable"/>
                    <assign name="buyerVar">
                      <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                        <from>$JDAFindBuyerPXY_modify_OutputVariable.findBuyerResponseMessage/ns21:data/ns5:supplierID</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleHierarchy_In.payload/ns7:item/ns4:itemDetailInfo/ns4:supplier/ns5:supplierID</to>
                      </copy>
                    </assign>
                  </sequence>
                </scope>
              </sequence>
            </else>
          </if>
          <invoke name="JDAModifyStyleHierarchy" bpelx:invokeAsDetail="no" partnerLink="JDAModifyStyleHierarchyPxy"
                  portType="ns2:modifyItemPort" operation="modify" inputVariable="JDAModifyStyleHierarchy_In"
                  outputVariable="JDAModifyStyleHierarchy_Out"/>
          <scope name="updateSKU2">
            <variables>
              <variable name="JDAModifySKUHierarchyPXY_modify_InputVariable"
                        messageType="ns2:modifyItemRequestMessage"/>
              <variable name="JDAModifySKUHierarchyPXY_modify_OutputVariable"
                        messageType="ns2:modifyItemResponseMessage"/>
            </variables>
            <faultHandlers>
              <catchAll>
                <empty name="Empty11"/>
              </catchAll>
            </faultHandlers>
            <sequence name="Sequence19">
              <assign name="dataHierarchySKU">
                <copy ignoreMissingFromData="yes">
                  <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifySKUHierarchyPXY_modify_InputVariable.payload/ns7:item/ns4:parent/ns4:id</to>
                </copy>
                <copy ignoreMissingFromData="yes">
                  <from>$MerchandiseHierarchyEntitySvc_Out.translateResponseMessage/ns9:itemHierarchyInfo</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifySKUHierarchyPXY_modify_InputVariable.payload/ns7:item/ns4:itemHierarchyInfo</to>
                </copy>
              </assign>
              <invoke name="JDAModifySKUHierarchyPXY" bpelx:invokeAsDetail="no" partnerLink="JDAModifySKUHierarchyPXY"
                      portType="ns2:modifyItemPort" operation="modify"
                      inputVariable="JDAModifySKUHierarchyPXY_modify_InputVariable"
                      outputVariable="JDAModifySKUHierarchyPXY_modify_OutputVariable"/>
            </sequence>
          </scope>
          <scope name="updateSKU1">
            <bpelx:skipCondition>1=1</bpelx:skipCondition>
            <variables>
              <variable name="getSKUs_getSKUs_InputVariable" messageType="ns16:getSKUsInput_msg"/>
              <variable name="getSKUs_getSKUs_OutputVariable" messageType="ns16:getSKUsOutputCollection_msg"/>
              <variable name="Count" type="xsd:integer"/>
              <variable name="JDAUpdateSKUProcessPXY_updateJDA_InputVariable"
                        messageType="ns18:JDAUpdateSKUProcessRequestMessage"/>
              <variable name="JDAUpdateSKUProcessPXY_updateJDA_OutputVariable"
                        messageType="ns18:JDAUpdateSKUProcessResponseMessage"/>
            </variables>
            <sequence name="Sequence9">
              <assign name="getSKUs">
                <copy ignoreMissingFromData="yes">
                  <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$getSKUs_getSKUs_InputVariable.getSKUsInput_msg/ns17:idStyle</to>
                </copy>
              </assign>
              <invoke name="getSKUs" bpelx:invokeAsDetail="no" partnerLink="getSKUs" portType="ns16:getSKUs_ptt"
                      operation="getSKUs" inputVariable="getSKUs_getSKUs_InputVariable"
                      outputVariable="getSKUs_getSKUs_OutputVariable"/>
              <assign name="CountNode">
                <copy ignoreMissingFromData="yes">
                  <from>count($getSKUs_getSKUs_OutputVariable.getSKUsOutputCollection/ns17:getSKUsOutput)</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Count</to>
                </copy>
              </assign>
              <forEach parallel="no" counterName="ForEach1CounterItems" name="Items">
                <startCounterValue>1</startCounterValue>
                <finalCounterValue>$Count</finalCounterValue>
                <scope name="Scope1">
                  <sequence>
                    <assign name="Assign">
                      <copy ignoreMissingFromData="yes">
                        <from>$getSKUs_getSKUs_OutputVariable.getSKUsOutputCollection/ns17:getSKUsOutput[$ForEach1CounterItems]/ns17:ITEM</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAUpdateSKUProcessPXY_updateJDA_InputVariable.payload/ns19:items/ns4:item/ns4:id</to>
                      </copy>
                      <copy ignoreMissingFromData="yes">
                        <from>$MerchandiseHierarchyEntitySvc_Out.translateResponseMessage/ns9:itemHierarchyInfo</from>
                        <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAUpdateSKUProcessPXY_updateJDA_InputVariable.payload/ns19:items/ns4:item/ns4:itemHierarchyInfo</to>
                      </copy>
                    </assign>
                    <invoke name="JDAUpdateSKUProcessPXY" bpelx:invokeAsDetail="no" partnerLink="JDAUpdateSKUProcessPXY"
                            portType="ns18:JDAUpdateSKUProcess" operation="updateJDA"
                            inputVariable="JDAUpdateSKUProcessPXY_updateJDA_InputVariable"
                            outputVariable="JDAUpdateSKUProcessPXY_updateJDA_OutputVariable"/>
                  </sequence>
                </scope>
              </forEach>
            </sequence>
          </scope>
          <scope name="traceModifyGeneralData1"
                                                                       xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
            <bpelx:skipCondition>1=1</bpelx:skipCondition>
            <faultHandlers>
         <catchAll>
            <empty name="faultGeneralData"/>
         </catchAll>
      </faultHandlers>
      <sequence>
         <assign name="sendMessage">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
         <copy>
               <from>"TraceActivity"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:operation</to>
            </copy><copy>
               <from>$interfaceId</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:interfaceId</to>
            </copy><copy>
               <from>$activityId</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:activityId</to>
            </copy><copy>
               <from>"Modificando articulo"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:data</to>
            </copy><copy>
               <from>"id"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>$traceID2</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"registrationDate"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>$initialDateTime</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"finishDate"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>xp20:current-dateTime()</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"component"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"ModifyGeneralData"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"destinyComponent"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"ModifyJDAProxy"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"message"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"Modificando datos generales de articulo"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"level"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>1</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"status"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"Finalizado"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><copy>
               <from>"class"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:key</to>
            </copy><copy>
               <from>"Expert"</from>
               <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns15:request/ns15:header/ns15:parameters/ns15:entry/ns15:value</to>
            </copy><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_1.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_2.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_3.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_4.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_5.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_6.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_7.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_8.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation><extensionAssignOperation>
                  <bpelx:append xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
                  <bpelx:from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Entry_9.request/ns15:request/ns15:header/ns15:parameters/ns15:entry</bpelx:from>
                  <bpelx:to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$traceHierarchy_audit_InputVariable.request/ns15:request/ns15:header/ns15:parameters</bpelx:to>
               </bpelx:append>
                </extensionAssignOperation></assign>
         
      <invoke name="traceHierarchy" partnerLink="GovernanceAPIPXY" portType="ns15:GovernancePort" operation="audit"
              inputVariable="traceHierarchy_audit_InputVariable" outputVariable="traceHierarchy_audit_OutputVariable"
              xmlns:bpelx="http://schemas.oracle.com/bpel/extension" bpelx:invokeAsDetail="no"/></sequence>
   </scope>
        </sequence>
      </flow>
    </scope>
    <scope name="updateDescr">
      <bpelx:skipCondition>$updateGeneralInfo=0</bpelx:skipCondition>
      <faultHandlers>
        <catchAll>
          <empty name="Empty9"/>
        </catchAll>
      </faultHandlers>
      <sequence name="Sequence4">
        <if name="validateDescr">
          <condition>$inputVariable.payload/ns6:items/ns4:item/ns4:description = $InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:description</condition>
          <assign name="descrIn" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      
   <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes"
         xmlns:bpelx="http://schemas.oracle.com/bpel/extension">
         <from>$InvFindJDAStyle_FindById_Out.payload/ns3:items/ns4:item/ns4:description</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleDescriptionsSvc_modify_InputVariable.payload/ns7:item/ns4:description</to>
      </copy><copy>
         <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleDescriptionsSvc_modify_InputVariable.payload/ns7:item/ns4:id</to>
      </copy></assign>
          <else>
            <sequence>
              <assign name="descrIn">
                <copy ignoreMissingFromData="yes" bpelx:insertMissingToData="yes">
                  <from>$inputVariable.payload/ns6:items/ns4:item/ns4:description</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleDescriptionsSvc_modify_InputVariable.payload/ns7:item/ns4:description</to>
                </copy>
                <copy>
                  <from>$inputVariable.payload/ns6:items/ns4:item/ns4:id</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$JDAModifyStyleDescriptionsSvc_modify_InputVariable.payload/ns7:item/ns4:id</to>
                </copy>
              </assign>
            </sequence>
          </else>
        </if>
        <invoke name="JDAModifyStyleDescriptionsSvc" bpelx:invokeAsDetail="no"
                partnerLink="JDAModifyStyleDescriptionsSvc" portType="ns2:modifyItemPort" operation="modify"
                inputVariable="JDAModifyStyleDescriptionsSvc_modify_InputVariable"
                outputVariable="JDAModifyStyleDescriptionsSvc_modify_OutputVariable"/>
      </sequence>
    </scope>
    <assign name="Fault" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      
   <bpelx:skipCondition>$continueAction=1</bpelx:skipCondition><copy>
         <from>false()</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$outputVariable.payload/ns12:result</to>
      </copy><copy>
         <from>'Invalid Style Id'</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$outputVariable.payload/ns12:description</to>
      </copy></assign><!-- Generate reply to synchronous request -->
    <reply name="replyOutput" partnerLink="JDAUpdateStyleProcessSvc" portType="client:JDAUpdateStyleProcess" operation="process" variable="outputVariable"/>
  </sequence>
</process>